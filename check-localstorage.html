<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>LocalStorageç¢ºèªãƒ„ãƒ¼ãƒ«</title>
    <style>
        body {
            font-family: 'Courier New', monospace;
            padding: 20px;
            background: #1a1a2e;
            color: #eee;
        }
        h1 { color: #00d4ff; }
        pre {
            background: #16213e;
            padding: 20px;
            border-radius: 8px;
            overflow-x: auto;
            border: 1px solid #00d4ff;
        }
        .highlight { color: #ff6b6b; font-weight: bold; }
        .success { color: #51cf66; font-weight: bold; }
        button {
            background: #00d4ff;
            color: #1a1a2e;
            border: none;
            padding: 10px 20px;
            border-radius: 5px;
            cursor: pointer;
            font-size: 16px;
            margin: 10px 5px;
        }
        button:hover { background: #00a8cc; }
    </style>
</head>
<body>
    <h1>ğŸ” LocalStorage éŸ³åŸŸãƒ‡ãƒ¼ã‚¿ç¢ºèªãƒ„ãƒ¼ãƒ«</h1>
    
    <button onclick="checkData()">ğŸ“Š ãƒ‡ãƒ¼ã‚¿ç¢ºèª</button>
    <button onclick="clearData()">ğŸ—‘ï¸ ãƒ‡ãƒ¼ã‚¿å‰Šé™¤</button>
    
    <h2>ä¿å­˜ã•ã‚Œã¦ã„ã‚‹ãƒ‡ãƒ¼ã‚¿:</h2>
    <pre id="output">ãƒœã‚¿ãƒ³ã‚’ã‚¯ãƒªãƒƒã‚¯ã—ã¦ãƒ‡ãƒ¼ã‚¿ã‚’ç¢ºèªã—ã¦ãã ã•ã„</pre>
    
    <h2>æ¤œè¨¼çµæœ:</h2>
    <pre id="validation"></pre>

    <script>
        function checkData() {
            const data = localStorage.getItem('voiceRangeData');
            const output = document.getElementById('output');
            const validation = document.getElementById('validation');
            
            if (!data) {
                output.textContent = 'ãƒ‡ãƒ¼ã‚¿ãŒè¦‹ã¤ã‹ã‚Šã¾ã›ã‚“';
                validation.textContent = '';
                return;
            }
            
            const parsed = JSON.parse(data);
            output.textContent = JSON.stringify(parsed, null, 2);
            
            // æ¤œè¨¼
            let validationText = '=== ãƒ‡ãƒ¼ã‚¿æ¤œè¨¼çµæœ ===\n\n';
            
            if (parsed.results) {
                const r = parsed.results;
                
                // å‘¨æ³¢æ•°ãƒ‡ãƒ¼ã‚¿ã®ç¢ºèª
                validationText += `âœ… lowFreq: ${r.lowFreq ? r.lowFreq + ' Hz' : 'âŒ ãªã—'}\n`;
                validationText += `âœ… highFreq: ${r.highFreq ? r.highFreq + ' Hz' : 'âŒ ãªã—'}\n\n`;
                
                // éŸ³åãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã®ç¢ºèªï¼ˆå‰Šé™¤ã•ã‚Œã¦ã„ã‚‹ã¹ãï¼‰
                if (r.lowNote !== undefined) {
                    validationText += `âš ï¸ lowNote: "${r.lowNote}" ï¼ˆå‰Šé™¤ã•ã‚Œã‚‹ã¹ãï¼‰\n`;
                } else {
                    validationText += `âœ… lowNote: å‰Šé™¤æ¸ˆã¿ï¼ˆæ­£ã—ã„ï¼‰\n`;
                }
                
                if (r.highNote !== undefined) {
                    validationText += `âš ï¸ highNote: "${r.highNote}" ï¼ˆå‰Šé™¤ã•ã‚Œã‚‹ã¹ãï¼‰\n`;
                } else {
                    validationText += `âœ… highNote: å‰Šé™¤æ¸ˆã¿ï¼ˆæ­£ã—ã„ï¼‰\n`;
                }
                
                validationText += `\néŸ³åŸŸç¯„å›²è¡¨ç¤º: ${r.range}\n`;
                
                // v3.3.0æº–æ‹ ã‹ãƒã‚§ãƒƒã‚¯
                if (r.lowNote === undefined && r.highNote === undefined) {
                    validationText += `\nâœ… v3.3.0æº–æ‹ : å‘¨æ³¢æ•°ã®ã¿ä¿å­˜ã•ã‚Œã¦ã„ã¾ã™\n`;
                } else {
                    validationText += `\nâš ï¸ å¤ã„å½¢å¼: éŸ³åãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ãŒæ®‹ã£ã¦ã„ã¾ã™\n`;
                    validationText += `â†’ ãƒ–ãƒ©ã‚¦ã‚¶ã®ã‚­ãƒ£ãƒƒã‚·ãƒ¥ã‚’ã‚¯ãƒªã‚¢ã—ã¦å†æ¸¬å®šã—ã¦ãã ã•ã„\n`;
                }
            }
            
            validation.textContent = validationText;
        }
        
        function clearData() {
            if (confirm('éŸ³åŸŸãƒ‡ãƒ¼ã‚¿ã‚’å‰Šé™¤ã—ã¾ã™ã‹ï¼Ÿ')) {
                localStorage.removeItem('voiceRangeData');
                document.getElementById('output').textContent = 'ãƒ‡ãƒ¼ã‚¿ã‚’å‰Šé™¤ã—ã¾ã—ãŸ';
                document.getElementById('validation').textContent = '';
            }
        }
        
        // ãƒšãƒ¼ã‚¸èª­ã¿è¾¼ã¿æ™‚ã«è‡ªå‹•ç¢ºèª
        window.addEventListener('load', checkData);
    </script>
</body>
</html>
