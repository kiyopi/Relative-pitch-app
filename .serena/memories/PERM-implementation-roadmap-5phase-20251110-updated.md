# PitchPro-SPA 実装ロードマップ（5フェーズ戦略）- 更新版

**作成日**: 2025-11-09
**最終更新**: 2025-11-10
**承認状態**: ユーザー承認済み

## 📋 実装予定の8項目

1. ~~**ドレミの音程判定の調整（1000Hz超誤差）**~~ ✅ v1.3.3で解決
2. **下行モードの追加実装** 📊 見積もり: 13-19時間
3. **総合評価の次のステップ実装** 🎯 UX改善
4. **総合分析レポートの内容精査と実装** 📈 プレミアム機能
5. **トレーニング記録ページ実装** 📅 履歴管理
6. **設定ページ実装（データリセット等）** ⚙️ 開発必須
7. **トップページレイアウト再検討** 🎨 UI改善
8. **SNS発信内容とレイアウト検討** 📱 マーケティング

---

## 🎯 5フェーズ実装戦略

### **Phase 1: コア機能の安定化（最優先）**

#### **1-1. ドレミの音程判定の調整（1000Hz超誤差）** ✅ 完了（2025-11-10）

**解決方法**: PitchPro v1.3.3パフォーマンス最適化
- **データ収集数**: 14.5件 → 18.5件（+27%向上）
- **異常値発生**: 時々発生 → 0%（完全解決）
- **FPS安定性**: 40-45 FPS → 60 FPS安定
- **測定精度**: 異常値完全消滅

**実施した4つの修正**:
1. smoothing値最適化（0.25 → 0.1）- CPU負荷-15%
2. FPS閾値緩和（1.5倍 → 2.0倍）- FPS安定化
3. 初期FPS引き上げ（45 → 60 FPS）- データ収集機会+33%
4. ノイズゲート閾値緩和（10倍 → 2.0倍）- 音量バー安定化

**検証結果**:
```
トレーニングセッション3 (F2基音):
  Step 0-7: 平均18.5件/700ms ✅
  音量バー: 正常動作 ✅
  FPS: 60 FPS安定 ✅
  異常値: 0件 ✅
```

**関連コミット**: 
- feat: v1.3.3 - パフォーマンス最適化と音量バー安定化
- feat: PitchPro v1.3.4 - 音名表示にオクターブ番号を含むように修正

**ステータス**: ✅ **完了** - 追加作業不要

---

#### **1-2. 設定ページ実装（データリセット等）** - 2-3時間 ← 次の優先タスク

- **作業内容**:
  - `/pages/settings.html` 作成
  - データリセット機能実装（DataManager活用）
  - 確認ダイアログ追加
  - ルーティング設定
- **優先度**: 🔴 高（開発・テスト作業に必須）
- **依存関係**: DataManager実装済み

**Phase 1完了基準**: ~~音程判定が正確~~✅、設定ページで安全にデータリセット可能

---

### **Phase 2: UX改善（Week 2）**

**目的**: ユーザー満足度を向上させる

#### **2-1. 総合評価の次のステップ実装** - 3-4時間
- **作業内容**:
  - `/Bolt/results-freemium-basic-8sessions.html` のHTML/CSS移行
  - グレード別メッセージの動的生成
  - UIカタログ準拠のスタイル調整
  - 実機テスト
- **優先度**: 🟠 高（8セッション完了時のユーザー体験向上）
- **依存関係**: Phase 1完了推奨

#### **2-2. トレーニング記録ページ実装** - 4-6時間
- **作業内容**:
  - `/pages/training-history.html` 作成
  - DataManagerから過去データ取得・表示
  - セッション一覧・詳細表示
  - グラフ・統計表示（Chart.js活用）
- **優先度**: 🟠 中（ユーザーのモチベーション維持）
- **依存関係**: DataManager実装済み

**Phase 2完了基準**: 8セッション完了後に適切なガイダンス表示、履歴確認可能

---

### **Phase 3: 分析機能の強化（Week 3-4）**

**目的**: 上級ユーザー向け詳細フィードバック

#### **3-1. 総合分析レポートの内容精査と実装** - 6-8時間
- **作業内容**:
  - プレミアム分析デモページ確認
  - 無料版向け簡易分析実装
  - 音程別傾向分析
  - 推奨トレーニングメッセージ生成
- **優先度**: 🟡 中（差別化・付加価値向上）
- **依存関係**: Phase 1-2完了推奨

**Phase 3完了基準**: ユーザーが自分の弱点を把握できる分析機能実装

---

### **Phase 4: モード拡張（Week 4-6）**

**目的**: トレーニングバリエーション増加

#### **4-1. 下行モードの追加実装** - 13-19時間
- **詳細見積もり**: `PERM-descending-mode-implementation-estimate-20251107-1449` 参照
- **段階的実装**:
  1. ランダム基音モード（下行版）- 4-6時間
  2. 連続チャレンジモード（下行版）- 4-6時間
  3. 12音階モード（下行版）- 3-5時間
  4. 統合テスト・調整 - 2-3時間
- **優先度**: 🟡 中（音域活用の完全化）
- **依存関係**: ~~Phase 1完了必須~~✅（音程判定の精度確保済み）

**Phase 4完了基準**: 3モード全てで上行・下行選択可能

---

### **Phase 5: UI・マーケティング（Week 6+）**

**目的**: ユーザー獲得・定着率向上

#### **5-1. トップページレイアウト再検討** - 4-6時間
- **作業内容**:
  - 下行モード追加後のナビゲーション設計
  - モード選択UIの改善
  - UIカタログ準拠のデザイン統一
- **優先度**: 🟢 低（機能実装後）
- **依存関係**: Phase 4完了後

#### **5-2. SNS発信内容とレイアウト検討** - 3-5時間
- **作業内容**:
  - Instagramボタン追加
  - シェア機能実装
  - マーケティング要素配置
- **優先度**: 🟢 低（リリース準備段階）
- **依存関係**: Phase 1-4完了後

**Phase 5完了基準**: マーケティング要素統合、リリース準備完了

---

## 📊 工数サマリー（更新版）

| Phase | 項目 | 工数 | 優先度 | ステータス |
|-------|------|------|--------|-----------|
| 1 | ~~音程判定調整~~ | ~~3-5h~~ | ~~🔴 最重要~~ | ✅ 完了 |
| 1 | 設定ページ | 2-3h | 🔴 高 | 🔄 次のタスク |
| 2 | 次のステップ | 3-4h | 🟠 高 | ⏸️ 待機 |
| 2 | 記録ページ | 4-6h | 🟠 中 | ⏸️ 待機 |
| 3 | 分析レポート | 6-8h | 🟡 中 | ⏸️ 待機 |
| 4 | 下行モード | 13-19h | 🟡 中 | ⏸️ 待機 |
| 5 | トップページ | 4-6h | 🟢 低 | ⏸️ 待機 |
| 5 | SNS機能 | 3-5h | 🟢 低 | ⏸️ 待機 |
| **合計** | - | **35-53h** | - | **3-5h削減** |

---

## 🎉 2025-11-10の完了作業

### **PitchPro v1.3.3パフォーマンス最適化（午前）**
- データ収集数+27%（14.5→18.5件）
- FPS安定化（40-45→60 FPS）
- CPU負荷-15%削減
- 音量バー安定化
- **異常値発生0%達成**

### **PitchPro v1.3.4音域表示修正（午後）**
- 音域範囲に完全なオクターブ番号表示（"E2 - E" → "E2 - E4"）
- FrequencyUtils統合でコード簡素化
- データ構造最適化（周波数のみ保存、Single Source of Truth）
- VOICE_RANGE_TEST_SPECIFICATION v3.2.0 → v3.3.0更新

### **ドキュメント整備**
- `PITCHPRO_V1.3.4_INTEGRATION.md` 作成
- `CACHE_CLEAR_GUIDE.md` 作成
- `MODIFICATION_HISTORY_20251110.md` 作成（完全な修正履歴）

---

## 💡 Phase 1-1完了による影響

### **下行モード実装の前提条件達成**

**v1.3.3のデータ収集精度向上により**:
- 高音域（1000Hz超）での異常値完全消滅
- 下行モード実装時の測定信頼性確保
- Phase 4への移行準備完了

**今後の展開**:
1. Phase 1-2（設定ページ）実装で開発効率化
2. Phase 2（UX改善）でユーザー満足度向上
3. Phase 4（下行モード）で音域活用の完全化

---

## 🔄 更新された実装フロー

```
✅ 2025-11-10: Phase 1-1 完了（音程判定調整）
🔄 Week 1: Phase 1-2 → 設定ページ実装
📅 Week 2: Phase 2 → 次のステップ + 記録ページ
📅 Week 3-4: Phase 3 → 分析レポート
📅 Week 4-6: Phase 4 → 下行モード（段階的）
📅 Week 6+: Phase 5 → UI改善 + SNS機能
```

---

## 📝 関連ドキュメント

- **v1.3.3詳細**: `PERM-pitchpro-v133-release-preparation-20251110-0330`
- **修正履歴**: `MODIFICATION_HISTORY_20251110.md`
- **下行モード見積もり**: `PERM-descending-mode-implementation-estimate-20251107-1449`
- **デモページ参照**: `/Bolt/results-freemium-basic-8sessions.html`
- **データ管理**: `/js/data-manager.js`（実装済み）
- **UIカタログ**: `/UI-Catalog/ui-catalog-essentials.html`

---

## ✅ 次のアクション

### **最優先: Phase 1-2 設定ページ実装**

**実装内容**:
1. `/pages/settings.html` 作成
2. DataManager統合（データリセット機能）
3. 確認ダイアログ実装
4. router.js統合

**見積もり**: 2-3時間

**完了基準**:
- localStorage全データの安全なリセット機能
- 個別データ削除機能（音域データ、セッションデータ等）
- 確認ダイアログによる誤操作防止

---

**承認日**: 2025-11-09
**更新日**: 2025-11-10
**承認者**: ユーザー
**次回レビュー**: Phase 1-2完了時
