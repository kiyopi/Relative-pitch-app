<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <title>8vaç›¸å¯¾éŸ³æ„Ÿãƒˆãƒ¬ãƒ¼ãƒ‹ãƒ³ã‚° - ç·åˆè©•ä¾¡</title>
    <link rel="stylesheet" href="styles/system.css?v=4">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;700&display=swap" rel="stylesheet">
    
    <!-- Lucide Icons -->
    <script src="https://unpkg.com/lucide@latest/dist/umd/lucide.js"></script>
    
    <!-- Chart.js -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.umd.js"></script>
    
    <style>
        /* èƒŒæ™¯ã‚°ãƒ©ãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ - iOSå¯¾å¿œç‰ˆ */
        body {
            position: relative;
            min-height: 100vh;
            min-height: -webkit-fill-available;
            -webkit-overflow-scrolling: touch;
            background: #0f172a; /* ãƒ•ã‚©ãƒ¼ãƒ«ãƒãƒƒã‚¯ */
        }
        
        /* ç–‘ä¼¼è¦ç´ ã§èƒŒæ™¯ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ */
        body::before {
            content: '';
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: linear-gradient(135deg, #0f172a 0%, #581c87 50%, #0f172a 100%);
            background-size: 400% 400%;
            animation: gradientShift 15s ease infinite;
            -webkit-animation: gradientShift 15s ease infinite;
            z-index: -1;
            transform: translateZ(0);
            -webkit-transform: translateZ(0);
            -webkit-backface-visibility: hidden;
            will-change: background-position;
        }
        
        @keyframes gradientShift {
            0% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
            100% { background-position: 0% 50%; }
        }
        
        @-webkit-keyframes gradientShift {
            0% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
            100% { background-position: 0% 50%; }
        }
        
        /* ãƒ•ãƒ­ãƒ¼ãƒ†ã‚£ãƒ³ã‚°ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ */
        .page-header-icon {
            animation: float 6s ease-in-out infinite;
        }
        
        @keyframes float {
            0%, 100% { transform: translateY(0px); }
            50% { transform: translateY(-10px); }
        }
        
        /* SNSã‚·ã‚§ã‚¢ã‚»ã‚¯ã‚·ãƒ§ãƒ³ãƒ»shimmerã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ç­‰ã¯ system.css ã«ç§»å‹•æ¸ˆã¿ */
        
        .share-card h3 {
            font-size: 1.5rem;
            font-weight: bold;
            color: white;
            margin-bottom: 0.5rem;
        }
        
        .share-card p {
            color: white;
            margin-bottom: 1.5rem;
            font-size: 1rem;
        }
        
        /* rank-sectionã‚¹ã‚¿ã‚¤ãƒ«ï¼ˆæ–°æ¨ªä¸€åˆ—ãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆï¼‰ */
        .rank-section {
            text-align: center;
            margin-bottom: 40px;
            padding-bottom: 32px;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
        }
        
        .rank-mode {
            margin-bottom: 24px;
        }
        
        .rank-section .mode-title {
            font-size: 1.6rem !important;
            font-weight: 700;
            color: white;
            margin: 0;
        }
        
        .rank-content-row {
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            gap: 24px;
        }
        
        .rank-icon {
            flex-shrink: 0;
        }
        
        .rank-stats-row {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 32px;
            flex-wrap: wrap;
        }
        
        .rank-stat-item {
            text-align: center;
            min-width: 80px;
        }
        
        .stat-value-rank {
            font-size: 2rem;
            font-weight: 700;
            color: #ffffff;
            margin-bottom: 4px;
            transition: transform 0.2s ease;
            line-height: 1;
        }
        
        .stat-value-rank.grade-value {
            font-size: 2.0rem;
            color: #ffffff; /* ã‚°ãƒ¬ãƒ¼ãƒ‰ã¯ç™½è‰² */
        }
        
        .stat-value-rank.avg-error {
            color: #fbbf24; /* å¹³å‡èª¤å·®ã‚‚ã‚°ãƒ¬ãƒ¼ãƒ‰ã¨åŒã˜é»„è‰² */
        }
        
        .stat-label-rank {
            font-size: 1rem;
            color: rgba(255, 255, 255, 0.7);
            line-height: 1.1;
            margin: 0;
            white-space: nowrap;
        }
        
        .rank-circle {
            width: 100px;
            height: 100px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
        }
        
        .rank-circle-icon {
            width: 64px;
            height: 64px;
        }
        
        @media (max-width: 768px) {
            .rank-content-row {
                gap: 20px;
            }
            
            .rank-stats-row {
                gap: 20px;
            }
            
            .rank-circle {
                width: 90px;
                height: 90px;
            }
            
            .rank-circle-icon {
                width: 54px !important;
                height: 54px !important;
            }
            
            .stat-value-rank {
                font-size: 1.5rem;
            }
            
            .stat-value-rank.grade-value {
                font-size: 2rem;
            }
        }
        
        .share-buttons {
            display: flex;
            gap: 1.2rem;
            justify-content: center;
            flex-wrap: wrap;
        }
        
        .share-btn {
            width: 56px;
            height: 56px;
            border-radius: 50%;
            cursor: pointer;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            display: inline-flex;
            align-items: center;
            justify-content: center;
            color: white;
            text-decoration: none;
            position: relative;
            background: rgba(255, 255, 255, 0.2);
            border: 1px solid rgba(255, 255, 255, 0.3);
        }
        
        .share-btn:hover {
            background: rgba(255, 255, 255, 0.3);
            border-color: rgba(255, 255, 255, 0.4);
            transform: translateY(-3px) scale(1.1);
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.3), 0 0 30px rgba(255, 255, 255, 0.2);
        }
        
        .share-btn svg {
            width: 24px;
            height: 24px;
            z-index: 1;
        }
        
        .share-btn.twitter:hover {
            box-shadow: 0 8px 25px rgba(29, 161, 242, 0.4), 0 0 30px rgba(29, 161, 242, 0.3);
        }
        
        .share-btn.line:hover {
            box-shadow: 0 8px 25px rgba(0, 195, 0, 0.4), 0 0 30px rgba(0, 195, 0, 0.3);
        }
        
        .share-btn.facebook:hover {
            box-shadow: 0 8px 25px rgba(24, 119, 242, 0.4), 0 0 30px rgba(24, 119, 242, 0.3);
        }
        
        .share-btn.copy:hover {
            box-shadow: 0 8px 25px rgba(139, 92, 246, 0.4), 0 0 30px rgba(139, 92, 246, 0.3);
        }
        
        @media (max-width: 640px) {
            .share-btn {
                width: 48px;
                height: 48px;
            }
            
            .share-btn svg {
                width: 20px;
                height: 20px;
            }
        }
        
        /* ãƒ•ãƒªãƒ¼ãƒŸã‚¢ãƒ åˆ¶é™è¡¨ç¤º */
        .limitation-badge {
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid rgba(255, 255, 255, 0.1);
            color: rgba(255, 255, 255, 0.5);
            padding: 0.25rem 0.5rem;
            border-radius: 8px;
            font-size: 0.75rem;
            text-align: center;
            margin: 0.5rem 0;
        }
        
        /* premium-cta ã‚¹ã‚¿ã‚¤ãƒ«ã¯ system.css ã«ç§»å‹•æ¸ˆã¿ */
        
        .feature-preview {
            background: rgba(255, 255, 255, 0.1);
            border: 2px dashed rgba(255, 255, 255, 0.3);
            border-radius: 12px;
            padding: 2rem;
            text-align: center;
            margin: 1rem 0;
            color: #cbd5e1;
        }
        
        .comparison-table {
            background: rgba(255, 255, 255, 0.1);
            border-radius: 12px;
            padding: 1.5rem;
            margin: 2rem 0;
        }
        
        .comparison-row {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 0.75rem 0;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
        }
        
        .comparison-row:last-child {
            border-bottom: none;
        }
        
        .check-icon {
            color: #10b981;
        }
        
        .x-icon {
            color: #ef4444;
        }
        
        /* feature-highlight ã‚¹ã‚¿ã‚¤ãƒ«ã¯ system.css ã«ç§»å‹•æ¸ˆã¿ */
        
        .feature-item {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            margin-bottom: 0.5rem;
        }
        
        .feature-item.available {
            color: #cbd5e1;
        }
        
        .feature-item.locked {
            color: #94a3b8;
            opacity: 0.8;
        }
    </style>
</head>
<body>
    <div class="min-h-screen p-6">
        <div class="container">
            <!-- Header -->
            <div class="text-center mb-8 relative">
                <div class="flex justify-center mb-6">
                    <div class="page-header-icon page-header-icon-purple">
                        <i data-lucide="file-chart-column-increasing" class="icon-2xl text-white" data-stroke-width="2"></i>
                    </div>
                </div>
                <h1 class="text-4xl font-bold text-white mb-4">ç·åˆè©•ä¾¡</h1>
                <p class="text-green-200 text-xl mb-6">12ã‚»ãƒƒã‚·ãƒ§ãƒ³å®Œäº† - ã‚ãªãŸã®ç›¸å¯¾éŸ³æ„Ÿèƒ½åŠ›ã‚’åˆ†æ</p>
            </div>
            <!-- SNSã‚·ã‚§ã‚¢ã‚»ã‚¯ã‚·ãƒ§ãƒ³ -->
            <div class="share-section" id="share-section">
            <div class="share-card">
                <!-- rank-section -->
                <section class="rank-section">
                    <!-- ãƒ¢ãƒ¼ãƒ‰å -->
                    <div class="rank-mode">
                        <h3 class="mode-title" id="main-mode-title">é€£ç¶šãƒãƒ£ãƒ¬ãƒ³ã‚¸ãƒ¢ãƒ¼ãƒ‰</h3>
                    </div>
                    
                    <!-- ã‚°ãƒ¬ãƒ¼ãƒ‰ã‚¢ã‚¤ã‚³ãƒ³ã¨çµ±è¨ˆæƒ…å ±ã‚’æ¨ªä¸€åˆ—ã« -->
                    <div class="rank-content-row">
                        <!-- ã‚°ãƒ¬ãƒ¼ãƒ‰ã‚¢ã‚¤ã‚³ãƒ³ -->
                        <div class="rank-icon">
                            <div class="rank-circle" style="background: linear-gradient(135deg, #fbbf24, #d97706);">
                                <i data-lucide="crown" class="rank-circle-icon" style="color: white;"></i>
                            </div>
                        </div>
                        
                        <!-- çµ±è¨ˆæƒ…å ± -->
                        <div class="rank-stats-row">
                            <div class="rank-stat-item">
                                <div class="stat-value-rank grade-value" id="dynamic-grade">B</div>
                                <div class="stat-label-rank">ç·åˆã‚°ãƒ¬ãƒ¼ãƒ‰</div>
                            </div>
                            <div class="rank-stat-item">
                                <div class="stat-value-rank avg-error" style="color: #fbbf24;">Â±42Â¢</div>
                                <div class="stat-label-rank">å¹³å‡èª¤å·®ï¼ˆã‚»ãƒ³ãƒˆï¼‰</div>
                            </div>
                            <div class="rank-stat-item">
                                <div class="stat-value-rank max-error">+58Â¢</div>
                                <div class="stat-label-rank">æœ€å¤§èª¤å·®ï¼ˆã‚»ãƒ³ãƒˆï¼‰</div>
                            </div>
                            <div class="rank-stat-item">
                                <div class="stat-value-rank session-count">12</div>
                                <div class="stat-label-rank">ã‚»ãƒƒã‚·ãƒ§ãƒ³æ•°</div>
                            </div>
                        </div>
                        
                        <!-- ãƒ©ãƒ³ã‚¯å–å¾—ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ -->
                        <div class="rank-achievement-message" style="margin-top: 0px; margin-bottom: 0px; text-align: center;">
                            <p id="share-message" style="color: rgba(255, 255, 255, 0.9); font-size: 1.1rem; margin: 0;">
                                Bç´šãƒ©ãƒ³ã‚¯å–å¾—ï¼ã‚°ãƒƒãƒ‰ãƒ—ãƒ¬ã‚¤ãƒ¤ãƒ¼ï¼
                            </p>
                        </div>
                    </div>
                </section>
                
                <h3 style="margin-top: 0px; margin-bottom: 24px;">ã¿ã‚“ãªã«æˆæœã‚’ã‚·ã‚§ã‚¢ã—ã‚ˆã†ï¼</h3>
                <div class="share-buttons">
                    <a href="#" class="share-btn twitter" onclick="shareToTwitter(event)" title="Xã§ã‚·ã‚§ã‚¢">
                        <svg viewBox="0 0 24 24" fill="currentColor">
                            <path d="M18.244 2.25h3.308l-7.227 8.26 8.502 11.24H16.17l-5.214-6.817L4.99 21.75H1.68l7.73-8.835L1.254 2.25H8.08l4.713 6.231zm-1.161 17.52h1.833L7.084 4.126H5.117z"/>
                        </svg>
                    </a>
                    <a href="#" class="share-btn line" onclick="shareToLine(event)" title="LINEã§é€ã‚‹">
                        <svg viewBox="0 0 24 24" fill="currentColor">
                            <path d="M19.365 9.863c.349 0 .63.285.63.631 0 .345-.281.63-.63.63H17.61v1.125h1.755c.349 0 .63.283.63.63 0 .344-.281.629-.63.629h-2.386c-.345 0-.627-.285-.627-.629V8.108c0-.345.282-.63.63-.63h2.386c.349 0 .63.285.63.63 0 .349-.281.63-.63.63H17.61v1.125h1.755zm-3.855 3.016c0 .27-.174.51-.432.596-.064.021-.133.031-.199.031-.211 0-.391-.09-.51-.25l-2.443-3.317v2.94c0 .344-.279.629-.631.629-.346 0-.626-.285-.626-.629V8.108c0-.27.173-.51.43-.595.06-.023.136-.033.194-.033.195 0 .375.104.495.254l2.462 3.33V8.108c0-.345.282-.63.63-.63.345 0 .63.285.63.63v4.771zm-5.741 0c0 .344-.282.629-.631.629-.345 0-.627-.285-.627-.629V8.108c0-.345.282-.63.627-.63.348 0 .631.285.631.63v4.771zm-2.466.629H4.917c-.345 0-.63-.285-.63-.629V8.108c0-.345.285-.63.63-.63.348 0 .63.285.63.63v4.141h1.756c.348 0 .629.283.629.63 0 .344-.282.629-.629.629M24 10.314C24 4.943 18.615.572 12 .572S0 4.943 0 10.314c0 4.811 4.27 8.842 10.035 9.608.391.082.923.258 1.058.59.12.301.079.766.038 1.08l-.164 1.02c-.045.301-.24 1.186 1.049.645 1.291-.539 6.916-4.078 9.436-6.975C23.176 14.393 24 12.458 24 10.314"/>
                        </svg>
                    </a>
                    <a href="#" class="share-btn facebook" onclick="shareToFacebook(event)" title="Facebookã§ã‚·ã‚§ã‚¢">
                        <svg viewBox="0 0 24 24" fill="currentColor">
                            <path d="M24 12.073c0-6.627-5.373-12-12-12s-12 5.373-12 12c0 5.99 4.388 10.954 10.125 11.854v-8.385H7.078v-3.47h3.047V9.43c0-3.007 1.792-4.669 4.533-4.669 1.312 0 2.686.235 2.686.235v2.953H15.83c-1.491 0-1.956.925-1.956 1.874v2.25h3.328l-.532 3.47h-2.796v8.385C19.612 23.027 24 18.062 24 12.073z"/>
                        </svg>
                    </a>
                    <button class="share-btn copy" onclick="copyShareText(event)" title="ãƒªãƒ³ã‚¯ã‚’ã‚³ãƒ”ãƒ¼">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                            <rect x="9" y="9" width="13" height="13" rx="2" ry="2"></rect>
                            <path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"></path>
                        </svg>
                    </button>
                </div>
                
            </div>
        </div>

        <!-- Performance Charts -->
        <div class="glass-card mb-8" style="max-width: 100vw; overflow-x: hidden;">
            <div class="block md:grid md:grid-cols-2 gap-4 md:gap-8">
                <!-- Error Trend Chart -->
                <div class="mb-8 md:mb-0">
                    <div class="flex justify-between items-center mb-4">
                        <h3 class="text-xl font-bold text-white">èª¤å·®æ¨ç§»</h3>
                    </div>
                    <div class="relative bg-white/5 rounded-lg p-0 md:p-4" id="error-trend-container" style="height: 280px;">
                        <canvas id="error-trend-chart"></canvas>
                    </div>
                    <div class="text-xs text-white-60 text-center mt-2" style="min-height: 80px; height: auto;">
                        éå»7æ—¥é–“ã®å¹³å‡èª¤å·®æ¨ç§»ã€‚æ”¹å–„å‚¾å‘ãŒç¢ºèªã§ãã¾ã™ã€‚<br>
                        <span class="text-yellow-300">å…¨æœŸé–“ãƒ‡ãƒ¼ã‚¿ã¨è©³ç´°åˆ†æã¯ãƒ—ãƒ¬ãƒŸã‚¢ãƒ ç‰ˆã§</span>
                    </div>
                </div>
                
                <!-- Accuracy Chart -->
                <div>
                    <div class="flex justify-between items-center mb-4">
                        <h3 class="text-xl font-bold text-white">è©•ä¾¡åˆ†å¸ƒ</h3>
                        <div style="display: flex; align-items: center; gap: 0.25rem; font-size: 0.75rem; color: rgba(255,255,255,0.6); padding: 0.25rem 0.5rem; background: rgba(255,255,255,0.1); border-radius: 6px;">
                            <i data-lucide="lock" style="width: 12px; height: 12px;"></i>
                            <span>åŸºæœ¬è¡¨ç¤º</span>
                        </div>
                    </div>
                    <div class="bg-white/5 rounded-lg" style="height: 200px;">
                        <canvas id="accuracy-chart" width="400" height="200"></canvas>
                    </div>
                    <div class="text-xs text-white-60 text-center mt-2">
                        12ã‚»ãƒƒã‚·ãƒ§ãƒ³ã®è©•ä¾¡å†…è¨³<br>
                        <span class="text-yellow-300">è©³ç´°åˆ†æã¯ãƒ—ãƒ¬ãƒŸã‚¢ãƒ ç‰ˆã§</span>
                    </div>
                </div>
            </div>
        </div>

        <!-- Sessions Overview -->
        <div class="glass-card mb-8">
            <div class="flex justify-between items-center mb-6">
                <h3 class="text-2xl font-bold text-white">ã‚»ãƒƒã‚·ãƒ§ãƒ³åˆ¥æˆç¸¾</h3>
                <div style="display: flex; align-items: center; gap: 0.25rem; font-size: 0.75rem; color: rgba(255,255,255,0.6); padding: 0.25rem 0.5rem; background: rgba(255,255,255,0.1); border-radius: 6px;">
                    <i data-lucide="lock" style="width: 12px; height: 12px;"></i>
                    <span>æœ€æ–°ã®ã¿è¡¨ç¤º</span>
                </div>
            </div>
            <p class="text-white-70 text-sm mb-4">
                <span class="lg:hidden">æœ€æ–°ã‚»ãƒƒã‚·ãƒ§ãƒ³ã®è©³ç´°ã®ã¿è¡¨ç¤ºå¯èƒ½</span>
                <span class="hidden lg:inline">æœ€æ–°ã‚»ãƒƒã‚·ãƒ§ãƒ³ï¼ˆã‚»ãƒƒã‚·ãƒ§ãƒ³12ï¼‰ã®è©³ç´°åˆ†æã®ã¿è¡¨ç¤ºå¯èƒ½</span>
            </p>
            <div class="grid grid-cols-12 gap-3" id="sessions-grid">
                <!-- Sessions will be populated by JavaScript -->
            </div>
        </div>
        
        <!-- Detailed Session Analysis (Latest Only) -->
        <div class="glass-card mb-8" id="detailed-analysis-section">
            <div class="flex items-center justify-between mb-6">
                <h3 class="text-xl font-bold text-white text-center flex-1">
                    <div>è©³ç´°åˆ†æ</div>
                    <div class="text-lg mt-1">ã‚»ãƒƒã‚·ãƒ§ãƒ³12ï¼ˆæœ€æ–°ï¼‰</div>
                </h3>
            </div>
            <div class="mb-4 text-center" id="session-info">
                <p class="text-white-70">åŸºéŸ³: C# | å¹³å‡èª¤å·®: Â±20.1ã‚»ãƒ³ãƒˆ</p>
            </div>
            <div class="space-y-2" id="note-results">
                <!-- 8éŸ³ã®è©³ç´°çµæœ -->
                <div class="bg-white/5 rounded-lg p-3">
                    <div class="flex justify-between items-center">
                        <span class="text-white">éŸ³ç¨‹1: ãƒ‰</span>
                        <span class="text-green-300">+5ã‚»ãƒ³ãƒˆ</span>
                    </div>
                </div>
                <div class="bg-white/5 rounded-lg p-3">
                    <div class="flex justify-between items-center">
                        <span class="text-white">éŸ³ç¨‹2: ãƒ¬</span>
                        <span class="text-yellow-300">+15ã‚»ãƒ³ãƒˆ</span>
                    </div>
                </div>
                <div class="bg-white/5 rounded-lg p-3">
                    <div class="flex justify-between items-center">
                        <span class="text-white">éŸ³ç¨‹3: ãƒŸ</span>
                        <span class="text-red-300">+35ã‚»ãƒ³ãƒˆ</span>
                    </div>
                </div>
                <div class="bg-white/5 rounded-lg p-3">
                    <div class="flex justify-between items-center">
                        <span class="text-white">éŸ³ç¨‹4: ãƒ•ã‚¡</span>
                        <span class="text-green-300">-8ã‚»ãƒ³ãƒˆ</span>
                    </div>
                </div>
                <div class="bg-white/5 rounded-lg p-3">
                    <div class="flex justify-between items-center">
                        <span class="text-white">éŸ³ç¨‹5: ã‚½</span>
                        <span class="text-yellow-300">+22ã‚»ãƒ³ãƒˆ</span>
                    </div>
                </div>
                <div class="bg-white/5 rounded-lg p-3">
                    <div class="flex justify-between items-center">
                        <span class="text-white">éŸ³ç¨‹6: ãƒ©</span>
                        <span class="text-green-300">+12ã‚»ãƒ³ãƒˆ</span>
                    </div>
                </div>
                <div class="bg-white/5 rounded-lg p-3">
                    <div class="flex justify-between items-center">
                        <span class="text-white">éŸ³ç¨‹7: ã‚·</span>
                        <span class="text-red-300">+42ã‚»ãƒ³ãƒˆ</span>
                    </div>
                </div>
                <div class="bg-white/5 rounded-lg p-3">
                    <div class="flex justify-between items-center">
                        <span class="text-white">éŸ³ç¨‹8: ãƒ‰ï¼ˆã‚ªã‚¯ã‚¿ãƒ¼ãƒ–ï¼‰</span>
                        <span class="text-yellow-300">+18ã‚»ãƒ³ãƒˆ</span>
                    </div>
                </div>
            </div>
            <div class="mt-6 p-4 rounded-xl border-2 border-dashed border-yellow-400/30 bg-yellow-400/5">
                <div class="flex items-center justify-between">
                    <div class="flex items-center space-x-3">
                        <i data-lucide="lock" style="width: 16px; height: 16px; color: rgba(255, 255, 255, 0.6);"></i>
                        <div>
                            <div class="text-white font-medium">ä»–ã®ã‚»ãƒƒã‚·ãƒ§ãƒ³ã®è©³ç´°åˆ†æã‚’è¦‹ã‚‹ã«ã¯</div>
                            <div class="text-white-70 text-sm">å…¨12ã‚»ãƒƒã‚·ãƒ§ãƒ³ã®è©³ç´°åˆ†æãŒå¯èƒ½</div>
                        </div>
                    </div>
                    <a href="results-premium-analysis.html" class="btn" style="background: linear-gradient(135deg, #ffd700, #ffb347); color: #333; text-decoration: none; padding: 0.5rem 1rem;">
                        ãƒ—ãƒ¬ãƒŸã‚¢ãƒ ç‰ˆã¸
                    </a>
                </div>
            </div>
        </div>



        <!-- æ¬¡ã®ã‚¹ãƒ†ãƒƒãƒ—ã‚»ã‚¯ã‚·ãƒ§ãƒ³ -->
        <div class="glass-card mb-8">
            <div class="text-center mb-8">
                <h2 class="text-2xl font-bold text-white mb-3">
                    ğŸ’¡ æ¬¡ã®ã‚¹ãƒ†ãƒƒãƒ—
                </h2>
                <p class="text-green-300 font-semibold text-lg">
                    Bç´šé”æˆãŠã‚ã§ã¨ã†ã”ã–ã„ã¾ã™ï¼
                </p>
                <p class="text-white-70 mt-2">
                    ç›¸å¯¾éŸ³æ„Ÿã®åŸºç¤ãŒèº«ã«ã¤ãã¾ã—ãŸã€‚ã•ã‚‰ãªã‚‹ä¸Šé”ã‚’ç›®æŒ‡ã—ã¾ã—ã‚‡ã†ï¼
                </p>
            </div>
            
            <div class="next-steps-grid grid gap-8" style="grid-template-columns: repeat(1, 1fr);">
                <style>
                    @media (min-width: 768px) {
                        .next-steps-grid {
                            grid-template-columns: repeat(3, minmax(0, 1fr)) !important;
                        }
                    }
                </style>
                <!-- ç¾åœ¨ã®æˆæœ -->
                <div class="glass-card">
                    <h3 class="text-lg font-semibold text-white mb-4 flex items-center">
                        <i data-lucide="check-circle" class="w-5 h-5 text-green-300 mr-3"></i>
                        ç¾åœ¨ã®æˆæœ
                    </h3>
                    <div class="space-y-2 text-left">
                        <div class="text-white-70">â€¢ å„åŸºéŸ³ã§ã®ç›¸å¯¾éŸ³æ„Ÿèƒ½åŠ›å‘ä¸Š</div>
                        <div class="text-white-70">â€¢ å¹³å‡èª¤å·®Â±20.1ã‚»ãƒ³ãƒˆã‚’é”æˆ</div>
                        <div class="text-white-70">â€¢ ç›¸å¯¾éŸ³æ„Ÿç·´ç¿’ç¿’æ…£ã®ç¢ºç«‹</div>
                    </div>
                </div>
                
                <!-- æ¬¡ã®ç›®æ¨™ -->
                <div class="glass-card">
                    <h3 class="text-lg font-semibold text-white mb-4 flex items-center">
                        <i data-lucide="arrow-up-right" class="w-5 h-5 text-blue-300 mr-3"></i>
                        æ¬¡ã®ç›®æ¨™
                    </h3>
                    <div class="space-y-2 text-left">
                        <div class="text-white-70">â€¢ Aç´šï¼ˆÂ±15Â¢ä»¥ä¸‹ï¼‰ã‚’ç›®æŒ‡ã™</div>
                        <div class="text-white-70">â€¢ é€±3å›ãƒ»15åˆ†ã®é›†ä¸­ç·´ç¿’ç¶™ç¶š</div>
                        <div class="text-white-70">â€¢ ã©ã‚“ãªåŸºéŸ³ã§ã‚‚å®‰å®šã—ãŸç›¸å¯¾éŸ³æ„Ÿã‚’ç›®æŒ‡ã™</div>
                    </div>
                </div>
                
                <!-- åŠ¹æœçš„ãªç·´ç¿’ã‚¹ã‚±ã‚¸ãƒ¥ãƒ¼ãƒ« -->
                <div class="glass-card">
                    <h3 class="text-lg font-semibold text-white mb-4 flex items-center">
                        <i data-lucide="clock" class="w-5 h-5 text-yellow-300 mr-3"></i>
                        åŠ¹æœçš„ãªç·´ç¿’ã‚¹ã‚±ã‚¸ãƒ¥ãƒ¼ãƒ«
                    </h3>
                    <div class="space-y-2 text-left">
                        <div class="text-white-70">â€¢ é€±3å›ã€1å›15åˆ†ã®ç¶™ç¶šç·´ç¿’</div>
                        <div class="text-white-70">â€¢ ã‚·ãƒ£ãƒ¼ãƒ—ç³»åŸºéŸ³ã§ã®é›†ä¸­ç·´ç¿’</div>
                        <div class="text-white-70">â€¢ é›†ä¸­åŠ›ã®é«˜ã„åˆå‰ä¸­ãŒãŠã™ã™ã‚</div>
                    </div>
                </div>
            </div>
            
        </div>

        <!-- ãƒ—ãƒ¬ãƒŸã‚¢ãƒ æ©Ÿèƒ½æ¯”è¼ƒ -->
        <div class="glass-card mb-8">
            <div style="display: flex; align-items: center; justify-content: center; gap: 0.5rem; margin-bottom: 2rem;">
                <i data-lucide="scale" style="width: 24px; height: 24px; color: white;"></i>
                <h3 style="color: white; font-size: 1.25rem; font-weight: 600; margin: 0;">
                    ç„¡æ–™ç‰ˆ vs ãƒ—ãƒ¬ãƒŸã‚¢ãƒ ç‰ˆ
                </h3>
            </div>
            
            <!-- æ©Ÿèƒ½æ¯”è¼ƒãƒ†ãƒ¼ãƒ–ãƒ« -->
            <div style="background: rgba(255, 255, 255, 0.02); border-radius: 12px; overflow: hidden;">
                <!-- ãƒ˜ãƒƒãƒ€ãƒ¼ -->
                <div style="display: grid; grid-template-columns: 2fr 1fr 1fr; background: rgba(255, 255, 255, 0.05);">
                    <div style="padding: 1rem; border-right: 1px solid rgba(255, 255, 255, 0.1);">
                        <h4 style="color: white; font-weight: 600; margin: 0;">æ©Ÿèƒ½</h4>
                    </div>
                    <div style="padding: 1rem; border-right: 1px solid rgba(255, 255, 255, 0.1); text-align: center;">
                        <div style="display: flex; align-items: center; justify-content: center; gap: 0.5rem;">
                            <i data-lucide="user" style="width: 18px; height: 18px; color: white;"></i>
                            <h4 style="color: white; font-weight: 600; margin: 0;">ç„¡æ–™ç‰ˆ</h4>
                        </div>
                    </div>
                    <div style="padding: 1rem; text-align: center;">
                        <div style="display: flex; align-items: center; justify-content: center; gap: 0.5rem;">
                            <i data-lucide="crown" style="width: 18px; height: 18px; color: white;"></i>
                            <h4 style="color: white; font-weight: 600; margin: 0;">ãƒ—ãƒ¬ãƒŸã‚¢ãƒ ç‰ˆ</h4>
                        </div>
                    </div>
                </div>
                
                <!-- æ©Ÿèƒ½é …ç›® -->
                <div style="display: grid; grid-template-columns: 2fr 1fr 1fr; border-bottom: 1px solid rgba(255, 255, 255, 0.05);">
                    <div style="padding: 1rem; border-right: 1px solid rgba(255, 255, 255, 0.1);">
                        <span style="color: white;">ç·åˆã‚°ãƒ¬ãƒ¼ãƒ‰ãƒ»åŸºæœ¬çµ±è¨ˆ</span>
                    </div>
                    <div style="padding: 1rem; border-right: 1px solid rgba(255, 255, 255, 0.1); text-align: center;">
                        <i data-lucide="circle-check-big" style="width: 20px; height: 20px; color: white;"></i>
                    </div>
                    <div style="padding: 1rem; text-align: center;">
                        <i data-lucide="circle-check-big" style="width: 20px; height: 20px; color: white;"></i>
                    </div>
                </div>
                
                <div style="display: grid; grid-template-columns: 2fr 1fr 1fr; border-bottom: 1px solid rgba(255, 255, 255, 0.05);">
                    <div style="padding: 1rem; border-right: 1px solid rgba(255, 255, 255, 0.1);">
                        <span style="color: white;">èª¤å·®æ¨ç§»ãƒ»è©•ä¾¡åˆ†å¸ƒã‚°ãƒ©ãƒ•</span>
                    </div>
                    <div style="padding: 1rem; border-right: 1px solid rgba(255, 255, 255, 0.1); text-align: center;">
                        <span style="color: white; font-size: 0.875rem;">åŸºæœ¬è¡¨ç¤º</span>
                    </div>
                    <div style="padding: 1rem; text-align: center;">
                        <span style="color: white; font-size: 0.875rem;">å…¨æœŸé–“</span>
                    </div>
                </div>
                
                <div style="display: grid; grid-template-columns: 2fr 1fr 1fr; border-bottom: 1px solid rgba(255, 255, 255, 0.05);">
                    <div style="padding: 1rem; border-right: 1px solid rgba(255, 255, 255, 0.1);">
                        <span style="color: white;">ã‚»ãƒƒã‚·ãƒ§ãƒ³æˆç¸¾è¡¨ç¤º</span>
                    </div>
                    <div style="padding: 1rem; border-right: 1px solid rgba(255, 255, 255, 0.1); text-align: center;">
                        <span style="color: white; font-size: 0.875rem;">æœ€æ–°ã®ã¿</span>
                    </div>
                    <div style="padding: 1rem; text-align: center;">
                        <i data-lucide="circle-check-big" style="width: 20px; height: 20px; color: white;"></i>
                    </div>
                </div>
                
                <div style="display: grid; grid-template-columns: 2fr 1fr 1fr; border-bottom: 1px solid rgba(255, 255, 255, 0.05);">
                    <div style="padding: 1rem; border-right: 1px solid rgba(255, 255, 255, 0.1);">
                        <span style="color: white;">SNSã‚·ã‚§ã‚¢æ©Ÿèƒ½</span>
                    </div>
                    <div style="padding: 1rem; border-right: 1px solid rgba(255, 255, 255, 0.1); text-align: center;">
                        <span style="color: white; font-size: 0.875rem;">åŸºæœ¬æƒ…å ±ã®ã¿</span>
                    </div>
                    <div style="padding: 1rem; text-align: center;">
                        <span style="color: white; font-size: 0.875rem;">è©³ç´°åˆ†æä»˜ã</span>
                    </div>
                </div>
                
                <div style="display: grid; grid-template-columns: 2fr 1fr 1fr; border-bottom: 1px solid rgba(255, 255, 255, 0.05);">
                    <div style="padding: 1rem; border-right: 1px solid rgba(255, 255, 255, 0.1);">
                        <span style="color: white;">12éŸ³åˆ¥è©³ç´°åˆ†æ</span>
                    </div>
                    <div style="padding: 1rem; border-right: 1px solid rgba(255, 255, 255, 0.1); text-align: center;">
                        <i data-lucide="minus" style="width: 20px; height: 20px; color: white;"></i>
                    </div>
                    <div style="padding: 1rem; text-align: center;">
                        <i data-lucide="circle-check-big" style="width: 20px; height: 20px; color: white;"></i>
                    </div>
                </div>
                
                <div style="display: grid; grid-template-columns: 2fr 1fr 1fr; border-bottom: 1px solid rgba(255, 255, 255, 0.05);">
                    <div style="padding: 1rem; border-right: 1px solid rgba(255, 255, 255, 0.1);">
                        <span style="color: white;">AIç·´ç¿’ãƒ—ãƒ©ãƒ³ãƒ»æˆé•·äºˆæ¸¬</span>
                    </div>
                    <div style="padding: 1rem; border-right: 1px solid rgba(255, 255, 255, 0.1); text-align: center;">
                        <i data-lucide="minus" style="width: 20px; height: 20px; color: white;"></i>
                    </div>
                    <div style="padding: 1rem; text-align: center;">
                        <i data-lucide="circle-check-big" style="width: 20px; height: 20px; color: white;"></i>
                    </div>
                </div>
                
                <div style="display: grid; grid-template-columns: 2fr 1fr 1fr; border-bottom: 1px solid rgba(255, 255, 255, 0.05);">
                    <div style="padding: 1rem; border-right: 1px solid rgba(255, 255, 255, 0.1);">
                        <span style="color: white;">ãƒˆãƒ¬ãƒ¼ãƒ‹ãƒ³ã‚°è¨˜éŒ²</span>
                    </div>
                    <div style="padding: 1rem; border-right: 1px solid rgba(255, 255, 255, 0.1); text-align: center;">
                        <span style="color: white; font-size: 0.875rem;">åŸºæœ¬è¨˜éŒ²</span>
                    </div>
                    <div style="padding: 1rem; text-align: center;">
                        <span style="color: white; font-size: 0.875rem;">å…¨æœŸé–“</span>
                    </div>
                </div>
                
                <div style="display: grid; grid-template-columns: 2fr 1fr 1fr;">
                    <div style="padding: 1rem; border-right: 1px solid rgba(255, 255, 255, 0.1);">
                        <span style="color: white;">ãƒ‡ãƒ¼ã‚¿å‡ºåŠ›ãƒ»æ¤œç´¢æ©Ÿèƒ½</span>
                    </div>
                    <div style="padding: 1rem; border-right: 1px solid rgba(255, 255, 255, 0.1); text-align: center;">
                        <i data-lucide="minus" style="width: 20px; height: 20px; color: white;"></i>
                    </div>
                    <div style="padding: 1rem; text-align: center;">
                        <i data-lucide="circle-check-big" style="width: 20px; height: 20px; color: white;"></i>
                    </div>
                </div>
            </div>
        </div>

        <!-- ãƒ•ãƒƒã‚¿ãƒ¼ãƒŠãƒ“ã‚²ãƒ¼ã‚·ãƒ§ãƒ³ -->
        <footer class="footer-navigation">
            <div class="nav-buttons">
                <a href="records.html" class="btn btn-secondary">
                    <i data-lucide="bar-chart-3" class="icon-sm"></i>
                    <span>è¨˜éŒ²ã‚’è¦‹ã‚‹</span>
                </a>
                <a href="index.html" class="btn btn-secondary">
                    <i data-lucide="home" class="icon-sm"></i>
                    <span>ãƒ›ãƒ¼ãƒ ã«æˆ»ã‚‹</span>
                </a>
                <a href="training.html" class="btn btn-primary">
                    <i data-lucide="refresh-cw"></i>
                    å†ãƒãƒ£ãƒ¬ãƒ³ã‚¸
                </a>
            </div>
        </footer>

    <!-- Results.js is loaded but with freemium limitations -->
    <script>
        // Mock data and basic functionality for freemium version
        const mockSessionsData = [
            { session: 1, baseNote: 'A', averageCentError: 18.5 },
            { session: 2, baseNote: 'F#', averageCentError: 24.2 },
            { session: 3, baseNote: 'D', averageCentError: 16.8 },
            { session: 4, baseNote: 'Bb', averageCentError: 32.1 },
            { session: 5, baseNote: 'G', averageCentError: 14.6 },
            { session: 6, baseNote: 'E', averageCentError: 28.7 },
            { session: 7, baseNote: 'C', averageCentError: 19.3 },
            { session: 8, baseNote: 'F', averageCentError: 22.5 },
            { session: 9, baseNote: 'D#', averageCentError: 35.8 },
            { session: 10, baseNote: 'B', averageCentError: 12.4 },
            { session: 11, baseNote: 'G#', averageCentError: 26.9 },
            { session: 12, baseNote: 'C#', averageCentError: 20.1 }
        ];
    </script>
    <script>
        // Initialize page
        document.addEventListener('DOMContentLoaded', function() {
            console.log('ğŸš€ [FREEMIUM] Initializing freemium basic results page');
            
            try {
                // ã‚»ãƒƒã‚·ãƒ§ãƒ³ã‚°ãƒªãƒƒãƒ‰ã®åˆæœŸåŒ–
                initializeSessionsGrid();
                console.log('âœ… Sessions grid initialized');
                
                // ã‚°ãƒ©ãƒ•ã®åˆæœŸåŒ–
                initializeCharts();
                console.log('âœ… Charts initialized');
                
                // ãƒ•ãƒªãƒ¼ãƒŸã‚¢ãƒ ç‰ˆã®åˆ¶é™ã‚’é©ç”¨
                applyFreemiumLimitations();
                console.log('âœ… Freemium limitations applied');
                
                // ã‚¢ã‚¤ã‚³ãƒ³ã®åˆæœŸåŒ–
                if (typeof lucide !== 'undefined') {
                    lucide.createIcons();
                    console.log('âœ… Lucide icons initialized');
                } else {
                    console.warn('âš ï¸ Lucide library not loaded');
                }
                
                console.log('ğŸ‰ [FREEMIUM] All features initialized successfully');
            } catch (error) {
                console.error('âŒ [FREEMIUM] Initialization error:', error);
            }
        });
        
        function initializeSessionsGrid() {
            const grid = document.getElementById('sessions-grid');
            if (!grid) return;
            
            grid.innerHTML = '';
            mockSessionsData.forEach((session, index) => {
                const sessionElement = document.createElement('div');
                const isLatest = session.session === 12;
                const isLocked = !isLatest; // æœ€æ–°ã‚»ãƒƒã‚·ãƒ§ãƒ³ä»¥å¤–ã¯ãƒ­ãƒƒã‚¯
                
                sessionElement.className = `aspect-square rounded-lg cursor-pointer transition-all flex flex-col items-center justify-center text-center relative ${
                    isLocked ? 'opacity-50' : 'hover:scale-105 active:scale-95'
                }`;
                
                // ã‚»ãƒƒã‚·ãƒ§ãƒ³ã®èƒŒæ™¯è‰²
                const bgColor = session.averageCentError < 20 ? 'rgba(34, 197, 94, 0.2)' :
                               session.averageCentError < 30 ? 'rgba(96, 165, 250, 0.2)' :
                               session.averageCentError < 40 ? 'rgba(251, 191, 36, 0.2)' :
                               'rgba(239, 68, 68, 0.2)';
                
                sessionElement.style.background = bgColor;
                sessionElement.style.border = '1px solid rgba(255, 255, 255, 0.2)';
                
                // ã‚»ãƒƒã‚·ãƒ§ãƒ³ç•ªå·
                const sessionNumber = document.createElement('div');
                sessionNumber.className = 'text-white font-bold text-sm';
                sessionNumber.textContent = `S${session.session}`;
                sessionElement.appendChild(sessionNumber);
                
                // èª¤å·®è¡¨ç¤º
                const errorDisplay = document.createElement('div');
                errorDisplay.className = 'text-xs text-white-70';
                errorDisplay.textContent = `Â±${session.averageCentError.toFixed(0)}Â¢`;
                sessionElement.appendChild(errorDisplay);
                
                // åˆ¶é™ã•ã‚ŒãŸã‚»ãƒƒã‚·ãƒ§ãƒ³ã«ã¯ãƒ­ãƒƒã‚¯ã‚¢ã‚¤ã‚³ãƒ³ã¨è–„ã„è¡¨ç¤º
                if (isLocked) {
                    const lockIcon = document.createElement('i');
                    lockIcon.setAttribute('data-lucide', 'lock');
                    lockIcon.className = 'absolute top-1 right-1';
                    lockIcon.style.width = '10px';
                    lockIcon.style.height = '10px';
                    lockIcon.style.color = 'rgba(255, 255, 255, 0.6)';
                    sessionElement.appendChild(lockIcon);
                    sessionElement.style.opacity = '0.6';
                    sessionElement.style.pointerEvents = 'none';
                }
                
                // æœ€æ–°ãƒãƒƒã‚¸
                if (isLatest) {
                    sessionElement.style.boxShadow = '0 0 0 2px rgba(255, 215, 0, 0.5)';
                    const latestBadge = document.createElement('div');
                    latestBadge.className = 'absolute -top-2 -right-2 bg-yellow-500 text-black text-xs px-1 rounded';
                    latestBadge.textContent = 'æœ€æ–°';
                    latestBadge.style.fontSize = '0.6rem';
                    sessionElement.appendChild(latestBadge);
                }
                
                // ã‚¯ãƒªãƒƒã‚¯ã‚¤ãƒ™ãƒ³ãƒˆãƒãƒ³ãƒ‰ãƒ©ãƒ¼
                sessionElement.addEventListener('click', () => {
                    if (isLocked) {
                        showPremiumAlert();
                    } else {
                        // æœ€æ–°ã‚»ãƒƒã‚·ãƒ§ãƒ³ï¼ˆS12ï¼‰ã®è©³ç´°åˆ†æã‚¨ãƒªã‚¢ã‚’è¡¨ç¤º
                        showSessionDetails(session);
                    }
                });
                
                grid.appendChild(sessionElement);
            });
            
            // ã‚¢ã‚¤ã‚³ãƒ³ã®å†åˆæœŸåŒ–
            if (typeof lucide !== 'undefined') {
                lucide.createIcons();
            }
        }
        
        function showPremiumAlert() {
            // ãƒ¢ãƒ¼ãƒ€ãƒ«é¢¨ã‚¢ãƒ©ãƒ¼ãƒˆã®ä½œæˆ
            const modal = document.createElement('div');
            modal.className = 'fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50';
            modal.style.zIndex = '9999';
            
            const modalContent = document.createElement('div');
            modalContent.className = 'bg-gray-800 rounded-xl p-6 max-w-md mx-4 border border-gray-600';
            modalContent.style.background = 'linear-gradient(135deg, rgba(59, 130, 246, 0.1), rgba(147, 51, 234, 0.1))';
            modalContent.style.backdropFilter = 'blur(10px)';
            modalContent.style.border = '1px solid rgba(255, 255, 255, 0.2)';
            
            modalContent.innerHTML = `
                <div class="text-center">
                    <div class="mx-auto w-16 h-16 bg-yellow-500 rounded-full flex items-center justify-center mb-4">
                        <i data-lucide="star" style="width: 16px; height: 16px; color: rgba(0,0,0,0.7);"></i>
                    </div>
                    <h3 class="text-lg font-medium text-white mb-3">è©³ç´°åˆ†æ</h3>
                    <p class="text-gray-300 mb-6">
                        éå»ã®ã‚»ãƒƒã‚·ãƒ§ãƒ³è©³ç´°ã‚’ç¢ºèªã™ã‚‹ã«ã¯<br>
                        ãƒ—ãƒ¬ãƒŸã‚¢ãƒ ç‰ˆã«ã‚¢ãƒƒãƒ—ã‚°ãƒ¬ãƒ¼ãƒ‰ã—ã¦ãã ã•ã„
                    </p>
                    <div class="space-y-3">
                        <button onclick="window.open('results-premium-analysis.html', '_blank')" 
                                class="w-full btn" 
                                style="background: linear-gradient(135deg, #ffd700, #ffb347); color: #333;">
                            ğŸ’ ãƒ—ãƒ¬ãƒŸã‚¢ãƒ ç‰ˆã‚’è¦‹ã‚‹
                        </button>
                        <button onclick="this.closest('.fixed').remove()" 
                                class="w-full btn btn-secondary">
                            é–‰ã˜ã‚‹
                        </button>
                    </div>
                </div>
            `;
            
            modal.appendChild(modalContent);
            document.body.appendChild(modal);
            
            // ã‚¢ã‚¤ã‚³ãƒ³ã®åˆæœŸåŒ–
            if (typeof lucide !== 'undefined') {
                lucide.createIcons();
            }
            
            // ãƒ¢ãƒ¼ãƒ€ãƒ«å¤–ã‚¯ãƒªãƒƒã‚¯ã§é–‰ã˜ã‚‹
            modal.addEventListener('click', (e) => {
                if (e.target === modal) {
                    modal.remove();
                }
            });
        }
        
        function showSessionDetails(session) {
            // æœ€æ–°ã‚»ãƒƒã‚·ãƒ§ãƒ³ï¼ˆS12ï¼‰ã®è©³ç´°åˆ†æã‚¨ãƒªã‚¢ã‚’è¡¨ç¤º
            const detailsSection = document.getElementById('detailed-analysis-section');
            if (detailsSection) {
                detailsSection.scrollIntoView({ behavior: 'smooth' });
                
                // è©³ç´°åˆ†æã‚¨ãƒªã‚¢ã®ãƒã‚¤ãƒ©ã‚¤ãƒˆåŠ¹æœ
                detailsSection.style.transition = 'all 0.3s ease';
                detailsSection.style.transform = 'scale(1.02)';
                detailsSection.style.boxShadow = '0 0 20px rgba(59, 130, 246, 0.3)';
                
                setTimeout(() => {
                    detailsSection.style.transform = 'scale(1)';
                    detailsSection.style.boxShadow = 'none';
                }, 600);
            }
        }
        
        function initializeCharts() {
            // èª¤å·®æ¨ç§»ã‚°ãƒ©ãƒ•
            const errorTrendCtx = document.getElementById('error-trend-chart');
            if (errorTrendCtx && typeof Chart !== 'undefined') {
                new Chart(errorTrendCtx, {
                    type: 'line',
                    data: {
                        labels: ['7æ—¥å‰', '6æ—¥å‰', '5æ—¥å‰', '4æ—¥å‰', '3æ—¥å‰', '2æ—¥å‰', 'ä»Šæ—¥'],
                        datasets: [{
                            label: 'å¹³å‡èª¤å·® (ã‚»ãƒ³ãƒˆ)',
                            data: [35, 32, 28, 30, 25, 22, 18],
                            borderColor: '#60a5fa',
                            backgroundColor: 'rgba(96, 165, 250, 0.1)',
                            tension: 0.4,
                            fill: true
                        }]
                    },
                    options: {
                        responsive: true,
                        maintainAspectRatio: false,
                        plugins: {
                            legend: {
                                display: false
                            },
                            tooltip: {
                                backgroundColor: 'rgba(0, 0, 0, 0.8)',
                                titleColor: '#fff',
                                bodyColor: '#fff',
                                borderColor: '#60a5fa',
                                borderWidth: 1
                            }
                        },
                        scales: {
                            y: {
                                beginAtZero: true,
                                grid: {
                                    color: 'rgba(255, 255, 255, 0.1)'
                                },
                                ticks: {
                                    color: 'rgba(255, 255, 255, 0.7)'
                                }
                            },
                            x: {
                                grid: {
                                    color: 'rgba(255, 255, 255, 0.1)'
                                },
                                ticks: {
                                    color: 'rgba(255, 255, 255, 0.7)'
                                }
                            }
                        }
                    }
                });
            }
            
            // è©•ä¾¡åˆ†å¸ƒã‚°ãƒ©ãƒ•
            const accuracyCtx = document.getElementById('accuracy-chart');
            if (accuracyCtx && typeof Chart !== 'undefined') {
                new Chart(accuracyCtx, {
                    type: 'doughnut',
                    data: {
                        labels: ['Perfect (Â±10Â¢)', 'Great (Â±20Â¢)', 'Good (Â±30Â¢)', 'Fair (Â±40Â¢)', 'Needs Work (>40Â¢)'],
                        datasets: [{
                            data: [2, 3, 4, 2, 1],
                            backgroundColor: [
                                'rgba(34, 197, 94, 0.8)',
                                'rgba(96, 165, 250, 0.8)',
                                'rgba(251, 191, 36, 0.8)',
                                'rgba(249, 115, 22, 0.8)',
                                'rgba(239, 68, 68, 0.8)'
                            ],
                            borderColor: [
                                'rgba(34, 197, 94, 1)',
                                'rgba(96, 165, 250, 1)',
                                'rgba(251, 191, 36, 1)',
                                'rgba(249, 115, 22, 1)',
                                'rgba(239, 68, 68, 1)'
                            ],
                            borderWidth: 2
                        }]
                    },
                    options: {
                        responsive: true,
                        maintainAspectRatio: false,
                        plugins: {
                            legend: {
                                position: 'right',
                                labels: {
                                    color: 'rgba(255, 255, 255, 0.7)',
                                    padding: 10,
                                    font: {
                                        size: 11
                                    }
                                }
                            },
                            tooltip: {
                                backgroundColor: 'rgba(0, 0, 0, 0.8)',
                                titleColor: '#fff',
                                bodyColor: '#fff'
                            }
                        }
                    }
                });
            }
        }
        
        function applyFreemiumLimitations() {
            // 7æ—¥é–“åˆ¶é™ã®è¦–è¦šçš„è¡¨ç¤ºã‚’å¼·åŒ–
            const chartContainers = document.querySelectorAll('[id*="chart"]');
            chartContainers.forEach(container => {
                if (container && !container.classList.contains('chart-container-limited')) {
                    container.classList.add('chart-container-limited');
                }
            });
            
            // ã‚»ãƒƒã‚·ãƒ§ãƒ³åˆ¶é™ã®è¡¨ç¤ºã‚’å¼·åŒ–
            const sessionItems = document.querySelectorAll('.session-item');
            sessionItems.forEach(item => {
                // ã™ã¹ã¦ã®ã‚»ãƒƒã‚·ãƒ§ãƒ³ã«ãƒ­ãƒƒã‚¯çŠ¶æ…‹ã‚’é©ç”¨ï¼ˆæœ€æ–°ä»¥å¤–ï¼‰
                if (!item.classList.contains('active')) {
                    item.classList.add('locked');
                }
            });
            
            // ãƒ—ãƒ¬ãƒŸã‚¢ãƒ åˆ¶é™ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã®å‹•çš„è¿½åŠ 
            addLimitationReminders();
        }
        
        function addLimitationReminders() {
            // ã‚°ãƒ¬ãƒ¼ãƒ‰è¡¨ç¤ºã‚¨ãƒªã‚¢ã«åˆ¶é™ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’è¿½åŠ 
            const gradeSection = document.querySelector('.grade-badge');
            if (gradeSection && gradeSection.parentElement) {
                const existingLimitation = gradeSection.parentElement.querySelector('.premium-limitation-note');
                if (!existingLimitation) {
                    const limitationNote = document.createElement('div');
                    limitationNote.className = 'premium-limitation-note text-xs text-yellow-300 text-center mt-2';
                    limitationNote.innerHTML = 'ğŸ’ è©³ç´°ã‚°ãƒ¬ãƒ¼ãƒ‰åˆ†æã¯ãƒ—ãƒ¬ãƒŸã‚¢ãƒ ç‰ˆã§';
                    gradeSection.parentElement.appendChild(limitationNote);
                }
            }
            
            // ã‚»ãƒƒã‚·ãƒ§ãƒ³æ•°åˆ¶é™ã®æ˜ç¤º
            const sessionsHeaders = document.querySelectorAll('h3');
            sessionsHeaders.forEach(header => {
                if (header.textContent && header.textContent.includes('ã‚»ãƒƒã‚·ãƒ§ãƒ³åˆ¥æˆç¸¾')) {
                    header.style.opacity = '0.8';
                }
            });
        }
    </script>
</body>
</html>