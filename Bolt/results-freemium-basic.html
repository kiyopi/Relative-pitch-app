<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <title>8va相対音感トレーニング - 総合評価</title>
    <link rel="stylesheet" href="styles/system.css?v=4">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;700&display=swap" rel="stylesheet">
    
    <!-- Lucide Icons -->
    <script src="https://unpkg.com/lucide@latest/dist/umd/lucide.js"></script>
    
    <!-- Chart.js -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.umd.js"></script>
    
    <style>
        /* 背景グラデーションアニメーション - iOS対応版 */
        body {
            position: relative;
            min-height: 100vh;
            min-height: -webkit-fill-available;
            -webkit-overflow-scrolling: touch;
            background: #0f172a; /* フォールバック */
        }
        
        /* 疑似要素で背景アニメーション */
        body::before {
            content: '';
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: linear-gradient(135deg, #0f172a 0%, #581c87 50%, #0f172a 100%);
            background-size: 400% 400%;
            animation: gradientShift 15s ease infinite;
            -webkit-animation: gradientShift 15s ease infinite;
            z-index: -1;
            transform: translateZ(0);
            -webkit-transform: translateZ(0);
            -webkit-backface-visibility: hidden;
            will-change: background-position;
        }
        
        @keyframes gradientShift {
            0% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
            100% { background-position: 0% 50%; }
        }
        
        @-webkit-keyframes gradientShift {
            0% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
            100% { background-position: 0% 50%; }
        }
        
        /* フローティングアニメーション */
        .page-header-icon {
            animation: float 6s ease-in-out infinite;
        }
        
        @keyframes float {
            0%, 100% { transform: translateY(0px); }
            50% { transform: translateY(-10px); }
        }
        
        /* SNSシェアセクション・shimmerアニメーション等は system.css に移動済み */
        
        .share-card h3 {
            font-size: 1.5rem;
            font-weight: bold;
            color: white;
            margin-bottom: 0.5rem;
        }
        
        .share-card p {
            color: white;
            margin-bottom: 1.5rem;
            font-size: 1rem;
        }
        
        /* rank-sectionスタイル（新横一列レイアウト） */
        .rank-section {
            text-align: center;
            margin-bottom: 40px;
            padding-bottom: 32px;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
        }
        
        .rank-mode {
            margin-bottom: 24px;
        }
        
        .rank-section .mode-title {
            font-size: 1.6rem !important;
            font-weight: 700;
            color: white;
            margin: 0;
        }
        
        .rank-content-row {
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            gap: 24px;
        }
        
        .rank-icon {
            flex-shrink: 0;
        }
        
        .rank-stats-row {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 32px;
            flex-wrap: wrap;
        }
        
        .rank-stat-item {
            text-align: center;
            min-width: 80px;
        }
        
        .stat-value-rank {
            font-size: 2rem;
            font-weight: 700;
            color: #ffffff;
            margin-bottom: 4px;
            transition: transform 0.2s ease;
            line-height: 1;
        }
        
        .stat-value-rank.grade-value {
            font-size: 2.0rem;
            color: #ffffff; /* グレードは白色 */
        }
        
        .stat-value-rank.avg-error {
            color: #fbbf24; /* 平均誤差もグレードと同じ黄色 */
        }
        
        .stat-label-rank {
            font-size: 1rem;
            color: rgba(255, 255, 255, 0.7);
            line-height: 1.1;
            margin: 0;
            white-space: nowrap;
        }
        
        .rank-circle {
            width: 100px;
            height: 100px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
        }
        
        .rank-circle-icon {
            width: 64px;
            height: 64px;
        }
        
        @media (max-width: 768px) {
            .rank-content-row {
                gap: 20px;
            }
            
            .rank-stats-row {
                gap: 20px;
            }
            
            .rank-circle {
                width: 90px;
                height: 90px;
            }
            
            .rank-circle-icon {
                width: 54px !important;
                height: 54px !important;
            }
            
            .stat-value-rank {
                font-size: 1.5rem;
            }
            
            .stat-value-rank.grade-value {
                font-size: 2rem;
            }
        }
        
        .share-buttons {
            display: flex;
            gap: 1.2rem;
            justify-content: center;
            flex-wrap: wrap;
        }
        
        .share-btn {
            width: 56px;
            height: 56px;
            border-radius: 50%;
            cursor: pointer;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            display: inline-flex;
            align-items: center;
            justify-content: center;
            color: white;
            text-decoration: none;
            position: relative;
            background: rgba(255, 255, 255, 0.2);
            border: 1px solid rgba(255, 255, 255, 0.3);
        }
        
        .share-btn:hover {
            background: rgba(255, 255, 255, 0.3);
            border-color: rgba(255, 255, 255, 0.4);
            transform: translateY(-3px) scale(1.1);
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.3), 0 0 30px rgba(255, 255, 255, 0.2);
        }
        
        .share-btn svg {
            width: 24px;
            height: 24px;
            z-index: 1;
        }
        
        .share-btn.twitter:hover {
            box-shadow: 0 8px 25px rgba(29, 161, 242, 0.4), 0 0 30px rgba(29, 161, 242, 0.3);
        }
        
        .share-btn.line:hover {
            box-shadow: 0 8px 25px rgba(0, 195, 0, 0.4), 0 0 30px rgba(0, 195, 0, 0.3);
        }
        
        .share-btn.facebook:hover {
            box-shadow: 0 8px 25px rgba(24, 119, 242, 0.4), 0 0 30px rgba(24, 119, 242, 0.3);
        }
        
        .share-btn.copy:hover {
            box-shadow: 0 8px 25px rgba(139, 92, 246, 0.4), 0 0 30px rgba(139, 92, 246, 0.3);
        }
        
        @media (max-width: 640px) {
            .share-btn {
                width: 48px;
                height: 48px;
            }
            
            .share-btn svg {
                width: 20px;
                height: 20px;
            }
        }
        
        /* フリーミアム制限表示 */
        .limitation-badge {
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid rgba(255, 255, 255, 0.1);
            color: rgba(255, 255, 255, 0.5);
            padding: 0.25rem 0.5rem;
            border-radius: 8px;
            font-size: 0.75rem;
            text-align: center;
            margin: 0.5rem 0;
        }
        
        /* premium-cta スタイルは system.css に移動済み */
        
        .feature-preview {
            background: rgba(255, 255, 255, 0.1);
            border: 2px dashed rgba(255, 255, 255, 0.3);
            border-radius: 12px;
            padding: 2rem;
            text-align: center;
            margin: 1rem 0;
            color: #cbd5e1;
        }
        
        .comparison-table {
            background: rgba(255, 255, 255, 0.1);
            border-radius: 12px;
            padding: 1.5rem;
            margin: 2rem 0;
        }
        
        .comparison-row {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 0.75rem 0;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
        }
        
        .comparison-row:last-child {
            border-bottom: none;
        }
        
        .check-icon {
            color: #10b981;
        }
        
        .x-icon {
            color: #ef4444;
        }
        
        /* feature-highlight スタイルは system.css に移動済み */
        
        .feature-item {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            margin-bottom: 0.5rem;
        }
        
        .feature-item.available {
            color: #cbd5e1;
        }
        
        .feature-item.locked {
            color: #94a3b8;
            opacity: 0.8;
        }
        
        /* Session Grid Styles */
        .session-grid-item {
            aspect-ratio: 1;
            border-radius: 0.5rem;
            cursor: pointer;
            transition: all 0.2s ease;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            text-align: center;
            position: relative;
            border: 1px solid rgba(255, 255, 255, 0.2);
        }
        
        .session-active {
            opacity: 1;
        }
        
        .session-active:hover {
            transform: scale(1.05);
        }
        
        .session-active:active {
            transform: scale(0.95);
        }
        
        
        .session-excellent {
            background: rgba(251, 191, 36, 0.2);  /* 黄色 - Trophy */
        }
        
        .session-good {
            background: rgba(34, 197, 94, 0.2);   /* 緑色 - Star */
        }
        
        .session-pass {
            background: rgba(96, 165, 250, 0.2);  /* 青色 - Thumbs-up */
        }
        
        .session-practice {
            background: rgba(239, 68, 68, 0.2);   /* 赤色 - Triangle-alert */
        }
        
        .session-number {
            color: white;
            font-weight: bold;
            font-size: 0.875rem;
        }
        
        .session-evaluation-icon {
            width: 24px;
            height: 24px;
            margin-top: 0.25rem;
        }
        
        .session-selected {
            filter: brightness(1.8);
        }
        
        /* ホバー時のエフェクト */
        .session-grid-item {
            transition: all 0.2s ease;
        }
        
        .session-active:not(.session-selected):hover {
            transform: scale(1.05);
            filter: brightness(1.15);
        }
        
    </style>
</head>
<body>
    <div class="min-h-screen p-6">
        <div class="container">
            <!-- Header -->
            <div class="text-center mb-8 relative">
                <div class="flex justify-center mb-6">
                    <div class="page-header-icon page-header-icon-purple">
                        <i data-lucide="file-chart-column-increasing" class="icon-2xl text-white" data-stroke-width="2"></i>
                    </div>
                </div>
                <h1 class="text-4xl font-bold text-white mb-4">総合評価</h1>
                <p class="text-green-200 text-xl mb-6">12セッション完了 - あなたの相対音感能力を分析</p>
            </div>
            <!-- SNSシェアセクション -->
            <div class="share-section" id="share-section">
            <div class="share-card">
                <!-- rank-section -->
                <section class="rank-section">
                    <!-- モード名 -->
                    <div class="rank-mode">
                        <h3 class="mode-title" id="main-mode-title">連続チャレンジモード</h3>
                    </div>
                    
                    <!-- グレードアイコンと統計情報を横一列に -->
                    <div class="rank-content-row">
                        <!-- グレードアイコン -->
                        <div class="rank-icon">
                            <div class="rank-circle" style="background: linear-gradient(135deg, #fbbf24, #d97706);">
                                <i data-lucide="crown" class="rank-circle-icon" style="color: white;"></i>
                            </div>
                        </div>
                        
                        <!-- 統計情報 -->
                        <div class="rank-stats-row">
                            <div class="rank-stat-item">
                                <div class="stat-value-rank grade-value" id="dynamic-grade">B</div>
                                <div class="stat-label-rank">総合グレード</div>
                            </div>
                            <div class="rank-stat-item">
                                <div class="stat-value-rank avg-error" style="color: #fbbf24;">±42¢</div>
                                <div class="stat-label-rank">平均誤差（セント）</div>
                            </div>
                            <div class="rank-stat-item">
                                <div class="stat-value-rank max-error">+58¢</div>
                                <div class="stat-label-rank">最大誤差（セント）</div>
                            </div>
                            <div class="rank-stat-item">
                                <div class="stat-value-rank session-count">12</div>
                                <div class="stat-label-rank">セッション数</div>
                            </div>
                        </div>
                        
                        <!-- ランク取得メッセージ -->
                        <div class="rank-achievement-message" style="margin-top: 0px; margin-bottom: 0px; text-align: center;">
                            <p id="share-message" style="color: rgba(255, 255, 255, 0.9); font-size: 1.1rem; margin: 0;">
                                B級ランク取得！グッドプレイヤー！
                            </p>
                        </div>
                    </div>
                </section>
                
                <h3 style="margin-top: 0px; margin-bottom: 24px;">みんなに成果をシェアしよう！</h3>
                <div class="share-buttons">
                    <a href="#" class="share-btn twitter" onclick="shareToTwitter(event)" title="Xでシェア">
                        <svg viewBox="0 0 24 24" fill="currentColor">
                            <path d="M18.244 2.25h3.308l-7.227 8.26 8.502 11.24H16.17l-5.214-6.817L4.99 21.75H1.68l7.73-8.835L1.254 2.25H8.08l4.713 6.231zm-1.161 17.52h1.833L7.084 4.126H5.117z"/>
                        </svg>
                    </a>
                    <a href="#" class="share-btn line" onclick="shareToLine(event)" title="LINEで送る">
                        <svg viewBox="0 0 24 24" fill="currentColor">
                            <path d="M19.365 9.863c.349 0 .63.285.63.631 0 .345-.281.63-.63.63H17.61v1.125h1.755c.349 0 .63.283.63.63 0 .344-.281.629-.63.629h-2.386c-.345 0-.627-.285-.627-.629V8.108c0-.345.282-.63.63-.63h2.386c.349 0 .63.285.63.63 0 .349-.281.63-.63.63H17.61v1.125h1.755zm-3.855 3.016c0 .27-.174.51-.432.596-.064.021-.133.031-.199.031-.211 0-.391-.09-.51-.25l-2.443-3.317v2.94c0 .344-.279.629-.631.629-.346 0-.626-.285-.626-.629V8.108c0-.27.173-.51.43-.595.06-.023.136-.033.194-.033.195 0 .375.104.495.254l2.462 3.33V8.108c0-.345.282-.63.63-.63.345 0 .63.285.63.63v4.771zm-5.741 0c0 .344-.282.629-.631.629-.345 0-.627-.285-.627-.629V8.108c0-.345.282-.63.627-.63.348 0 .631.285.631.63v4.771zm-2.466.629H4.917c-.345 0-.63-.285-.63-.629V8.108c0-.345.285-.63.63-.63.348 0 .63.285.63.63v4.141h1.756c.348 0 .629.283.629.63 0 .344-.282.629-.629.629M24 10.314C24 4.943 18.615.572 12 .572S0 4.943 0 10.314c0 4.811 4.27 8.842 10.035 9.608.391.082.923.258 1.058.59.12.301.079.766.038 1.08l-.164 1.02c-.045.301-.24 1.186 1.049.645 1.291-.539 6.916-4.078 9.436-6.975C23.176 14.393 24 12.458 24 10.314"/>
                        </svg>
                    </a>
                    <a href="#" class="share-btn facebook" onclick="shareToFacebook(event)" title="Facebookでシェア">
                        <svg viewBox="0 0 24 24" fill="currentColor">
                            <path d="M24 12.073c0-6.627-5.373-12-12-12s-12 5.373-12 12c0 5.99 4.388 10.954 10.125 11.854v-8.385H7.078v-3.47h3.047V9.43c0-3.007 1.792-4.669 4.533-4.669 1.312 0 2.686.235 2.686.235v2.953H15.83c-1.491 0-1.956.925-1.956 1.874v2.25h3.328l-.532 3.47h-2.796v8.385C19.612 23.027 24 18.062 24 12.073z"/>
                        </svg>
                    </a>
                    <button class="share-btn copy" onclick="copyShareText(event)" title="リンクをコピー">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                            <rect x="9" y="9" width="13" height="13" rx="2" ry="2"></rect>
                            <path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"></path>
                        </svg>
                    </button>
                </div>
                
            </div>
        </div>

        <!-- Performance Charts -->
        <div class="glass-card mb-8" style="max-width: 100vw; overflow-x: hidden;">
            <div class="block md:grid md:grid-cols-2 gap-4 md:gap-8">
                <!-- Error Trend Chart -->
                <div class="mb-8 md:mb-0">
                    <div class="flex justify-between items-center mb-4">
                        <h3 class="text-xl font-bold text-white">誤差推移</h3>
                    </div>
                    <div class="relative bg-white/5 rounded-lg p-0 md:p-4" id="error-trend-container" style="height: 280px;">
                        <canvas id="error-trend-chart"></canvas>
                    </div>
                    <div class="text-xs text-white-60 text-center mt-2" style="min-height: 80px; height: auto;">
                        過去7日間の平均誤差推移。改善傾向が確認できます。<br>
                        <span class="text-yellow-300">全期間データと詳細分析はプレミアム版で</span>
                    </div>
                </div>
                
                <!-- Accuracy Chart -->
                <div>
                    <div class="flex justify-between items-center mb-4">
                        <h3 class="text-xl font-bold text-white">評価分布</h3>
                        <div style="display: flex; align-items: center; gap: 0.25rem; font-size: 0.75rem; color: rgba(255,255,255,0.6); padding: 0.25rem 0.5rem; background: rgba(255,255,255,0.1); border-radius: 6px;">
                            <i data-lucide="lock" style="width: 12px; height: 12px;"></i>
                            <span>基本表示</span>
                        </div>
                    </div>
                    <div class="bg-white/5 rounded-lg" style="height: 200px;">
                        <canvas id="accuracy-chart" width="400" height="200"></canvas>
                    </div>
                    <div class="text-xs text-white-60 text-center mt-2">
                        12セッションの評価内訳<br>
                        <span class="text-yellow-300">詳細分析はプレミアム版で</span>
                    </div>
                </div>
            </div>
        </div>

        <div class="glass-card mb-8">
                <h3 class="text-2xl font-bold text-white mb-6">セッション別成績</h3>
                <p class="text-white-70 text-sm mb-4">
                    <span class="lg:hidden">セッションをタップして詳細分析を表示</span>
                    <span class="hidden lg:inline">セッションをクリックして詳細分析を表示</span>
                </p>
                <div class="grid grid-cols-12 gap-3" id="sessions-grid"><div class="aspect-square rounded-lg cursor-pointer transition-all hover-scale active:scale-95 flex flex-col items-center justify-center text-center relative scale-105" style="box-shadow: rgba(255, 255, 255, 0.6) 0px 0px 0px 2px, rgba(0, 0, 0, 0.1) 0px 4px 6px; position: relative;">
                    <div class="absolute inset-0 rounded-lg" style="
                        opacity: 1;
                        background: linear-gradient(135deg, rgba(59, 130, 246, 0.6), rgba(29, 78, 216, 0.8));
                        backdrop-filter: blur(8px);
                        -webkit-backdrop-filter: blur(8px);
                        -moz-backdrop-filter: blur(8px);
                        border: 1px solid rgba(255, 255, 255, 0.4);
                        border-radius: 12px;
                        will-change: transform, opacity;
                        -webkit-transform: translateZ(0);
                        transform: translateZ(0);
                        -webkit-backface-visibility: hidden;
                        backface-visibility: hidden;
                        -webkit-perspective: 1000px;
                        perspective: 1000px;
                    "></div>
                    <div class="relative z-10 flex flex-col items-center justify-center h-full" style="
                        opacity: 1;
                        will-change: transform;
                        -webkit-transform: translateZ(0);
                        transform: translateZ(0);
                        -webkit-backface-visibility: hidden;
                        backface-visibility: hidden;
                        pointer-events: none;
                    ">
                        <div class="text-blue-200 font-bold text-sm mb-1" style="
                            text-shadow: 0 1px 3px rgba(0,0,0,0.8);
                            filter: brightness(1.2);
                            -webkit-font-smoothing: antialiased;
                            -moz-osx-font-smoothing: grayscale;
                        ">1</div>
                        <div class="mb-1" style="
                            filter: drop-shadow(0 1px 3px rgba(0,0,0,0.8)) brightness(1.2);
                            -webkit-backface-visibility: hidden;
                            backface-visibility: hidden;
                        "><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" data-lucide="thumbs-up" class="lucide lucide-thumbs-up text-blue-200" style="width: 24px; height: 24px;"><path d="M7 10v12"></path><path d="M15 5.88 14 10h5.83a2 2 0 0 1 1.92 2.56l-2.33 8A2 2 0 0 1 17.5 22H4a2 2 0 0 1-2-2v-8a2 2 0 0 1 2-2h2.76a2 2 0 0 0 1.79-1.11L12 2a3.13 3.13 0 0 1 3 3.88Z"></path></svg></div>
                    </div>
                </div><div class="aspect-square rounded-lg cursor-pointer transition-all hover-scale active:scale-95 flex flex-col items-center justify-center text-center relative " style="box-shadow: rgba(0, 0, 0, 0.1) 0px 4px 6px; position: relative; transform: scale(1);">
                    <div class="absolute inset-0 rounded-lg" style="opacity: 0.7; background: linear-gradient(135deg, rgba(59, 130, 246, 0.45), rgba(29, 78, 216, 0.65)); -webkit-backdrop-filter: blur(8px); border: 1px solid rgba(255, 255, 255, 0.3); border-radius: 12px; will-change: transform, opacity; transform: translateZ(0px); backface-visibility: hidden; perspective: 1000px;"></div>
                    <div class="relative z-10 flex flex-col items-center justify-center h-full" style="
                        opacity: 1;
                        will-change: transform;
                        -webkit-transform: translateZ(0);
                        transform: translateZ(0);
                        -webkit-backface-visibility: hidden;
                        backface-visibility: hidden;
                        pointer-events: none;
                    ">
                        <div class="text-blue-200 font-bold text-sm mb-1" style="
                            text-shadow: 0 1px 3px rgba(0,0,0,0.8);
                            filter: brightness(1.2);
                            -webkit-font-smoothing: antialiased;
                            -moz-osx-font-smoothing: grayscale;
                        ">2</div>
                        <div class="mb-1" style="
                            filter: drop-shadow(0 1px 3px rgba(0,0,0,0.8)) brightness(1.2);
                            -webkit-backface-visibility: hidden;
                            backface-visibility: hidden;
                        "><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" data-lucide="thumbs-up" class="lucide lucide-thumbs-up text-blue-200" style="width: 24px; height: 24px;"><path d="M7 10v12"></path><path d="M15 5.88 14 10h5.83a2 2 0 0 1 1.92 2.56l-2.33 8A2 2 0 0 1 17.5 22H4a2 2 0 0 1-2-2v-8a2 2 0 0 1 2-2h2.76a2 2 0 0 0 1.79-1.11L12 2a3.13 3.13 0 0 1 3 3.88Z"></path></svg></div>
                    </div>
                </div><div class="aspect-square rounded-lg cursor-pointer transition-all hover-scale active:scale-95 flex flex-col items-center justify-center text-center relative " style="box-shadow: rgba(0, 0, 0, 0.1) 0px 4px 6px; position: relative;">
                    <div class="absolute inset-0 rounded-lg" style="
                        opacity: 0.7;
                        background: linear-gradient(135deg, rgba(74, 222, 128, 0.45), rgba(34, 197, 94, 0.65));
                        backdrop-filter: blur(8px);
                        -webkit-backdrop-filter: blur(8px);
                        -moz-backdrop-filter: blur(8px);
                        border: 1px solid rgba(255, 255, 255, 0.3);
                        border-radius: 12px;
                        will-change: transform, opacity;
                        -webkit-transform: translateZ(0);
                        transform: translateZ(0);
                        -webkit-backface-visibility: hidden;
                        backface-visibility: hidden;
                        -webkit-perspective: 1000px;
                        perspective: 1000px;
                    "></div>
                    <div class="relative z-10 flex flex-col items-center justify-center h-full" style="
                        opacity: 1;
                        will-change: transform;
                        -webkit-transform: translateZ(0);
                        transform: translateZ(0);
                        -webkit-backface-visibility: hidden;
                        backface-visibility: hidden;
                        pointer-events: none;
                    ">
                        <div class="text-green-200 font-bold text-sm mb-1" style="
                            text-shadow: 0 1px 3px rgba(0,0,0,0.8);
                            filter: brightness(1.2);
                            -webkit-font-smoothing: antialiased;
                            -moz-osx-font-smoothing: grayscale;
                        ">3</div>
                        <div class="mb-1" style="
                            filter: drop-shadow(0 1px 3px rgba(0,0,0,0.8)) brightness(1.2);
                            -webkit-backface-visibility: hidden;
                            backface-visibility: hidden;
                        "><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" data-lucide="star" class="lucide lucide-star text-green-200" style="width: 24px; height: 24px;"><path d="M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z"></path></svg></div>
                    </div>
                </div><div class="aspect-square rounded-lg cursor-pointer transition-all hover-scale active:scale-95 flex flex-col items-center justify-center text-center relative " style="box-shadow: rgba(0, 0, 0, 0.1) 0px 4px 6px; position: relative;">
                    <div class="absolute inset-0 rounded-lg" style="
                        opacity: 0.7;
                        background: linear-gradient(135deg, rgba(74, 222, 128, 0.45), rgba(34, 197, 94, 0.65));
                        backdrop-filter: blur(8px);
                        -webkit-backdrop-filter: blur(8px);
                        -moz-backdrop-filter: blur(8px);
                        border: 1px solid rgba(255, 255, 255, 0.3);
                        border-radius: 12px;
                        will-change: transform, opacity;
                        -webkit-transform: translateZ(0);
                        transform: translateZ(0);
                        -webkit-backface-visibility: hidden;
                        backface-visibility: hidden;
                        -webkit-perspective: 1000px;
                        perspective: 1000px;
                    "></div>
                    <div class="relative z-10 flex flex-col items-center justify-center h-full" style="
                        opacity: 1;
                        will-change: transform;
                        -webkit-transform: translateZ(0);
                        transform: translateZ(0);
                        -webkit-backface-visibility: hidden;
                        backface-visibility: hidden;
                        pointer-events: none;
                    ">
                        <div class="text-green-200 font-bold text-sm mb-1" style="
                            text-shadow: 0 1px 3px rgba(0,0,0,0.8);
                            filter: brightness(1.2);
                            -webkit-font-smoothing: antialiased;
                            -moz-osx-font-smoothing: grayscale;
                        ">4</div>
                        <div class="mb-1" style="
                            filter: drop-shadow(0 1px 3px rgba(0,0,0,0.8)) brightness(1.2);
                            -webkit-backface-visibility: hidden;
                            backface-visibility: hidden;
                        "><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" data-lucide="star" class="lucide lucide-star text-green-200" style="width: 24px; height: 24px;"><path d="M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z"></path></svg></div>
                    </div>
                </div><div class="aspect-square rounded-lg cursor-pointer transition-all hover-scale active:scale-95 flex flex-col items-center justify-center text-center relative " style="box-shadow: rgba(0, 0, 0, 0.1) 0px 4px 6px; position: relative; transform: scale(1);">
                    <div class="absolute inset-0 rounded-lg" style="opacity: 0.7; background: linear-gradient(135deg, rgba(239, 68, 68, 0.45), rgba(220, 38, 38, 0.65)); -webkit-backdrop-filter: blur(8px); border: 1px solid rgba(255, 255, 255, 0.3); border-radius: 12px; will-change: transform, opacity; transform: translateZ(0px); backface-visibility: hidden; perspective: 1000px;"></div>
                    <div class="relative z-10 flex flex-col items-center justify-center h-full" style="
                        opacity: 1;
                        will-change: transform;
                        -webkit-transform: translateZ(0);
                        transform: translateZ(0);
                        -webkit-backface-visibility: hidden;
                        backface-visibility: hidden;
                        pointer-events: none;
                    ">
                        <div class="text-red-200 font-bold text-sm mb-1" style="
                            text-shadow: 0 1px 3px rgba(0,0,0,0.8);
                            filter: brightness(1.2);
                            -webkit-font-smoothing: antialiased;
                            -moz-osx-font-smoothing: grayscale;
                        ">5</div>
                        <div class="mb-1" style="
                            filter: drop-shadow(0 1px 3px rgba(0,0,0,0.8)) brightness(1.2);
                            -webkit-backface-visibility: hidden;
                            backface-visibility: hidden;
                        "><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" data-lucide="triangle-alert" class="lucide lucide-triangle-alert text-red-200" style="width: 24px; height: 24px;"><path d="m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3"></path><path d="M12 9v4"></path><path d="M12 17h.01"></path></svg></div>
                    </div>
                </div><div class="aspect-square rounded-lg cursor-pointer transition-all hover-scale active:scale-95 flex flex-col items-center justify-center text-center relative " style="box-shadow: rgba(0, 0, 0, 0.1) 0px 4px 6px; position: relative;">
                    <div class="absolute inset-0 rounded-lg" style="
                        opacity: 0.7;
                        background: linear-gradient(135deg, rgba(59, 130, 246, 0.45), rgba(29, 78, 216, 0.65));
                        backdrop-filter: blur(8px);
                        -webkit-backdrop-filter: blur(8px);
                        -moz-backdrop-filter: blur(8px);
                        border: 1px solid rgba(255, 255, 255, 0.3);
                        border-radius: 12px;
                        will-change: transform, opacity;
                        -webkit-transform: translateZ(0);
                        transform: translateZ(0);
                        -webkit-backface-visibility: hidden;
                        backface-visibility: hidden;
                        -webkit-perspective: 1000px;
                        perspective: 1000px;
                    "></div>
                    <div class="relative z-10 flex flex-col items-center justify-center h-full" style="
                        opacity: 1;
                        will-change: transform;
                        -webkit-transform: translateZ(0);
                        transform: translateZ(0);
                        -webkit-backface-visibility: hidden;
                        backface-visibility: hidden;
                        pointer-events: none;
                    ">
                        <div class="text-blue-200 font-bold text-sm mb-1" style="
                            text-shadow: 0 1px 3px rgba(0,0,0,0.8);
                            filter: brightness(1.2);
                            -webkit-font-smoothing: antialiased;
                            -moz-osx-font-smoothing: grayscale;
                        ">6</div>
                        <div class="mb-1" style="
                            filter: drop-shadow(0 1px 3px rgba(0,0,0,0.8)) brightness(1.2);
                            -webkit-backface-visibility: hidden;
                            backface-visibility: hidden;
                        "><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" data-lucide="thumbs-up" class="lucide lucide-thumbs-up text-blue-200" style="width: 24px; height: 24px;"><path d="M7 10v12"></path><path d="M15 5.88 14 10h5.83a2 2 0 0 1 1.92 2.56l-2.33 8A2 2 0 0 1 17.5 22H4a2 2 0 0 1-2-2v-8a2 2 0 0 1 2-2h2.76a2 2 0 0 0 1.79-1.11L12 2a3.13 3.13 0 0 1 3 3.88Z"></path></svg></div>
                    </div>
                </div><div class="aspect-square rounded-lg cursor-pointer transition-all hover-scale active:scale-95 flex flex-col items-center justify-center text-center relative " style="box-shadow: rgba(0, 0, 0, 0.1) 0px 4px 6px; position: relative;">
                    <div class="absolute inset-0 rounded-lg" style="
                        opacity: 0.7;
                        background: linear-gradient(135deg, rgba(74, 222, 128, 0.45), rgba(34, 197, 94, 0.65));
                        backdrop-filter: blur(8px);
                        -webkit-backdrop-filter: blur(8px);
                        -moz-backdrop-filter: blur(8px);
                        border: 1px solid rgba(255, 255, 255, 0.3);
                        border-radius: 12px;
                        will-change: transform, opacity;
                        -webkit-transform: translateZ(0);
                        transform: translateZ(0);
                        -webkit-backface-visibility: hidden;
                        backface-visibility: hidden;
                        -webkit-perspective: 1000px;
                        perspective: 1000px;
                    "></div>
                    <div class="relative z-10 flex flex-col items-center justify-center h-full" style="
                        opacity: 1;
                        will-change: transform;
                        -webkit-transform: translateZ(0);
                        transform: translateZ(0);
                        -webkit-backface-visibility: hidden;
                        backface-visibility: hidden;
                        pointer-events: none;
                    ">
                        <div class="text-green-200 font-bold text-sm mb-1" style="
                            text-shadow: 0 1px 3px rgba(0,0,0,0.8);
                            filter: brightness(1.2);
                            -webkit-font-smoothing: antialiased;
                            -moz-osx-font-smoothing: grayscale;
                        ">7</div>
                        <div class="mb-1" style="
                            filter: drop-shadow(0 1px 3px rgba(0,0,0,0.8)) brightness(1.2);
                            -webkit-backface-visibility: hidden;
                            backface-visibility: hidden;
                        "><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" data-lucide="star" class="lucide lucide-star text-green-200" style="width: 24px; height: 24px;"><path d="M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a .53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z"></path></svg></div>
                    </div>
                </div><div class="aspect-square rounded-lg cursor-pointer transition-all hover-scale active:scale-95 flex flex-col items-center justify-center text-center relative " style="box-shadow: rgba(0, 0, 0, 0.1) 0px 4px 6px; position: relative;">
                    <div class="absolute inset-0 rounded-lg" style="
                        opacity: 0.7;
                        background: linear-gradient(135deg, rgba(59, 130, 246, 0.45), rgba(29, 78, 216, 0.65));
                        backdrop-filter: blur(8px);
                        -webkit-backdrop-filter: blur(8px);
                        -moz-backdrop-filter: blur(8px);
                        border: 1px solid rgba(255, 255, 255, 0.3);
                        border-radius: 12px;
                        will-change: transform, opacity;
                        -webkit-transform: translateZ(0);
                        transform: translateZ(0);
                        -webkit-backface-visibility: hidden;
                        backface-visibility: hidden;
                        -webkit-perspective: 1000px;
                        perspective: 1000px;
                    "></div>
                    <div class="relative z-10 flex flex-col items-center justify-center h-full" style="
                        opacity: 1;
                        will-change: transform;
                        -webkit-transform: translateZ(0);
                        transform: translateZ(0);
                        -webkit-backface-visibility: hidden;
                        backface-visibility: hidden;
                        pointer-events: none;
                    ">
                        <div class="text-blue-200 font-bold text-sm mb-1" style="
                            text-shadow: 0 1px 3px rgba(0,0,0,0.8);
                            filter: brightness(1.2);
                            -webkit-font-smoothing: antialiased;
                            -moz-osx-font-smoothing: grayscale;
                        ">8</div>
                        <div class="mb-1" style="
                            filter: drop-shadow(0 1px 3px rgba(0,0,0,0.8)) brightness(1.2);
                            -webkit-backface-visibility: hidden;
                            backface-visibility: hidden;
                        "><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" data-lucide="thumbs-up" class="lucide lucide-thumbs-up text-blue-200" style="width: 24px; height: 24px;"><path d="M7 10v12"></path><path d="M15 5.88 14 10h5.83a2 2 0 0 1 1.92 2.56l-2.33 8A2 2 0 0 1 17.5 22H4a2 2 0 0 1-2-2v-8a2 2 0 0 1 2-2h2.76a2 2 0 0 0 1.79-1.11L12 2a3.13 3.13 0 0 1 3 3.88Z"></path></svg></div>
                    </div>
                </div><div class="aspect-square rounded-lg cursor-pointer transition-all hover-scale active:scale-95 flex flex-col items-center justify-center text-center relative " style="box-shadow: rgba(0, 0, 0, 0.1) 0px 4px 6px; position: relative;">
                    <div class="absolute inset-0 rounded-lg" style="
                        opacity: 0.7;
                        background: linear-gradient(135deg, rgba(59, 130, 246, 0.45), rgba(29, 78, 216, 0.65));
                        backdrop-filter: blur(8px);
                        -webkit-backdrop-filter: blur(8px);
                        -moz-backdrop-filter: blur(8px);
                        border: 1px solid rgba(255, 255, 255, 0.3);
                        border-radius: 12px;
                        will-change: transform, opacity;
                        -webkit-transform: translateZ(0);
                        transform: translateZ(0);
                        -webkit-backface-visibility: hidden;
                        backface-visibility: hidden;
                        -webkit-perspective: 1000px;
                        perspective: 1000px;
                    "></div>
                    <div class="relative z-10 flex flex-col items-center justify-center h-full" style="
                        opacity: 1;
                        will-change: transform;
                        -webkit-transform: translateZ(0);
                        transform: translateZ(0);
                        -webkit-backface-visibility: hidden;
                        backface-visibility: hidden;
                        pointer-events: none;
                    ">
                        <div class="text-blue-200 font-bold text-sm mb-1" style="
                            text-shadow: 0 1px 3px rgba(0,0,0,0.8);
                            filter: brightness(1.2);
                            -webkit-font-smoothing: antialiased;
                            -moz-osx-font-smoothing: grayscale;
                        ">9</div>
                        <div class="mb-1" style="
                            filter: drop-shadow(0 1px 3px rgba(0,0,0,0.8)) brightness(1.2);
                            -webkit-backface-visibility: hidden;
                            backface-visibility: hidden;
                        "><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" data-lucide="thumbs-up" class="lucide lucide-thumbs-up text-blue-200" style="width: 24px; height: 24px;"><path d="M7 10v12"></path><path d="M15 5.88 14 10h5.83a2 2 0 0 1 1.92 2.56l-2.33 8A2 2 0 0 1 17.5 22H4a2 2 0 0 1-2-2v-8a2 2 0 0 1 2-2h2.76a2 2 0 0 0 1.79-1.11L12 2a3.13 3.13 0 0 1 3 3.88Z"></path></svg></div>
                    </div>
                </div><div class="aspect-square rounded-lg cursor-pointer transition-all hover-scale active:scale-95 flex flex-col items-center justify-center text-center relative " style="box-shadow: rgba(0, 0, 0, 0.1) 0px 4px 6px; position: relative;">
                    <div class="absolute inset-0 rounded-lg" style="
                        opacity: 0.7;
                        background: linear-gradient(135deg, rgba(239, 68, 68, 0.45), rgba(220, 38, 38, 0.65));
                        backdrop-filter: blur(8px);
                        -webkit-backdrop-filter: blur(8px);
                        -moz-backdrop-filter: blur(8px);
                        border: 1px solid rgba(255, 255, 255, 0.3);
                        border-radius: 12px;
                        will-change: transform, opacity;
                        -webkit-transform: translateZ(0);
                        transform: translateZ(0);
                        -webkit-backface-visibility: hidden;
                        backface-visibility: hidden;
                        -webkit-perspective: 1000px;
                        perspective: 1000px;
                    "></div>
                    <div class="relative z-10 flex flex-col items-center justify-center h-full" style="
                        opacity: 1;
                        will-change: transform;
                        -webkit-transform: translateZ(0);
                        transform: translateZ(0);
                        -webkit-backface-visibility: hidden;
                        backface-visibility: hidden;
                        pointer-events: none;
                    ">
                        <div class="text-red-200 font-bold text-sm mb-1" style="
                            text-shadow: 0 1px 3px rgba(0,0,0,0.8);
                            filter: brightness(1.2);
                            -webkit-font-smoothing: antialiased;
                            -moz-osx-font-smoothing: grayscale;
                        ">10</div>
                        <div class="mb-1" style="
                            filter: drop-shadow(0 1px 3px rgba(0,0,0,0.8)) brightness(1.2);
                            -webkit-backface-visibility: hidden;
                            backface-visibility: hidden;
                        "><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" data-lucide="triangle-alert" class="lucide lucide-triangle-alert text-red-200" style="width: 24px; height: 24px;"><path d="m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3"></path><path d="M12 9v4"></path><path d="M12 17h.01"></path></svg></div>
                    </div>
                </div><div class="aspect-square rounded-lg cursor-pointer transition-all hover-scale active:scale-95 flex flex-col items-center justify-center text-center relative " style="box-shadow: rgba(0, 0, 0, 0.1) 0px 4px 6px; position: relative;">
                    <div class="absolute inset-0 rounded-lg" style="
                        opacity: 0.7;
                        background: linear-gradient(135deg, rgba(74, 222, 128, 0.45), rgba(34, 197, 94, 0.65));
                        backdrop-filter: blur(8px);
                        -webkit-backdrop-filter: blur(8px);
                        -moz-backdrop-filter: blur(8px);
                        border: 1px solid rgba(255, 255, 255, 0.3);
                        border-radius: 12px;
                        will-change: transform, opacity;
                        -webkit-transform: translateZ(0);
                        transform: translateZ(0);
                        -webkit-backface-visibility: hidden;
                        backface-visibility: hidden;
                        -webkit-perspective: 1000px;
                        perspective: 1000px;
                    "></div>
                    <div class="relative z-10 flex flex-col items-center justify-center h-full" style="
                        opacity: 1;
                        will-change: transform;
                        -webkit-transform: translateZ(0);
                        transform: translateZ(0);
                        -webkit-backface-visibility: hidden;
                        backface-visibility: hidden;
                        pointer-events: none;
                    ">
                        <div class="text-green-200 font-bold text-sm mb-1" style="
                            text-shadow: 0 1px 3px rgba(0,0,0,0.8);
                            filter: brightness(1.2);
                            -webkit-font-smoothing: antialiased;
                            -moz-osx-font-smoothing: grayscale;
                        ">11</div>
                        <div class="mb-1" style="
                            filter: drop-shadow(0 1px 3px rgba(0,0,0,0.8)) brightness(1.2);
                            -webkit-backface-visibility: hidden;
                            backface-visibility: hidden;
                        "><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" data-lucide="star" class="lucide lucide-star text-green-200" style="width: 24px; height: 24px;"><path d="M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z"></path></svg></div>
                    </div>
                </div><div class="aspect-square rounded-lg cursor-pointer transition-all hover-scale active:scale-95 flex flex-col items-center justify-center text-center relative " style="box-shadow: rgba(0, 0, 0, 0.1) 0px 4px 6px; position: relative;">
                    <div class="absolute inset-0 rounded-lg" style="
                        opacity: 0.7;
                        background: linear-gradient(135deg, rgba(239, 68, 68, 0.45), rgba(220, 38, 38, 0.65));
                        backdrop-filter: blur(8px);
                        -webkit-backdrop-filter: blur(8px);
                        -moz-backdrop-filter: blur(8px);
                        border: 1px solid rgba(255, 255, 255, 0.3);
                        border-radius: 12px;
                        will-change: transform, opacity;
                        -webkit-transform: translateZ(0);
                        transform: translateZ(0);
                        -webkit-backface-visibility: hidden;
                        backface-visibility: hidden;
                        -webkit-perspective: 1000px;
                        perspective: 1000px;
                    "></div>
                    <div class="relative z-10 flex flex-col items-center justify-center h-full" style="
                        opacity: 1;
                        will-change: transform;
                        -webkit-transform: translateZ(0);
                        transform: translateZ(0);
                        -webkit-backface-visibility: hidden;
                        backface-visibility: hidden;
                        pointer-events: none;
                    ">
                        <div class="text-red-200 font-bold text-sm mb-1" style="
                            text-shadow: 0 1px 3px rgba(0,0,0,0.8);
                            filter: brightness(1.2);
                            -webkit-font-smoothing: antialiased;
                            -moz-osx-font-smoothing: grayscale;
                        ">12</div>
                        <div class="mb-1" style="
                            filter: drop-shadow(0 1px 3px rgba(0,0,0,0.8)) brightness(1.2);
                            -webkit-backface-visibility: hidden;
                            backface-visibility: hidden;
                        "><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" data-lucide="triangle-alert" class="lucide lucide-triangle-alert text-red-200" style="width: 24px; height: 24px;"><path d="m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3"></path><path d="M12 9v4"></path><path d="M12 17h.01"></path></svg></div>
                    </div>
                </div></div>
            </div>
        
        <!-- 詳細分析 -->
        <div class="glass-card mb-8" id="detailed-analysis-section">
                <div class="flex items-center justify-between mb-6">
                    <button id="prev-session-btn" class="glass-card-sm hover:bg-white/10 transition-colors cursor-pointer flex-shrink-0">
                        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="text-white">
                            <path d="m15 18-6-6 6-6"></path>
                        </svg>
                    </button>
                    <h3 class="text-xl font-bold text-white text-center flex-1 px-2">
                        <div>詳細分析</div>
                        <div class="text-lg mt-1">セッション<span id="selected-session">1</span></div>
                    </h3>
                    <button id="next-session-btn" class="glass-card-sm hover:bg-white/10 transition-colors cursor-pointer flex-shrink-0">
                        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="text-white">
                            <path d="m9 18 6-6-6-6"></path>
                        </svg>
                    </button>
                </div>
            <div class="mb-4 text-center" id="session-info">
                <div style="display: grid; grid-template-columns: 1fr 1fr 1fr; gap: 2rem; align-items: end; min-height: 80px;">
                    <div style="display: flex; flex-direction: column; justify-content: flex-end; text-align: center; height: 100%;">
                        <div class="text-2xl md:text-4xl font-bold text-white">C4</div>
                        <p class="text-xs md:text-base text-green-200">基音</p>
                    </div>
                    <div style="display: flex; flex-direction: column; justify-content: flex-end; align-items: center; text-align: center; height: 100%;">
                        <div class="mb-2"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" data-lucide="thumbs-up" class="lucide lucide-thumbs-up text-blue-300" style="width: 80px; height: 80px;"><path d="M7 10v12"></path><path d="M15 5.88 14 10h5.83a2 2 0 0 1 1.92 2.56l-2.33 8A2 2 0 0 1 17.5 22H4a2 2 0 0 1-2-2v-8a2 2 0 0 1 2-2h2.76a2 2 0 0 0 1.79-1.11L12 2a3.13 3.13 0 0 1 3 3.88Z"></path></svg></div>
                        <p class="text-base md:text-lg font-bold text-blue-300">Pass</p>
                    </div>
                    <div style="display: flex; flex-direction: column; justify-content: flex-end; text-align: center; height: 100%;">
                        <div class="text-2xl md:text-4xl font-bold text-white">+25.1</div>
                        <p class="text-xs md:text-base text-green-200">セッション平均誤差</p>
                    </div>
                </div>
            </div>
            <div class="space-y-2" id="note-results">
                <!-- 8音の詳細結果 -->
                <div class="glass-card-sm hover:bg-white/10 transition-colors">
                    <div class="flex items-center justify-between">
                        <div class="flex items-center gap-4">
                            <div>
                                <div class="text-lg font-bold text-white">ド</div>
                            </div>
                            <div>
                                <div class="text-base text-white-60 font-medium">目標 277Hz</div>
                                <div class="text-base text-white-60 font-medium">実音 280Hz</div>
                            </div>
                        </div>
                        <div class="flex items-center gap-3">
                            <div class="font-bold text-2xl text-red-300">+5¢</div>
                            <div class="flex items-center justify-center" style="min-width: 36px;">
                                <i data-lucide="trophy" class="text-yellow-300" style="width: 28px; height: 28px;"></i>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="glass-card-sm hover:bg-white/10 transition-colors">
                    <div class="flex items-center justify-between">
                        <div class="flex items-center gap-4">
                            <div>
                                <div class="text-lg font-bold text-white">レ</div>
                            </div>
                            <div>
                                <div class="text-base text-white-60 font-medium">目標 311Hz</div>
                                <div class="text-base text-white-60 font-medium">実音 308Hz</div>
                            </div>
                        </div>
                        <div class="flex items-center gap-3">
                            <div class="font-bold text-2xl text-blue-300">+15¢</div>
                            <div class="flex items-center justify-center" style="min-width: 36px;">
                                <i data-lucide="star" class="text-green-300" style="width: 28px; height: 28px;"></i>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="glass-card-sm hover:bg-white/10 transition-colors">
                    <div class="flex items-center justify-between">
                        <div class="flex items-center gap-4">
                            <div>
                                <div class="text-lg font-bold text-white">ミ</div>
                            </div>
                            <div>
                                <div class="text-base text-white-60 font-medium">目標 349Hz</div>
                                <div class="text-base text-white-60 font-medium">実音 354Hz</div>
                            </div>
                        </div>
                        <div class="flex items-center gap-3">
                            <div class="font-bold text-2xl text-red-300">+35¢</div>
                            <div class="flex items-center justify-center" style="min-width: 36px;">
                                <i data-lucide="triangle-alert" class="text-red-300" style="width: 28px; height: 28px;"></i>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="glass-card-sm hover:bg-white/10 transition-colors">
                    <div class="flex items-center justify-between">
                        <div class="flex items-center gap-4">
                            <div>
                                <div class="text-lg font-bold text-white">ファ</div>
                            </div>
                            <div>
                                <div class="text-base text-white-60 font-medium">目標 370Hz</div>
                                <div class="text-base text-white-60 font-medium">実音 366Hz</div>
                            </div>
                        </div>
                        <div class="flex items-center gap-3">
                            <div class="font-bold text-2xl text-blue-300">-8¢</div>
                            <div class="flex items-center justify-center" style="min-width: 36px;">
                                <i data-lucide="trophy" class="text-yellow-300" style="width: 28px; height: 28px;"></i>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="glass-card-sm hover:bg-white/10 transition-colors">
                    <div class="flex items-center justify-between">
                        <div class="flex items-center gap-4">
                            <div>
                                <div class="text-lg font-bold text-white">ソ</div>
                            </div>
                            <div>
                                <div class="text-base text-white-60 font-medium">目標 415Hz</div>
                                <div class="text-base text-white-60 font-medium">実音 420Hz</div>
                            </div>
                        </div>
                        <div class="flex items-center gap-3">
                            <div class="font-bold text-2xl text-red-300">+22¢</div>
                            <div class="flex items-center justify-center" style="min-width: 36px;">
                                <i data-lucide="star" class="text-green-300" style="width: 28px; height: 28px;"></i>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="glass-card-sm hover:bg-white/10 transition-colors">
                    <div class="flex items-center justify-between">
                        <div class="flex items-center gap-4">
                            <div>
                                <div class="text-lg font-bold text-white">ラ</div>
                            </div>
                            <div>
                                <div class="text-base text-white-60 font-medium">目標 466Hz</div>
                                <div class="text-base text-white-60 font-medium">実音 461Hz</div>
                            </div>
                        </div>
                        <div class="flex items-center gap-3">
                            <div class="font-bold text-2xl text-blue-300">+12¢</div>
                            <div class="flex items-center justify-center" style="min-width: 36px;">
                                <i data-lucide="trophy" class="text-yellow-300" style="width: 28px; height: 28px;"></i>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="glass-card-sm hover:bg-white/10 transition-colors">
                    <div class="flex items-center justify-between">
                        <div class="flex items-center gap-4">
                            <div>
                                <div class="text-lg font-bold text-white">シ</div>
                            </div>
                            <div>
                                <div class="text-base text-white-60 font-medium">目標 523Hz</div>
                                <div class="text-base text-white-60 font-medium">実音 529Hz</div>
                            </div>
                        </div>
                        <div class="flex items-center gap-3">
                            <div class="font-bold text-2xl text-red-300">+42¢</div>
                            <div class="flex items-center justify-center" style="min-width: 36px;">
                                <i data-lucide="triangle-alert" class="text-red-300" style="width: 28px; height: 28px;"></i>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="glass-card-sm hover:bg-white/10 transition-colors">
                    <div class="flex items-center justify-between">
                        <div class="flex items-center gap-4">
                            <div>
                                <div class="text-lg font-bold text-white">ド'</div>
                            </div>
                            <div>
                                <div class="text-base text-white-60 font-medium">目標 554Hz</div>
                                <div class="text-base text-white-60 font-medium">実音 560Hz</div>
                            </div>
                        </div>
                        <div class="flex items-center gap-3">
                            <div class="font-bold text-2xl text-red-300">+18¢</div>
                            <div class="flex items-center justify-center" style="min-width: 36px;">
                                <i data-lucide="star" class="text-green-300" style="width: 28px; height: 28px;"></i>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>



        <!-- 次のステップセクション -->
        <div class="glass-card mb-8">
            <div class="text-center mb-8">
                <h2 class="text-2xl font-bold text-white mb-3">
                    💡 次のステップ
                </h2>
                <p class="text-green-300 font-semibold text-lg">
                    B級達成おめでとうございます！
                </p>
                <p class="text-white-70 mt-2">
                    相対音感の基礎が身につきました。さらなる上達を目指しましょう！
                </p>
            </div>
            
            <div class="next-steps-grid grid gap-8" style="grid-template-columns: repeat(1, 1fr);">
                <style>
                    @media (min-width: 768px) {
                        .next-steps-grid {
                            grid-template-columns: repeat(3, minmax(0, 1fr)) !important;
                        }
                    }
                </style>
                <!-- 現在の成果 -->
                <div class="glass-card">
                    <h3 class="text-lg font-semibold text-white mb-4 flex items-center">
                        <i data-lucide="check-circle" class="w-5 h-5 text-green-300 mr-3"></i>
                        現在の成果
                    </h3>
                    <div class="space-y-2 text-left">
                        <div class="text-white-70">• 各基音での相対音感能力向上</div>
                        <div class="text-white-70">• 平均誤差±20.1セントを達成</div>
                        <div class="text-white-70">• 相対音感練習習慣の確立</div>
                    </div>
                </div>
                
                <!-- 次の目標 -->
                <div class="glass-card">
                    <h3 class="text-lg font-semibold text-white mb-4 flex items-center">
                        <i data-lucide="arrow-up-right" class="w-5 h-5 text-blue-300 mr-3"></i>
                        次の目標
                    </h3>
                    <div class="space-y-2 text-left">
                        <div class="text-white-70">• A級（±15¢以下）を目指す</div>
                        <div class="text-white-70">• 週3回・15分の集中練習継続</div>
                        <div class="text-white-70">• どんな基音でも安定した相対音感を目指す</div>
                    </div>
                </div>
                
                <!-- 効果的な練習スケジュール -->
                <div class="glass-card">
                    <h3 class="text-lg font-semibold text-white mb-4 flex items-center">
                        <i data-lucide="clock" class="w-5 h-5 text-yellow-300 mr-3"></i>
                        効果的な練習スケジュール
                    </h3>
                    <div class="space-y-2 text-left">
                        <div class="text-white-70">• 週3回、1回15分の継続練習</div>
                        <div class="text-white-70">• シャープ系基音での集中練習</div>
                        <div class="text-white-70">• 集中力の高い午前中がおすすめ</div>
                    </div>
                </div>
            </div>
            
        </div>

        <!-- プレミアム機能比較 -->
        <div class="glass-card mb-8">
            <div style="display: flex; align-items: center; justify-content: center; gap: 0.5rem; margin-bottom: 2rem;">
                <i data-lucide="scale" style="width: 24px; height: 24px; color: white;"></i>
                <h3 style="color: white; font-size: 1.25rem; font-weight: 600; margin: 0;">
                    無料版 vs プレミアム版
                </h3>
            </div>
            
            <!-- 機能比較テーブル -->
            <div style="background: rgba(255, 255, 255, 0.02); border-radius: 12px; overflow: hidden;">
                <!-- ヘッダー -->
                <div style="display: grid; grid-template-columns: 2fr 1fr 1fr; background: rgba(255, 255, 255, 0.05);">
                    <div style="padding: 1rem; border-right: 1px solid rgba(255, 255, 255, 0.1);">
                        <h4 style="color: white; font-weight: 600; margin: 0;">機能</h4>
                    </div>
                    <div style="padding: 1rem; border-right: 1px solid rgba(255, 255, 255, 0.1); text-align: center;">
                        <div style="display: flex; align-items: center; justify-content: center; gap: 0.5rem;">
                            <i data-lucide="user" style="width: 18px; height: 18px; color: white;"></i>
                            <h4 style="color: white; font-weight: 600; margin: 0;">無料版</h4>
                        </div>
                    </div>
                    <div style="padding: 1rem; text-align: center;">
                        <div style="display: flex; align-items: center; justify-content: center; gap: 0.5rem;">
                            <i data-lucide="crown" style="width: 18px; height: 18px; color: white;"></i>
                            <h4 style="color: white; font-weight: 600; margin: 0;">プレミアム版</h4>
                        </div>
                    </div>
                </div>
                
                <!-- 機能項目 -->
                <div style="display: grid; grid-template-columns: 2fr 1fr 1fr; border-bottom: 1px solid rgba(255, 255, 255, 0.05);">
                    <div style="padding: 1rem; border-right: 1px solid rgba(255, 255, 255, 0.1);">
                        <span style="color: white;">総合グレード・基本統計</span>
                    </div>
                    <div style="padding: 1rem; border-right: 1px solid rgba(255, 255, 255, 0.1); text-align: center;">
                        <i data-lucide="circle-check-big" style="width: 20px; height: 20px; color: white;"></i>
                    </div>
                    <div style="padding: 1rem; text-align: center;">
                        <i data-lucide="circle-check-big" style="width: 20px; height: 20px; color: white;"></i>
                    </div>
                </div>
                
                <div style="display: grid; grid-template-columns: 2fr 1fr 1fr; border-bottom: 1px solid rgba(255, 255, 255, 0.05);">
                    <div style="padding: 1rem; border-right: 1px solid rgba(255, 255, 255, 0.1);">
                        <span style="color: white;">誤差推移・評価分布グラフ</span>
                    </div>
                    <div style="padding: 1rem; border-right: 1px solid rgba(255, 255, 255, 0.1); text-align: center;">
                        <span style="color: white; font-size: 0.875rem;">基本表示</span>
                    </div>
                    <div style="padding: 1rem; text-align: center;">
                        <span style="color: white; font-size: 0.875rem;">全期間</span>
                    </div>
                </div>
                
                <div style="display: grid; grid-template-columns: 2fr 1fr 1fr; border-bottom: 1px solid rgba(255, 255, 255, 0.05);">
                    <div style="padding: 1rem; border-right: 1px solid rgba(255, 255, 255, 0.1);">
                        <span style="color: white;">セッション成績表示</span>
                    </div>
                    <div style="padding: 1rem; border-right: 1px solid rgba(255, 255, 255, 0.1); text-align: center;">
                        <span style="color: white; font-size: 0.875rem;">最新のみ</span>
                    </div>
                    <div style="padding: 1rem; text-align: center;">
                        <i data-lucide="circle-check-big" style="width: 20px; height: 20px; color: white;"></i>
                    </div>
                </div>
                
                <div style="display: grid; grid-template-columns: 2fr 1fr 1fr; border-bottom: 1px solid rgba(255, 255, 255, 0.05);">
                    <div style="padding: 1rem; border-right: 1px solid rgba(255, 255, 255, 0.1);">
                        <span style="color: white;">SNSシェア機能</span>
                    </div>
                    <div style="padding: 1rem; border-right: 1px solid rgba(255, 255, 255, 0.1); text-align: center;">
                        <span style="color: white; font-size: 0.875rem;">基本情報のみ</span>
                    </div>
                    <div style="padding: 1rem; text-align: center;">
                        <span style="color: white; font-size: 0.875rem;">詳細分析付き</span>
                    </div>
                </div>
                
                <div style="display: grid; grid-template-columns: 2fr 1fr 1fr; border-bottom: 1px solid rgba(255, 255, 255, 0.05);">
                    <div style="padding: 1rem; border-right: 1px solid rgba(255, 255, 255, 0.1);">
                        <span style="color: white;">12音別詳細分析</span>
                    </div>
                    <div style="padding: 1rem; border-right: 1px solid rgba(255, 255, 255, 0.1); text-align: center;">
                        <i data-lucide="minus" style="width: 20px; height: 20px; color: white;"></i>
                    </div>
                    <div style="padding: 1rem; text-align: center;">
                        <i data-lucide="circle-check-big" style="width: 20px; height: 20px; color: white;"></i>
                    </div>
                </div>
                
                <div style="display: grid; grid-template-columns: 2fr 1fr 1fr; border-bottom: 1px solid rgba(255, 255, 255, 0.05);">
                    <div style="padding: 1rem; border-right: 1px solid rgba(255, 255, 255, 0.1);">
                        <span style="color: white;">AI練習プラン・成長予測</span>
                    </div>
                    <div style="padding: 1rem; border-right: 1px solid rgba(255, 255, 255, 0.1); text-align: center;">
                        <i data-lucide="minus" style="width: 20px; height: 20px; color: white;"></i>
                    </div>
                    <div style="padding: 1rem; text-align: center;">
                        <i data-lucide="circle-check-big" style="width: 20px; height: 20px; color: white;"></i>
                    </div>
                </div>
                
                <div style="display: grid; grid-template-columns: 2fr 1fr 1fr; border-bottom: 1px solid rgba(255, 255, 255, 0.05);">
                    <div style="padding: 1rem; border-right: 1px solid rgba(255, 255, 255, 0.1);">
                        <span style="color: white;">トレーニング記録</span>
                    </div>
                    <div style="padding: 1rem; border-right: 1px solid rgba(255, 255, 255, 0.1); text-align: center;">
                        <span style="color: white; font-size: 0.875rem;">基本記録</span>
                    </div>
                    <div style="padding: 1rem; text-align: center;">
                        <span style="color: white; font-size: 0.875rem;">全期間</span>
                    </div>
                </div>
                
                <div style="display: grid; grid-template-columns: 2fr 1fr 1fr;">
                    <div style="padding: 1rem; border-right: 1px solid rgba(255, 255, 255, 0.1);">
                        <span style="color: white;">データ出力・検索機能</span>
                    </div>
                    <div style="padding: 1rem; border-right: 1px solid rgba(255, 255, 255, 0.1); text-align: center;">
                        <i data-lucide="minus" style="width: 20px; height: 20px; color: white;"></i>
                    </div>
                    <div style="padding: 1rem; text-align: center;">
                        <i data-lucide="circle-check-big" style="width: 20px; height: 20px; color: white;"></i>
                    </div>
                </div>
            </div>
        </div>

        <!-- フッターナビゲーション -->
        <footer class="footer-navigation">
            <div class="nav-buttons">
                <a href="records.html" class="btn btn-secondary">
                    <i data-lucide="bar-chart-3" class="icon-sm"></i>
                    <span>記録を見る</span>
                </a>
                <a href="index.html" class="btn btn-secondary">
                    <i data-lucide="home" class="icon-sm"></i>
                    <span>ホームに戻る</span>
                </a>
                <a href="training.html" class="btn btn-primary">
                    <i data-lucide="refresh-cw"></i>
                    再チャレンジ
                </a>
            </div>
        </footer>

    <!-- Results.js is loaded but with freemium limitations -->
    <script>
        // Mock data and basic functionality for freemium version
        const mockSessionsData = [
            { session: 1, baseNote: 'A', averageCentError: 18.5 },
            { session: 2, baseNote: 'F#', averageCentError: 24.2 },
            { session: 3, baseNote: 'D', averageCentError: 45.8 },  // 赤色（Practice）
            { session: 4, baseNote: 'Bb', averageCentError: 32.1 },
            { session: 5, baseNote: 'G', averageCentError: 14.6 },
            { session: 6, baseNote: 'E', averageCentError: 41.7 },  // 赤色（Practice）
            { session: 7, baseNote: 'C', averageCentError: 19.3 },
            { session: 8, baseNote: 'F', averageCentError: 22.5 },
            { session: 9, baseNote: 'D#', averageCentError: 35.8 },
            { session: 10, baseNote: 'B', averageCentError: 12.4 },
            { session: 11, baseNote: 'G#', averageCentError: 26.9 },
            { session: 12, baseNote: 'C#', averageCentError: 20.1 }
        ];
        
        // 12セッション分の詳細データ（各セッションで8音）
        const sessionDetailedData = {
            1: { // A (440Hz)
                baseHz: 440,
                notes: [
                    { name: 'ド', targetHz: 523, actualHz: 530, error: 23 },
                    { name: 'レ', targetHz: 587, actualHz: 592, error: 15 },
                    { name: 'ミ', targetHz: 659, actualHz: 665, error: 16 },
                    { name: 'ファ', targetHz: 698, actualHz: 705, error: 17 },
                    { name: 'ソ', targetHz: 784, actualHz: 795, error: 24 },
                    { name: 'ラ', targetHz: 880, actualHz: 885, error: 10 },
                    { name: 'シ', targetHz: 988, actualHz: 975, error: -23 },
                    { name: 'ド\'', targetHz: 1047, actualHz: 1060, error: 21 }
                ]
            },
            2: { // F# (370Hz)
                baseHz: 370,
                notes: [
                    { name: 'ド', targetHz: 440, actualHz: 448, error: 31 },
                    { name: 'レ', targetHz: 494, actualHz: 500, error: 21 },
                    { name: 'ミ', targetHz: 554, actualHz: 565, error: 34 },
                    { name: 'ファ', targetHz: 587, actualHz: 595, error: 24 },
                    { name: 'ソ', targetHz: 659, actualHz: 670, error: 29 },
                    { name: 'ラ', targetHz: 740, actualHz: 745, error: 12 },
                    { name: 'シ', targetHz: 831, actualHz: 820, error: -23 },
                    { name: 'ド\'', targetHz: 880, actualHz: 890, error: 20 }
                ]
            },
            3: { // D (294Hz) - Practiceレベル
                baseHz: 294,
                notes: [
                    { name: 'ド', targetHz: 349, actualHz: 365, error: 62 },
                    { name: 'レ', targetHz: 392, actualHz: 410, error: 78 },
                    { name: 'ミ', targetHz: 440, actualHz: 455, error: 58 },
                    { name: 'ファ', targetHz: 466, actualHz: 480, error: 51 },
                    { name: 'ソ', targetHz: 523, actualHz: 510, error: -43 },
                    { name: 'ラ', targetHz: 587, actualHz: 570, error: -50 },
                    { name: 'シ', targetHz: 659, actualHz: 640, error: -50 },
                    { name: 'ド\'', targetHz: 698, actualHz: 715, error: 42 }
                ]
            },
            4: { // Bb (466Hz)
                baseHz: 466,
                notes: [
                    { name: 'ド', targetHz: 554, actualHz: 570, error: 49 },
                    { name: 'レ', targetHz: 622, actualHz: 635, error: 36 },
                    { name: 'ミ', targetHz: 698, actualHz: 710, error: 30 },
                    { name: 'ファ', targetHz: 740, actualHz: 755, error: 35 },
                    { name: 'ソ', targetHz: 831, actualHz: 845, error: 29 },
                    { name: 'ラ', targetHz: 932, actualHz: 920, error: -22 },
                    { name: 'シ', targetHz: 1047, actualHz: 1030, error: -28 },
                    { name: 'ド\'', targetHz: 1109, actualHz: 1125, error: 25 }
                ]
            },
            5: { // G (392Hz) - Excellentレベル
                baseHz: 392,
                notes: [
                    { name: 'ド', targetHz: 466, actualHz: 469, error: 11 },
                    { name: 'レ', targetHz: 523, actualHz: 527, error: 13 },
                    { name: 'ミ', targetHz: 587, actualHz: 592, error: 15 },
                    { name: 'ファ', targetHz: 622, actualHz: 628, error: 17 },
                    { name: 'ソ', targetHz: 698, actualHz: 703, error: 12 },
                    { name: 'ラ', targetHz: 784, actualHz: 789, error: 11 },
                    { name: 'シ', targetHz: 880, actualHz: 875, error: -10 },
                    { name: 'ド\'', targetHz: 932, actualHz: 940, error: 15 }
                ]
            },
            6: { // E (330Hz) - Practiceレベル
                baseHz: 330,
                notes: [
                    { name: 'ド', targetHz: 392, actualHz: 408, error: 65 },
                    { name: 'レ', targetHz: 440, actualHz: 455, error: 58 },
                    { name: 'ミ', targetHz: 494, actualHz: 475, error: -67 },
                    { name: 'ファ', targetHz: 523, actualHz: 540, error: 56 },
                    { name: 'ソ', targetHz: 587, actualHz: 570, error: -50 },
                    { name: 'ラ', targetHz: 659, actualHz: 640, error: -50 },
                    { name: 'シ', targetHz: 740, actualHz: 720, error: -47 },
                    { name: 'ド\'', targetHz: 784, actualHz: 800, error: 35 }
                ]
            },
            7: { // C (262Hz)
                baseHz: 262,
                notes: [
                    { name: 'ド', targetHz: 262, actualHz: 267, error: 33 },
                    { name: 'レ', targetHz: 294, actualHz: 298, error: 24 },
                    { name: 'ミ', targetHz: 330, actualHz: 335, error: 26 },
                    { name: 'ファ', targetHz: 349, actualHz: 354, error: 25 },
                    { name: 'ソ', targetHz: 392, actualHz: 397, error: 22 },
                    { name: 'ラ', targetHz: 440, actualHz: 435, error: -20 },
                    { name: 'シ', targetHz: 494, actualHz: 489, error: -18 },
                    { name: 'ド\'', targetHz: 523, actualHz: 530, error: 23 }
                ]
            },
            8: { // F (349Hz)
                baseHz: 349,
                notes: [
                    { name: 'ド', targetHz: 415, actualHz: 422, error: 29 },
                    { name: 'レ', targetHz: 466, actualHz: 472, error: 22 },
                    { name: 'ミ', targetHz: 523, actualHz: 530, error: 23 },
                    { name: 'ファ', targetHz: 554, actualHz: 560, error: 19 },
                    { name: 'ソ', targetHz: 622, actualHz: 630, error: 22 },
                    { name: 'ラ', targetHz: 698, actualHz: 705, error: 17 },
                    { name: 'シ', targetHz: 784, actualHz: 775, error: -20 },
                    { name: 'ド\'', targetHz: 831, actualHz: 840, error: 19 }
                ]
            },
            9: { // D# (311Hz)
                baseHz: 311,
                notes: [
                    { name: 'ド', targetHz: 370, actualHz: 382, error: 55 },
                    { name: 'レ', targetHz: 415, actualHz: 428, error: 53 },
                    { name: 'ミ', targetHz: 466, actualHz: 478, error: 44 },
                    { name: 'ファ', targetHz: 494, actualHz: 505, error: 38 },
                    { name: 'ソ', targetHz: 554, actualHz: 565, error: 34 },
                    { name: 'ラ', targetHz: 622, actualHz: 610, error: -33 },
                    { name: 'シ', targetHz: 698, actualHz: 685, error: -32 },
                    { name: 'ド\'', targetHz: 740, actualHz: 755, error: 35 }
                ]
            },
            10: { // B (494Hz) - Excellentレベル
                baseHz: 494,
                notes: [
                    { name: 'ド', targetHz: 587, actualHz: 590, error: 9 },
                    { name: 'レ', targetHz: 659, actualHz: 664, error: 13 },
                    { name: 'ミ', targetHz: 740, actualHz: 745, error: 12 },
                    { name: 'ファ', targetHz: 784, actualHz: 790, error: 13 },
                    { name: 'ソ', targetHz: 880, actualHz: 885, error: 10 },
                    { name: 'ラ', targetHz: 988, actualHz: 995, error: 12 },
                    { name: 'シ', targetHz: 1109, actualHz: 1100, error: -14 },
                    { name: 'ド\'', targetHz: 1175, actualHz: 1185, error: 15 }
                ]
            },
            11: { // G# (415Hz)
                baseHz: 415,
                notes: [
                    { name: 'ド', targetHz: 494, actualHz: 503, error: 31 },
                    { name: 'レ', targetHz: 554, actualHz: 563, error: 28 },
                    { name: 'ミ', targetHz: 622, actualHz: 632, error: 28 },
                    { name: 'ファ', targetHz: 659, actualHz: 668, error: 24 },
                    { name: 'ソ', targetHz: 740, actualHz: 750, error: 23 },
                    { name: 'ラ', targetHz: 831, actualHz: 820, error: -23 },
                    { name: 'シ', targetHz: 932, actualHz: 920, error: -22 },
                    { name: 'ド\'', targetHz: 988, actualHz: 1000, error: 21 }
                ]
            },
            12: { // C# (277Hz)
                baseHz: 277,
                notes: [
                    { name: 'ド', targetHz: 330, actualHz: 335, error: 26 },
                    { name: 'レ', targetHz: 370, actualHz: 375, error: 23 },
                    { name: 'ミ', targetHz: 415, actualHz: 420, error: 21 },
                    { name: 'ファ', targetHz: 440, actualHz: 446, error: 24 },
                    { name: 'ソ', targetHz: 494, actualHz: 500, error: 21 },
                    { name: 'ラ', targetHz: 554, actualHz: 548, error: -19 },
                    { name: 'シ', targetHz: 622, actualHz: 615, error: -19 },
                    { name: 'ド\'', targetHz: 659, actualHz: 665, error: 16 }
                ]
            }
        };
    </script>
    <script>
        // 左右矢印ボタンの機能
        function initializeNavigationButtons() {
            const prevBtn = document.getElementById('prev-session-btn');
            const nextBtn = document.getElementById('next-session-btn');
            
            if (prevBtn) {
                prevBtn.addEventListener('click', () => {
                    if (currentSessionNumber > 1) {
                        const prevSession = mockSessionsData.find(s => s.session === currentSessionNumber - 1);
                        if (prevSession) {
                            showSessionDetails(prevSession);
                        }
                    }
                });
            }
            
            if (nextBtn) {
                nextBtn.addEventListener('click', () => {
                    if (currentSessionNumber < 12) {
                        const nextSession = mockSessionsData.find(s => s.session === currentSessionNumber + 1);
                        if (nextSession) {
                            showSessionDetails(nextSession);
                        }
                    }
                });
            }
        }
    </script>
    <script>
        // Initialize page
        document.addEventListener('DOMContentLoaded', function() {
            console.log('🚀 [FREEMIUM] Initializing freemium basic results page');
            
            try {
                // セッショングリッドの初期化
                initializeSessionsGrid();
                console.log('✅ Sessions grid initialized');
                
                // グラフの初期化
                initializeCharts();
                console.log('✅ Charts initialized');
                
                // フリーミアム版の制限を適用
                applyFreemiumLimitations();
                console.log('✅ Freemium limitations applied');
                
                // ナビゲーションボタンの初期化
                initializeNavigationButtons();
                console.log('✅ Navigation buttons initialized');
                
                // 初期表示（セッション1）
                const firstSession = mockSessionsData.find(s => s.session === 1);
                if (firstSession) {
                    showSessionDetails(firstSession);
                }
                
                // アイコンの初期化
                if (typeof lucide !== 'undefined') {
                    lucide.createIcons();
                    console.log('✅ Lucide icons initialized');
                } else {
                    console.warn('⚠️ Lucide library not loaded');
                }
                
                console.log('🎉 [FREEMIUM] All features initialized successfully');
            } catch (error) {
                console.error('❌ [FREEMIUM] Initialization error:', error);
            }
        });
        
        function initializeSessionsGrid() {
            const grid = document.getElementById('sessions-grid');
            if (!grid) return;
            
            grid.innerHTML = '';
            mockSessionsData.forEach((session, index) => {
                const sessionElement = document.createElement('div');
                // 基本クラス構造（全てアクティブ）
                sessionElement.className = `session-grid-item ${
                    session.averageCentError < 20 ? 'session-excellent' :
                    session.averageCentError < 30 ? 'session-good' :
                    session.averageCentError < 40 ? 'session-pass' :
                    'session-practice'
                } session-active`;
                
                // セッション番号
                const sessionNumber = document.createElement('div');
                sessionNumber.className = 'session-number';
                sessionNumber.textContent = `S${session.session}`;
                sessionElement.appendChild(sessionNumber);
                
                // 音感精度評価アイコン
                const evaluationIcon = document.createElement('i');
                if (session.averageCentError < 20) {
                    evaluationIcon.setAttribute('data-lucide', 'trophy');
                    evaluationIcon.className = 'session-evaluation-icon text-yellow-300';
                } else if (session.averageCentError < 30) {
                    evaluationIcon.setAttribute('data-lucide', 'star');
                    evaluationIcon.className = 'session-evaluation-icon text-green-300';
                } else if (session.averageCentError < 40) {
                    evaluationIcon.setAttribute('data-lucide', 'thumbs-up');
                    evaluationIcon.className = 'session-evaluation-icon text-blue-300';
                } else {
                    evaluationIcon.setAttribute('data-lucide', 'triangle-alert');
                    evaluationIcon.className = 'session-evaluation-icon text-red-300';
                }
                sessionElement.appendChild(evaluationIcon);
                
                
                
                // クリックイベントハンドラー（全てのセッションで詳細表示）
                sessionElement.addEventListener('click', () => {
                    showSessionDetails(session);
                });
                
                grid.appendChild(sessionElement);
            });
            
            // アイコンの再初期化
            if (typeof lucide !== 'undefined') {
                lucide.createIcons();
            }
        }
        
        function showPremiumAlert() {
            // モーダル風アラートの作成
            const modal = document.createElement('div');
            modal.className = 'fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50';
            modal.style.zIndex = '9999';
            
            const modalContent = document.createElement('div');
            modalContent.className = 'bg-gray-800 rounded-xl p-6 max-w-md mx-4 border border-gray-600';
            modalContent.style.background = 'linear-gradient(135deg, rgba(59, 130, 246, 0.1), rgba(147, 51, 234, 0.1))';
            modalContent.style.backdropFilter = 'blur(10px)';
            modalContent.style.border = '1px solid rgba(255, 255, 255, 0.2)';
            
            modalContent.innerHTML = `
                <div class="text-center">
                    <div class="mx-auto w-16 h-16 bg-yellow-500 rounded-full flex items-center justify-center mb-4">
                        <i data-lucide="star" style="width: 16px; height: 16px; color: rgba(0,0,0,0.7);"></i>
                    </div>
                    <h3 class="text-lg font-medium text-white mb-3">詳細分析</h3>
                    <p class="text-gray-300 mb-6">
                        過去のセッション詳細を確認するには<br>
                        プレミアム版にアップグレードしてください
                    </p>
                    <div class="space-y-3">
                        <button onclick="window.open('results-premium-analysis.html', '_blank')" 
                                class="w-full btn" 
                                style="background: linear-gradient(135deg, #ffd700, #ffb347); color: #333;">
                            💎 プレミアム版を見る
                        </button>
                        <button onclick="this.closest('.fixed').remove()" 
                                class="w-full btn btn-secondary">
                            閉じる
                        </button>
                    </div>
                </div>
            `;
            
            modal.appendChild(modalContent);
            document.body.appendChild(modal);
            
            // アイコンの初期化
            if (typeof lucide !== 'undefined') {
                lucide.createIcons();
            }
            
            // モーダル外クリックで閉じる
            modal.addEventListener('click', (e) => {
                if (e.target === modal) {
                    modal.remove();
                }
            });
        }
        
        // 現在選択中のセッション番号
        let currentSessionNumber = 1;
        
        function showSessionDetails(session) {
            // 選択されたセッションの詳細を表示（スクロールなし）
            currentSessionNumber = session.session;
            
            // セッション番号を更新
            const selectedSessionElement = document.getElementById('selected-session');
            if (selectedSessionElement) {
                selectedSessionElement.textContent = session.session;
            }
            
            // セッション情報を更新
            updateSessionInfo(session);
            
            // 8音の詳細を更新
            updateNoteResults(session);
            
            // セッションボタンの選択状態を更新
            updateSessionButtonHighlight(session.session);
        }
        
        function updateSessionButtonHighlight(sessionNumber) {
            // 全てのセッションボタンのハイライトをクリア
            const allButtons = document.querySelectorAll('.session-grid-item');
            allButtons.forEach((btn, index) => {
                if (index + 1 === sessionNumber) {
                    btn.classList.add('session-selected');
                } else {
                    btn.classList.remove('session-selected');
                }
            });
        }
        
        function updateSessionInfo(session) {
            const sessionInfo = document.getElementById('session-info');
            if (!sessionInfo) return;
            
            // 評価アイコンを決定
            let iconName, iconColor, evalText;
            if (session.averageCentError < 20) {
                iconName = 'trophy';
                iconColor = 'text-yellow-300';
                evalText = 'Excellent';
            } else if (session.averageCentError < 30) {
                iconName = 'star';
                iconColor = 'text-green-300';
                evalText = 'Good';
            } else if (session.averageCentError < 40) {
                iconName = 'thumbs-up';
                iconColor = 'text-blue-300';
                evalText = 'Pass';
            } else {
                iconName = 'triangle-alert';
                iconColor = 'text-red-300';
                evalText = 'Practice';
            }
            
            sessionInfo.innerHTML = `
                <div style="display: grid; grid-template-columns: 1fr 1fr 1fr; gap: 2rem; align-items: end; min-height: 80px;">
                    <div style="display: flex; flex-direction: column; justify-content: flex-end; text-align: center; height: 100%;">
                        <div class="text-2xl md:text-4xl font-bold text-white">${session.baseNote}</div>
                        <p class="text-xs md:text-base text-green-200">基音</p>
                    </div>
                    <div style="display: flex; flex-direction: column; justify-content: flex-end; align-items: center; text-align: center; height: 100%;">
                        <div class="mb-2">
                            <i data-lucide="${iconName}" class="${iconColor}" style="width: 80px; height: 80px;"></i>
                        </div>
                        <p class="text-base md:text-lg font-bold ${iconColor}">${evalText}</p>
                    </div>
                    <div style="display: flex; flex-direction: column; justify-content: flex-end; text-align: center; height: 100%;">
                        <div class="text-2xl md:text-4xl font-bold text-white">${session.averageCentError > 0 ? '+' : ''}${session.averageCentError.toFixed(1)}</div>
                        <p class="text-xs md:text-base text-green-200">セッション平均誤差</p>
                    </div>
                </div>
            `;
            
            // Lucideアイコンを再初期化
            if (typeof lucide !== 'undefined') {
                lucide.createIcons();
            }
        }
        
        function updateNoteResults(session) {
            const noteResults = document.getElementById('note-results');
            if (!noteResults) return;
            
            // セッション番号に対応する詳細データを取得
            const sessionDetails = sessionDetailedData[session.session];
            if (!sessionDetails) return;
            
            const notes = sessionDetails.notes;
            
            noteResults.innerHTML = '';
            notes.forEach(note => {
                // 評価アイコンを決定
                let iconName, iconColor;
                const absError = Math.abs(note.error);
                if (absError <= 15) {
                    iconName = 'trophy';
                    iconColor = 'text-yellow-300';
                } else if (absError <= 25) {
                    iconName = 'star';
                    iconColor = 'text-green-300';
                } else if (absError <= 40) {
                    iconName = 'thumbs-up';
                    iconColor = 'text-blue-300';
                } else {
                    iconName = 'triangle-alert';
                    iconColor = 'text-red-300';
                }
                
                const errorColor = note.error > 0 ? 'text-red-300' : 'text-blue-300';
                
                noteResults.innerHTML += `
                    <div class="glass-card-sm hover:bg-white/10 transition-colors">
                        <div class="flex items-center justify-between">
                            <div class="flex items-center gap-4">
                                <div>
                                    <div class="text-lg font-bold text-white">${note.name}</div>
                                </div>
                                <div>
                                    <div class="text-base text-white-60 font-medium">目標 ${note.targetHz}Hz</div>
                                    <div class="text-base text-white-60 font-medium">実音 ${note.actualHz}Hz</div>
                                </div>
                            </div>
                            <div class="flex items-center gap-3">
                                <div class="font-bold text-2xl ${errorColor}">${note.error > 0 ? '+' : ''}${note.error}¢</div>
                                <div class="flex items-center justify-center" style="min-width: 36px;">
                                    <i data-lucide="${iconName}" class="${iconColor}" style="width: 28px; height: 28px;"></i>
                                </div>
                            </div>
                        </div>
                    </div>
                `;
            });
            
            // Lucideアイコンを再初期化
            if (typeof lucide !== 'undefined') {
                lucide.createIcons();
            }
        }
        
        function initializeCharts() {
            // 誤差推移グラフ
            const errorTrendCtx = document.getElementById('error-trend-chart');
            if (errorTrendCtx && typeof Chart !== 'undefined') {
                new Chart(errorTrendCtx, {
                    type: 'line',
                    data: {
                        labels: ['7日前', '6日前', '5日前', '4日前', '3日前', '2日前', '今日'],
                        datasets: [{
                            label: '平均誤差 (セント)',
                            data: [35, 32, 28, 30, 25, 22, 18],
                            borderColor: '#60a5fa',
                            backgroundColor: 'rgba(96, 165, 250, 0.1)',
                            tension: 0.4,
                            fill: true
                        }]
                    },
                    options: {
                        responsive: true,
                        maintainAspectRatio: false,
                        plugins: {
                            legend: {
                                display: false
                            },
                            tooltip: {
                                backgroundColor: 'rgba(0, 0, 0, 0.8)',
                                titleColor: '#fff',
                                bodyColor: '#fff',
                                borderColor: '#60a5fa',
                                borderWidth: 1
                            }
                        },
                        scales: {
                            y: {
                                beginAtZero: true,
                                grid: {
                                    color: 'rgba(255, 255, 255, 0.1)'
                                },
                                ticks: {
                                    color: 'rgba(255, 255, 255, 0.7)'
                                }
                            },
                            x: {
                                grid: {
                                    color: 'rgba(255, 255, 255, 0.1)'
                                },
                                ticks: {
                                    color: 'rgba(255, 255, 255, 0.7)'
                                }
                            }
                        }
                    }
                });
            }
            
            // 評価分布グラフ
            const accuracyCtx = document.getElementById('accuracy-chart');
            if (accuracyCtx && typeof Chart !== 'undefined') {
                new Chart(accuracyCtx, {
                    type: 'doughnut',
                    data: {
                        labels: ['Perfect (±10¢)', 'Great (±20¢)', 'Good (±30¢)', 'Fair (±40¢)', 'Needs Work (>40¢)'],
                        datasets: [{
                            data: [2, 3, 4, 2, 1],
                            backgroundColor: [
                                'rgba(34, 197, 94, 0.8)',
                                'rgba(96, 165, 250, 0.8)',
                                'rgba(251, 191, 36, 0.8)',
                                'rgba(249, 115, 22, 0.8)',
                                'rgba(239, 68, 68, 0.8)'
                            ],
                            borderColor: [
                                'rgba(34, 197, 94, 1)',
                                'rgba(96, 165, 250, 1)',
                                'rgba(251, 191, 36, 1)',
                                'rgba(249, 115, 22, 1)',
                                'rgba(239, 68, 68, 1)'
                            ],
                            borderWidth: 2
                        }]
                    },
                    options: {
                        responsive: true,
                        maintainAspectRatio: false,
                        plugins: {
                            legend: {
                                position: 'right',
                                labels: {
                                    color: 'rgba(255, 255, 255, 0.7)',
                                    padding: 10,
                                    font: {
                                        size: 11
                                    }
                                }
                            },
                            tooltip: {
                                backgroundColor: 'rgba(0, 0, 0, 0.8)',
                                titleColor: '#fff',
                                bodyColor: '#fff'
                            }
                        }
                    }
                });
            }
        }
        
        function applyFreemiumLimitations() {
            // 7日間制限の視覚的表示を強化
            const chartContainers = document.querySelectorAll('[id*="chart"]');
            chartContainers.forEach(container => {
                if (container && !container.classList.contains('chart-container-limited')) {
                    container.classList.add('chart-container-limited');
                }
            });
            
            // セッション制限の表示を強化
            const sessionItems = document.querySelectorAll('.session-item');
            sessionItems.forEach(item => {
                // すべてのセッションにロック状態を適用（最新以外）
                if (!item.classList.contains('active')) {
                    item.classList.add('locked');
                }
            });
            
            // プレミアム制限メッセージの動的追加
            addLimitationReminders();
        }
        
        function addLimitationReminders() {
            // グレード表示エリアに制限メッセージを追加
            const gradeSection = document.querySelector('.grade-badge');
            if (gradeSection && gradeSection.parentElement) {
                const existingLimitation = gradeSection.parentElement.querySelector('.premium-limitation-note');
                if (!existingLimitation) {
                    const limitationNote = document.createElement('div');
                    limitationNote.className = 'premium-limitation-note text-xs text-yellow-300 text-center mt-2';
                    limitationNote.innerHTML = '💎 詳細グレード分析はプレミアム版で';
                    gradeSection.parentElement.appendChild(limitationNote);
                }
            }
            
            // セッション数制限の明示
            const sessionsHeaders = document.querySelectorAll('h3');
            sessionsHeaders.forEach(header => {
                if (header.textContent && header.textContent.includes('セッション別成績')) {
                    header.style.opacity = '0.8';
                }
            });
        }
    </script>
</body>
</html>