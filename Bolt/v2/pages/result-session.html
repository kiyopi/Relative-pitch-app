<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <title>8va相対音感トレーニング - セッション評価</title>
    <link rel="stylesheet" href="../styles/base.css">
    <link rel="stylesheet" href="../styles/results.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;700&display=swap" rel="stylesheet">
    
    <!-- Lucide Icons -->
    <script src="https://unpkg.com/lucide@latest/dist/umd/lucide.js"></script>
</head>
<body>
    <div class="min-h-screen p-6">
        <div class="container">
            <!-- Header -->
            <div class="text-center mb-8">
                <div class="flex justify-center mb-6">
                    <div class="page-header-icon" style="width: 6rem; height: 6rem; border-radius: 50%; background: linear-gradient(135deg, #3b82f6, #1d4ed8); display: flex; align-items: center; justify-content: center;">
                        <i data-lucide="circle-check-big" class="icon-2xl text-white"></i>
                    </div>
                </div>
                <h1 class="text-4xl font-bold text-white mb-4">セッション 1 完了！</h1>
                <p class="text-green-200 text-xl mb-6">基音 C4 - 8音の評価結果</p>
            </div>

            <!-- 進行バー -->
            <div class="glass-card">
                <div class="progress-section completed">
                    <div class="progress-content">
                        <div class="progress-bar with-margin">
                            <div class="progress-fill gradient-catalog-blue" style="width: 25%;"></div>
                        </div>
                        <div class="progress-label">セッション 2 / 8</div>
                    </div>
                    <button class="btn btn-primary progress-action" onclick="window.location.href='training.html'">
                        <i data-lucide="arrow-right" style="width: 24px; height: 24px;"></i>
                        <span>次の基音へ</span>
                    </button>
                </div>
            </div>

            <!-- セッション概要 -->
            <div class="glass-card">
                <div class="score-section">
                    <div class="score-grid">
                        <!-- 基音表示（左） -->
                        <div class="base-note-section">
                            <div class="score-base-note text-white">C4</div>
                            <p class="text-body-green">基音</p>
                        </div>
                        
                        <!-- トロフィーアイコン（中央） -->
                        <div class="trophy-section">
                            <div class="accuracy-badge accuracy-badge-excellent relative">
                                <i data-lucide="trophy" class="text-yellow-300 accuracy-icon"></i>
                                <!-- 精度ランク説明アイコン -->
                                <button class="rank-info-btn help-btn-position" onclick="toggleRankPopover()">
                                    <i data-lucide="help-circle" class="text-white" style="width: 20px !important; height: 20px !important; min-width: 20px !important; min-height: 20px !important; max-width: 20px !important; max-height: 20px !important; font-size: 20px !important;"></i>
                                </button>
                                
                                <!-- 精度ランク説明ポップオーバー -->
                                <div id="rank-popover" class="rank-popover">
                                    <h4 class="popover-title">精度ランク</h4>
                                    
                                    <div class="rank-item">
                                        <i data-lucide="trophy" class="text-yellow-300 icon-md shrink-0"></i>
                                        <div>
                                            <div class="rank-name rank-name-excellent">Excellent</div>
                                            <div class="rank-range">±15セント以内</div>
                                        </div>
                                    </div>
                                    
                                    <div class="rank-item">
                                        <i data-lucide="star" class="text-green-300 icon-md shrink-0"></i>
                                        <div>
                                            <div class="rank-name rank-name-good">Good</div>
                                            <div class="rank-range">15～25セント</div>
                                        </div>
                                    </div>
                                    
                                    <div class="rank-item">
                                        <i data-lucide="thumbs-up" class="text-blue-300 icon-md shrink-0"></i>
                                        <div>
                                            <div class="rank-name rank-name-pass">Pass</div>
                                            <div class="rank-range">25～40セント</div>
                                        </div>
                                    </div>
                                    
                                    <div class="rank-item">
                                        <i data-lucide="triangle-alert" class="text-red-300 icon-md shrink-0"></i>
                                        <div>
                                            <div class="rank-name rank-name-practice">Practice</div>
                                            <div class="rank-range">40セント以上</div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <p class="text-lg text-white font-medium mt-4">素晴らしい精度！</p>
                        </div>
                        
                        <!-- 平均誤差（右） -->
                        <div class="error-section">
                            <div class="score-average text-white" id="average-error">+0.0¢</div>
                            <p class="text-body-green">セッション平均誤差</p>
                        </div>
                    </div>
                </div>
                
                <!-- 評価分布見出し -->
                <h3 class="text-xl font-medium text-white mb-4 text-center">評価分布</h3>
                
                <!-- 評価分布バー -->
                <div class="flex flex-col gap-3 px-4">
                    <!-- Excellent -->
                    <div class="flex items-center gap-3">
                        <i data-lucide="trophy" class="text-yellow-300 icon-md shrink-0"></i>
                        <div class="flex-1 flex items-center gap-2">
                            <div class="progress-bar flex">
                                <div class="progress-fill-custom color-eval-gold" style="width: 37.5%;"></div>
                            </div>
                            <span class="text-sm text-white-60" style="min-width: 20px; text-align: right;">3</span>
                        </div>
                    </div>
                    
                    <!-- Good -->
                    <div class="flex items-center gap-3">
                        <i data-lucide="star" class="text-green-300 icon-md shrink-0"></i>
                        <div class="flex-1 flex items-center gap-2">
                            <div class="progress-bar flex">
                                <div class="progress-fill-custom color-eval-good" style="width: 25%;"></div>
                            </div>
                            <span class="text-sm text-white-60" style="min-width: 20px; text-align: right;">2</span>
                        </div>
                    </div>
                    
                    <!-- Pass -->
                    <div class="flex items-center gap-3">
                        <i data-lucide="thumbs-up" class="text-blue-300 icon-md shrink-0"></i>
                        <div class="flex-1 flex items-center gap-2">
                            <div class="progress-bar flex">
                                <div class="progress-fill-custom color-eval-pass" style="width: 37.5%;"></div>
                            </div>
                            <span class="text-sm text-white-60" style="min-width: 20px; text-align: right;">3</span>
                        </div>
                    </div>
                    
                    <!-- Practice -->
                    <div class="flex items-center gap-3">
                        <i data-lucide="triangle-alert" class="text-red-300 icon-md shrink-0"></i>
                        <div class="flex-1 flex items-center gap-2">
                            <div class="progress-bar flex">
                                <div class="progress-fill-custom color-eval-practice" style="width: 0%;"></div>
                            </div>
                            <span class="text-sm text-white-60" style="min-width: 20px; text-align: right;">0</span>
                        </div>
                    </div>
                </div>
            </div>

            <!-- 詳細分析 -->
            <div class="glass-card">
                <h3 class="heading-md">
                    <i data-lucide="microscope" style="width: 24px; height: 24px;"></i>
                    <span>詳細分析</span>
                </h3>
                <div class="space-y-2" id="note-results">
                    <!-- ド -->
                    <div class="note-result-item">
                        <div class="flex items-center justify-between">
                            <div class="flex items-center gap-4">
                                <div>
                                    <div class="text-sub-title">ド</div>
                                </div>
                                <div>
                                    <div class="text-body">目標 262Hz</div>
                                    <div class="text-body">実音 260Hz</div>
                                </div>
                            </div>
                            <div class="flex items-center gap-3">
                                <div class="text-pitch-deviation-minus">-8¢</div>
                                <div class="flex items-center justify-center ">
                                    <i data-lucide="trophy" class="text-yellow-300" style="width: 28px; height: 28px;"></i>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- レ -->
                    <div class="note-result-item">
                        <div class="flex items-center justify-between">
                            <div class="flex items-center gap-4">
                                <div>
                                    <div class="text-sub-title">レ</div>
                                </div>
                                <div>
                                    <div class="text-body">目標 294Hz</div>
                                    <div class="text-body">実音 298Hz</div>
                                </div>
                            </div>
                            <div class="flex items-center gap-3">
                                <div class="text-pitch-deviation-plus">+15¢</div>
                                <div class="flex items-center justify-center ">
                                    <i data-lucide="star" class="text-green-300" style="width: 28px; height: 28px;"></i>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- ミ -->
                    <div class="note-result-item">
                        <div class="flex items-center justify-between">
                            <div class="flex items-center gap-4">
                                <div>
                                    <div class="text-sub-title">ミ</div>
                                </div>
                                <div>
                                    <div class="text-body">目標 330Hz</div>
                                    <div class="text-body">実音 335Hz</div>
                                </div>
                            </div>
                            <div class="flex items-center gap-3">
                                <div class="text-pitch-deviation-plus">+25¢</div>
                                <div class="flex items-center justify-center ">
                                    <i data-lucide="thumbs-up" class="text-blue-300" style="width: 28px; height: 28px; transform: translateY(-2px) translateX(2px);"></i>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- ファ -->
                    <div class="note-result-item">
                        <div class="flex items-center justify-between">
                            <div class="flex items-center gap-4">
                                <div>
                                    <div class="text-sub-title">ファ</div>
                                </div>
                                <div>
                                    <div class="text-body">目標 349Hz</div>
                                    <div class="text-body">実音 348Hz</div>
                                </div>
                            </div>
                            <div class="flex items-center gap-3">
                                <div class="text-pitch-deviation-minus">-3¢</div>
                                <div class="flex items-center justify-center ">
                                    <i data-lucide="trophy" class="text-yellow-300" style="width: 28px; height: 28px;"></i>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- ソ -->
                    <div class="note-result-item">
                        <div class="flex items-center justify-between">
                            <div class="flex items-center gap-4">
                                <div>
                                    <div class="text-sub-title">ソ</div>
                                </div>
                                <div>
                                    <div class="text-body">目標 392Hz</div>
                                    <div class="text-body">実音 395Hz</div>
                                </div>
                            </div>
                            <div class="flex items-center gap-3">
                                <div class="text-pitch-deviation-plus">+12¢</div>
                                <div class="flex items-center justify-center ">
                                    <i data-lucide="star" class="text-green-300" style="width: 28px; height: 28px;"></i>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- ラ -->
                    <div class="note-result-item">
                        <div class="flex items-center justify-between">
                            <div class="flex items-center gap-4">
                                <div>
                                    <div class="text-sub-title">ラ</div>
                                </div>
                                <div>
                                    <div class="text-body">目標 440Hz</div>
                                    <div class="text-body">実音 450Hz</div>
                                </div>
                            </div>
                            <div class="flex items-center gap-3">
                                <div class="text-pitch-deviation-plus">+38¢</div>
                                <div class="flex items-center justify-center ">
                                    <i data-lucide="triangle-alert" class="text-red-300" style="width: 28px; height: 28px;"></i>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- シ -->
                    <div class="note-result-item">
                        <div class="flex items-center justify-between">
                            <div class="flex items-center gap-4">
                                <div>
                                    <div class="text-sub-title">シ</div>
                                </div>
                                <div>
                                    <div class="text-body">目標 494Hz</div>
                                    <div class="text-body">実音 488Hz</div>
                                </div>
                            </div>
                            <div class="flex items-center gap-3">
                                <div class="text-pitch-deviation-minus">-20¢</div>
                                <div class="flex items-center justify-center ">
                                    <i data-lucide="thumbs-up" class="text-blue-300" style="width: 28px; height: 28px; transform: translateY(-2px) translateX(2px);"></i>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- ド（高音） -->
                    <div class="note-result-item">
                        <div class="flex items-center justify-between">
                            <div class="flex items-center gap-4">
                                <div>
                                    <div class="text-sub-title">ド</div>
                                </div>
                                <div>
                                    <div class="text-body">目標 523Hz</div>
                                    <div class="text-body">実音 527Hz</div>
                                </div>
                            </div>
                            <div class="flex items-center gap-3">
                                <div class="text-pitch-deviation-plus">+13¢</div>
                                <div class="flex items-center justify-center ">
                                    <i data-lucide="star" class="text-green-300" style="width: 28px; height: 28px;"></i>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Action Buttons -->
            <section class="action-buttons">
                <button class="btn btn-primary" onclick="window.location.href='training.html'">
                    <i data-lucide="arrow-right" style="width: 24px; height: 24px;"></i>
                    <span>次の基音へ</span>
                </button>
                <button class="btn btn-outline" onclick="window.location.href='index.html'">
                    <i data-lucide="home" style="width: 24px; height: 24px;"></i>
                    <span>ホームに戻る</span>
                </button>
            </section>
        </div>
    </div>

    <!-- Lucide初期化 -->
    <script src="../js/lucide-init.js"></script>
</body>
</html>