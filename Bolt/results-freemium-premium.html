<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>相対音感トレーニング - 詳細分析レポート（プレミアム版）</title>
    <link rel="stylesheet" href="styles/system.css">
    <script src="https://unpkg.com/lucide@latest/dist/umd/lucide.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.umd.js"></script>
    <style>
        body {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, sans-serif;
        }
        
        .premium-badge {
            background: linear-gradient(135deg, #fbbf24 0%, #f59e0b 100%);
            color: #1f2937;
            padding: 0.5rem 1rem;
            border-radius: 20px;
            font-size: 0.875rem;
            font-weight: 600;
            display: inline-flex;
            align-items: center;
            gap: 0.5rem;
        }
        
        .tone-analysis-grid {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 0.75rem;
            margin: 1rem 0;
        }
        
        .tone-card {
            background: rgba(255, 255, 255, 0.1);
            border-radius: 8px;
            padding: 1rem;
            text-align: center;
            border: 1px solid rgba(255, 255, 255, 0.2);
        }
        
        .tone-card.weak {
            background: rgba(239, 68, 68, 0.2);
            border-color: rgba(239, 68, 68, 0.3);
        }
        
        .tone-card.strong {
            background: rgba(16, 185, 129, 0.2);
            border-color: rgba(16, 185, 129, 0.3);
        }
        
        .practice-recommendation {
            background: linear-gradient(135deg, rgba(59, 130, 246, 0.2), rgba(29, 78, 216, 0.1));
            border: 1px solid rgba(59, 130, 246, 0.3);
            border-radius: 12px;
            padding: 1.5rem;
            margin: 1rem 0;
        }
        
        .priority-high {
            border-left: 4px solid #ef4444;
            padding-left: 1rem;
        }
        
        .priority-medium {
            border-left: 4px solid #f59e0b;
            padding-left: 1rem;
        }
        
        .priority-low {
            border-left: 4px solid #10b981;
            padding-left: 1rem;
        }
        
        .growth-projection {
            background: linear-gradient(135deg, rgba(16, 185, 129, 0.2), rgba(5, 150, 105, 0.1));
            border: 1px solid rgba(16, 185, 129, 0.3);
            border-radius: 12px;
            padding: 1.5rem;
            margin: 1rem 0;
        }
        
        .export-button {
            background: linear-gradient(135deg, #8b5cf6 0%, #7c3aed 100%);
            border: none;
            border-radius: 8px;
            padding: 0.75rem 1.5rem;
            color: white;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            display: inline-flex;
            align-items: center;
            gap: 0.5rem;
            margin: 0.5rem;
        }
        
        .export-button:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(139, 92, 246, 0.3);
        }
        
        .tab-navigation {
            display: flex;
            gap: 0.5rem;
            margin-bottom: 1.5rem;
            overflow-x: auto;
            padding-bottom: 0.5rem;
        }
        
        .tab-button {
            flex: 1;
            min-width: 120px;
            padding: 0.75rem;
            border-radius: 12px;
            font-size: 0.8125rem;
            font-weight: 500;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s ease;
            white-space: nowrap;
            border: 1px solid rgba(255, 255, 255, 0.2);
        }
        
        .tab-button.active {
            background: linear-gradient(135deg, rgba(59, 130, 246, 0.3), rgba(29, 78, 216, 0.2));
            border-color: rgba(59, 130, 246, 0.5);
            color: #ffffff;
        }
        
        .tab-button:not(.active) {
            background: linear-gradient(135deg, rgba(255, 255, 255, 0.1), rgba(255, 255, 255, 0.05));
            color: #cbd5e1;
        }
        
        .tab-content {
            display: none;
        }
        
        .tab-content.active {
            display: block;
        }
    </style>
</head>
<body>
    <div class="container" style="max-width: 800px; margin: 0 auto; padding: 2rem 1rem;">
        <!-- ヘッダー -->
        <div style="text-align: center; margin-bottom: 2rem;">
            <div style="display: flex; align-items: center; justify-content: center; gap: 1rem; margin-bottom: 1rem;">
                <i data-lucide="microscope" style="width: 32px; height: 32px; color: #fbbf24;"></i>
                <h1 style="color: white; font-size: 1.875rem; font-weight: 700; margin: 0;">
                    詳細分析レポート
                </h1>
                <div class="premium-badge">
                    <i data-lucide="crown" style="width: 16px; height: 16px;"></i>
                    PREMIUM
                </div>
            </div>
            <p style="color: #cbd5e1; font-size: 1rem; margin: 0;">
                あなたの相対音感を科学的に分析し、具体的な改善方法をご提案します
            </p>
        </div>

        <!-- エクスポート機能 -->
        <div style="text-align: center; margin-bottom: 2rem;">
            <button class="export-button">
                <i data-lucide="download" style="width: 16px; height: 16px;"></i>
                PDF出力
            </button>
            <button class="export-button">
                <i data-lucide="table" style="width: 16px; height: 16px;"></i>
                CSV出力
            </button>
        </div>

        <!-- タブナビゲーション -->
        <div class="tab-navigation">
            <button class="tab-button active" data-tab="twelve-tone-analysis">
                🎵 12音分析
            </button>
            <button class="tab-button" data-tab="weakness-analysis">
                🎯 弱点特定
            </button>
            <button class="tab-button" data-tab="practice-plan">
                📝 練習プラン
            </button>
            <button class="tab-button" data-tab="growth-tracking">
                📈 成長記録
            </button>
        </div>

        <!-- 12音別分析タブ -->
        <div id="twelve-tone-analysis" class="tab-content active">
            <div class="glass-card" style="margin-bottom: 2rem; padding: 2rem;">
                <h3 style="color: white; font-size: 1.25rem; margin-bottom: 1rem; text-align: center;">
                    🎼 12音律システム習得状況
                </h3>
                
                <!-- システム完成度 -->
                <div style="text-align: center; margin-bottom: 2rem;">
                    <div style="font-size: 3rem; font-weight: 700; color: #fbbf24;">75%</div>
                    <p style="color: #cbd5e1; margin: 0;">12音律システム完成度</p>
                    <p style="color: #10b981; font-size: 0.875rem; margin-top: 0.5rem;">
                        12音中9音で基準達成済み
                    </p>
                </div>

                <!-- 12音別ヒートマップ -->
                <div class="tone-analysis-grid">
                    <div class="tone-card strong">
                        <div style="color: white; font-weight: 600;">C</div>
                        <div style="color: #10b981; font-size: 0.75rem;">±18¢</div>
                    </div>
                    <div class="tone-card weak">
                        <div style="color: white; font-weight: 600;">C#</div>
                        <div style="color: #ef4444; font-size: 0.75rem;">±58¢</div>
                    </div>
                    <div class="tone-card strong">
                        <div style="color: white; font-weight: 600;">D</div>
                        <div style="color: #10b981; font-size: 0.75rem;">±22¢</div>
                    </div>
                    <div class="tone-card strong">
                        <div style="color: white; font-weight: 600;">D#</div>
                        <div style="color: #10b981; font-size: 0.75rem;">±38¢</div>
                    </div>
                    <div class="tone-card strong">
                        <div style="color: white; font-weight: 600;">E</div>
                        <div style="color: #10b981; font-size: 0.75rem;">±28¢</div>
                    </div>
                    <div class="tone-card strong">
                        <div style="color: white; font-weight: 600;">F</div>
                        <div style="color: #10b981; font-size: 0.75rem;">±35¢</div>
                    </div>
                    <div class="tone-card weak">
                        <div style="color: white; font-weight: 600;">F#</div>
                        <div style="color: #ef4444; font-size: 0.75rem;">±62¢</div>
                    </div>
                    <div class="tone-card strong">
                        <div style="color: white; font-weight: 600;">G</div>
                        <div style="color: #10b981; font-size: 0.75rem;">±15¢</div>
                    </div>
                    <div class="tone-card strong">
                        <div style="color: white; font-weight: 600;">G#</div>
                        <div style="color: #10b981; font-size: 0.75rem;">±42¢</div>
                    </div>
                    <div class="tone-card strong">
                        <div style="color: white; font-weight: 600;">A</div>
                        <div style="color: #10b981; font-size: 0.75rem;">±31¢</div>
                    </div>
                    <div class="tone-card weak">
                        <div style="color: white; font-weight: 600;">A#</div>
                        <div style="color: #ef4444; font-size: 0.75rem;">±55¢</div>
                    </div>
                    <div class="tone-card strong">
                        <div style="color: white; font-weight: 600;">B</div>
                        <div style="color: #10b981; font-size: 0.75rem;">±29¢</div>
                    </div>
                </div>

                <!-- 主要発見 -->
                <div style="background: rgba(0, 0, 0, 0.3); padding: 1.5rem; border-radius: 12px; margin-top: 2rem;">
                    <h4 style="color: #fbbf24; font-size: 1.1rem; margin-bottom: 1rem;">🔍 主要発見</h4>
                    <div style="color: #cbd5e1; line-height: 1.6;">
                        <p style="margin-bottom: 0.5rem;">• <strong style="color: white;">シャープ系基音（C#, F#, A#）</strong>が共通弱点</p>
                        <p style="margin-bottom: 0.5rem;">• <strong style="color: white;">G基音</strong>で最高精度（±15¢）を達成</p>
                        <p style="margin: 0;">• 自然音階7音は全て実用レベルに到達済み</p>
                    </div>
                </div>
            </div>
        </div>

        <!-- 弱点特定タブ -->
        <div id="weakness-analysis" class="tab-content">
            <div class="glass-card" style="margin-bottom: 2rem; padding: 2rem;">
                <h3 style="color: white; font-size: 1.25rem; margin-bottom: 1rem; text-align: center;">
                    🎯 詳細弱点分析
                </h3>

                <!-- 音程間隔分析 -->
                <div style="margin-bottom: 2rem;">
                    <h4 style="color: #fbbf24; font-size: 1.1rem; margin-bottom: 1rem;">音程間隔の精度</h4>
                    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 1rem;">
                        <div style="background: rgba(16, 185, 129, 0.2); padding: 1rem; border-radius: 8px;">
                            <div style="color: white; font-weight: 600; margin-bottom: 0.5rem;">強い間隔</div>
                            <div style="color: #10b981; font-size: 0.875rem;">
                                • ド→レ（±15¢）<br>
                                • ソ→ラ（±18¢）<br>
                                • ファ→ソ（±22¢）
                            </div>
                        </div>
                        <div style="background: rgba(239, 68, 68, 0.2); padding: 1rem; border-radius: 8px;">
                            <div style="color: white; font-weight: 600; margin-bottom: 0.5rem;">弱い間隔</div>
                            <div style="color: #ef4444; font-size: 0.875rem;">
                                • ミ→ファ（±52¢）<br>
                                • シ→ド（±48¢）<br>
                                • ファ#→ソ（±45¢）
                            </div>
                        </div>
                    </div>
                </div>

                <!-- 技術的分析 -->
                <div style="background: rgba(0, 0, 0, 0.3); padding: 1.5rem; border-radius: 12px;">
                    <h4 style="color: #fbbf24; font-size: 1.1rem; margin-bottom: 1rem;">🔬 技術的分析</h4>
                    <div style="color: #cbd5e1; line-height: 1.6;">
                        <p style="margin-bottom: 1rem;">
                            <strong style="color: white;">半音間隔（100¢）</strong>の認識に課題があります。
                            これは相対音感の最も高度な技術で、完全習得により 12音律システムが完成します。
                        </p>
                        <p style="margin-bottom: 1rem;">
                            <strong style="color: white;">シャープ系基音の共通弱点</strong>は、自然音階に慣れ親しんだ結果と考えられます。
                            意図的な #音練習により、脳内12音律システムを完成できます。
                        </p>
                        <p style="margin: 0;">
                            現在の成長ペース（月平均-4¢改善）を維持すれば、<strong style="color: #10b981;">3ヶ月後にA級達成</strong>が十分可能です。
                        </p>
                    </div>
                </div>
            </div>
        </div>

        <!-- 練習プランタブ -->
        <div id="practice-plan" class="tab-content">
            <div class="glass-card" style="margin-bottom: 2rem; padding: 2rem;">
                <h3 style="color: white; font-size: 1.25rem; margin-bottom: 1rem; text-align: center;">
                    📝 AI個別練習プラン
                </h3>

                <!-- 優先度1 -->
                <div class="practice-recommendation priority-high">
                    <h4 style="color: #ef4444; font-size: 1.1rem; margin-bottom: 1rem;">
                        🔥 優先度1：F#基音集中練習
                    </h4>
                    <div style="color: #cbd5e1; line-height: 1.6;">
                        <p style="margin-bottom: 1rem;">
                            <strong style="color: white;">目標</strong>: F#基音での誤差を±62¢から±35¢まで改善<br>
                            <strong style="color: white;">期間</strong>: 4週間
                        </p>
                        <div style="background: rgba(0, 0, 0, 0.3); padding: 1rem; border-radius: 8px;">
                            <p style="margin-bottom: 0.5rem;"><strong>具体的練習法</strong></p>
                            <ul style="margin: 0; padding-left: 1.5rem;">
                                <li>F#基音でのド→レ→ミ→ファ練習（毎日3分）</li>
                                <li>F#基音でのランダム音階練習（週3回・10分）</li>
                                <li>F#-G間の半音練習（週2回・5分）</li>
                            </ul>
                        </div>
                    </div>
                </div>

                <!-- 優先度2 -->
                <div class="practice-recommendation priority-medium">
                    <h4 style="color: #f59e0b; font-size: 1.1rem; margin-bottom: 1rem;">
                        ⚡ 優先度2：半音間隔の精密化
                    </h4>
                    <div style="color: #cbd5e1; line-height: 1.6;">
                        <p style="margin-bottom: 1rem;">
                            <strong style="color: white;">目標</strong>: ミ→ファ、シ→ド間隔を±50¢以内に<br>
                            <strong style="color: white;">期間</strong>: 6週間
                        </p>
                        <div style="background: rgba(0, 0, 0, 0.3); padding: 1rem; border-radius: 8px;">
                            <p style="margin-bottom: 0.5rem;"><strong>具体的練習法</strong></p>
                            <ul style="margin: 0; padding-left: 1.5rem;">
                                <li>100¢間隔の聞き分け練習（週2回・10分）</li>
                                <li>隣接半音の比較練習（週1回・15分）</li>
                                <li>完全4度（500¢）からの半音下降練習</li>
                            </ul>
                        </div>
                    </div>
                </div>

                <!-- 優先度3 -->
                <div class="practice-recommendation priority-low">
                    <h4 style="color: #10b981; font-size: 1.1rem; margin-bottom: 1rem;">
                        ✅ 優先度3：強い音の維持
                    </h4>
                    <div style="color: #cbd5e1; line-height: 1.6;">
                        <p style="margin-bottom: 1rem;">
                            <strong style="color: white;">目標</strong>: G基音（±15¢）の精度を維持・向上<br>
                            <strong style="color: white;">期間</strong>: 継続
                        </p>
                        <div style="background: rgba(0, 0, 0, 0.3); padding: 1rem; border-radius: 8px;">
                            <p style="margin-bottom: 0.5rem;"><strong>具体的練習法</strong></p>
                            <ul style="margin: 0; padding-left: 1.5rem;">
                                <li>G基音での高速音階練習（週1回・5分）</li>
                                <li>G基音からの調性感覚確認（週1回）</li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- 成長追跡タブ -->
        <div id="growth-tracking" class="tab-content">
            <div class="glass-card" style="margin-bottom: 2rem; padding: 2rem;">
                <h3 style="color: white; font-size: 1.25rem; margin-bottom: 1rem; text-align: center;">
                    📈 長期成長パターン分析
                </h3>

                <!-- 成長予測 -->
                <div class="growth-projection">
                    <h4 style="color: #10b981; font-size: 1.1rem; margin-bottom: 1rem;">
                        🚀 成長予測（AI分析）
                    </h4>
                    <div style="color: #cbd5e1; line-height: 1.6;">
                        <p style="margin-bottom: 1rem;">
                            過去3ヶ月のデータから、あなたの成長パターンを分析しました。
                        </p>
                        <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 1rem; margin: 1rem 0;">
                            <div style="text-align: center;">
                                <div style="color: #10b981; font-size: 1.5rem; font-weight: 600;">-4¢/月</div>
                                <div style="font-size: 0.875rem;">平均改善ペース</div>
                            </div>
                            <div style="text-align: center;">
                                <div style="color: #fbbf24; font-size: 1.5rem; font-weight: 600;">3ヶ月</div>
                                <div style="font-size: 0.875rem;">A級達成予測</div>
                            </div>
                        </div>
                        <p style="margin: 0; background: rgba(0, 0, 0, 0.3); padding: 1rem; border-radius: 8px;">
                            <strong style="color: white;">予測根拠</strong>: 現在のB級（±42¢）からA級基準（±35¢）まで
                            あと7¢の改善が必要。現在ペース月-4¢なら約2ヶ月で達成可能。
                        </p>
                    </div>
                </div>

                <!-- 月別進歩 -->
                <div style="background: rgba(0, 0, 0, 0.3); padding: 1.5rem; border-radius: 12px; margin-top: 2rem;">
                    <h4 style="color: #fbbf24; font-size: 1.1rem; margin-bottom: 1rem;">📊 月別進歩記録</h4>
                    <div style="display: grid; grid-template-columns: repeat(3, 1fr); gap: 1rem;">
                        <div style="text-align: center;">
                            <div style="color: #94a3b8; font-size: 0.875rem;">3ヶ月前</div>
                            <div style="color: #ef4444; font-size: 1.25rem; font-weight: 600;">±54¢</div>
                            <div style="color: #94a3b8; font-size: 0.75rem;">C級</div>
                        </div>
                        <div style="text-align: center;">
                            <div style="color: #94a3b8; font-size: 0.875rem;">1ヶ月前</div>
                            <div style="color: #f59e0b; font-size: 1.25rem; font-weight: 600;">±48¢</div>
                            <div style="color: #94a3b8; font-size: 0.75rem;">B-級</div>
                        </div>
                        <div style="text-align: center;">
                            <div style="color: #94a3b8; font-size: 0.875rem;">現在</div>
                            <div style="color: #10b981; font-size: 1.25rem; font-weight: 600;">±42¢</div>
                            <div style="color: #94a3b8; font-size: 0.75rem;">B級</div>
                        </div>
                    </div>
                </div>

                <!-- 他ユーザーとの比較 -->
                <div style="background: rgba(59, 130, 246, 0.1); border: 1px solid rgba(59, 130, 246, 0.2); padding: 1.5rem; border-radius: 12px; margin-top: 2rem;">
                    <h4 style="color: #60a5fa; font-size: 1.1rem; margin-bottom: 1rem;">👥 匿名ユーザー比較</h4>
                    <div style="color: #cbd5e1; line-height: 1.6;">
                        <p style="margin-bottom: 1rem;">
                            同レベル練習期間（3-6ヶ月）のユーザー比較
                        </p>
                        <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 1rem;">
                            <div>
                                <div style="color: #60a5fa; font-weight: 600;">上位30%</div>
                                <div style="font-size: 0.875rem;">あなたの位置</div>
                            </div>
                            <div>
                                <div style="color: #10b981; font-weight: 600;">月-4¢</div>
                                <div style="font-size: 0.875rem;">平均-2.8¢より優秀</div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- ナビゲーションボタン -->
        <div class="glass-card" style="padding: 1.5rem; text-align: center;">
            <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 1rem; margin-bottom: 1rem;">
                <a href="records.html" style="background: rgba(251, 191, 36, 0.3); border: 1px solid rgba(251, 191, 36, 0.5); color: white; padding: 0.75rem 1rem; border-radius: 8px; text-decoration: none; display: inline-block; font-size: 0.9rem;">
                    📊 詳細なトレーニング記録
                </a>
                <a href="results-freemium-basic.html" style="background: rgba(59, 130, 246, 0.3); border: 1px solid rgba(59, 130, 246, 0.5); color: white; padding: 0.75rem 1rem; border-radius: 8px; text-decoration: none; display: inline-block; font-size: 0.9rem;">
                    ← 総合評価に戻る
                </a>
            </div>
        </div>
    </div>

    <script>
        lucide.createIcons();
        
        // タブ切り替え機能
        document.querySelectorAll('.tab-button').forEach(button => {
            button.addEventListener('click', () => {
                // 全タブボタンの状態をリセット
                document.querySelectorAll('.tab-button').forEach(btn => btn.classList.remove('active'));
                document.querySelectorAll('.tab-content').forEach(content => content.classList.remove('active'));
                
                // クリックされたタブをアクティブに
                button.classList.add('active');
                const tabId = button.getAttribute('data-tab');
                document.getElementById(tabId).classList.add('active');
            });
        });
    </script>
</body>
</html>