<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ğŸšï¸ éŸ³é‡ãƒãƒ¼ãƒ†ã‚¹ãƒˆ - PitchPro v1.2.2</title>

    <!-- Favicon -->
    <link rel="icon" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>ğŸšï¸</text></svg>">

    <!-- ã‚¹ã‚¿ã‚¤ãƒ«ã‚·ãƒ¼ãƒˆ -->
    <link rel="stylesheet" href="../Bolt/v2/styles/base.css">

    <!-- ãƒ•ã‚©ãƒ³ãƒˆ -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;700&display=swap" rel="stylesheet">
</head>
<body>
    <!-- ãƒ¡ã‚¤ãƒ³ã‚³ãƒ³ãƒ†ãƒŠ -->
    <div class="container">
        <!-- ãƒšãƒ¼ã‚¸ãƒ˜ãƒƒãƒ€ãƒ¼ -->
        <header class="page-header">
            <div class="flex items-center gap-3">
                <button id="back-button" class="nav-button" title="æˆ»ã‚‹">
                    <i data-lucide="arrow-left" class="icon-md"></i>
                </button>
                <h1 class="heading-lg">
                    <i data-lucide="volume-2" class="text-green-300"></i>
                    <span>éŸ³é‡ãƒãƒ¼ãƒ†ã‚¹ãƒˆ</span>
                </h1>
                <div class="badge badge-info">PitchPro v1.2.2</div>
            </div>
        </header>

        <!-- PitchProãƒãƒ¼ã‚¸ãƒ§ãƒ³æƒ…å ± -->
        <section class="glass-card">
            <h2 class="heading-md">
                <i data-lucide="info" class="text-blue-300"></i>
                <span>ãƒ©ã‚¤ãƒ–ãƒ©ãƒªæƒ…å ±</span>
            </h2>
            <div id="version-info" class="text-white-70">
                <div>PitchProèª­ã¿è¾¼ã¿ç¢ºèªä¸­...</div>
            </div>
        </section>

        <!-- ã‚³ãƒ³ãƒˆãƒ­ãƒ¼ãƒ«ãƒ‘ãƒãƒ« -->
        <section class="glass-card">
            <h2 class="heading-md">
                <i data-lucide="settings" class="text-purple-300"></i>
                <span>ã‚³ãƒ³ãƒˆãƒ­ãƒ¼ãƒ«</span>
            </h2>

            <div class="flex gap-3 flex-wrap">
                <button id="init-btn" class="btn btn-primary">
                    <i data-lucide="play"></i>
                    <span>åˆæœŸåŒ–</span>
                </button>
                <button id="start-btn" class="btn btn-success" disabled>
                    <i data-lucide="mic"></i>
                    <span>æ¤œå‡ºé–‹å§‹</span>
                </button>
                <button id="stop-btn" class="btn btn-outline" disabled>
                    <i data-lucide="stop-circle"></i>
                    <span>æ¤œå‡ºåœæ­¢</span>
                </button>
                <button id="destroy-btn" class="btn btn-danger" disabled>
                    <i data-lucide="trash-2"></i>
                    <span>ãƒªã‚½ãƒ¼ã‚¹ç ´æ£„</span>
                </button>
            </div>
        </section>

        <!-- éŸ³é‡ãƒãƒ¼1 - ãƒ¡ã‚¤ãƒ³ -->
        <section class="glass-card">
            <h2 class="heading-md">
                <i data-lucide="bar-chart-3" class="text-green-300"></i>
                <span>éŸ³é‡ãƒãƒ¼ #1 (ãƒ¡ã‚¤ãƒ³)</span>
            </h2>

            <div class="volume-meter">
                <div class="flex items-center justify-between mb-2">
                    <span class="text-white-70">éŸ³é‡ãƒ¬ãƒ™ãƒ«</span>
                    <span id="volume-text-1" class="text-white font-medium">0.0%</span>
                </div>
                <div class="progress-bar">
                    <div id="volume-bar-1" class="progress-fill gradient-catalog-green"></div>
                </div>
            </div>

            <div class="flex items-center justify-center gap-6 mt-4">
                <div class="frequency-display">
                    <div class="text-white-70 text-sm">å‘¨æ³¢æ•°</div>
                    <div id="frequency-1" class="text-2xl font-bold text-green-300">--- Hz</div>
                </div>
                <div class="note-display">
                    <div class="text-white-70 text-sm">éŸ³éš</div>
                    <div id="note-1" class="text-2xl font-bold text-yellow-300">---</div>
                </div>
            </div>

            <div class="flex gap-3 mt-4">
                <button id="switch-to-1-btn" class="btn btn-secondary">
                    <i data-lucide="target"></i>
                    <span>ãƒãƒ¼#1ã«åˆ‡ã‚Šæ›¿ãˆ</span>
                </button>
            </div>
        </section>

        <!-- éŸ³é‡ãƒãƒ¼2 - ã‚µãƒ– -->
        <section class="glass-card">
            <h2 class="heading-md">
                <i data-lucide="bar-chart-2" class="text-blue-300"></i>
                <span>éŸ³é‡ãƒãƒ¼ #2 (ã‚µãƒ–)</span>
            </h2>

            <div class="volume-meter">
                <div class="flex items-center justify-between mb-2">
                    <span class="text-white-70">éŸ³é‡ãƒ¬ãƒ™ãƒ«</span>
                    <span id="volume-text-2" class="text-white font-medium">0.0%</span>
                </div>
                <div class="progress-bar">
                    <div id="volume-bar-2" class="progress-fill gradient-catalog-blue"></div>
                </div>
            </div>

            <div class="flex items-center justify-center gap-6 mt-4">
                <div class="frequency-display">
                    <div class="text-white-70 text-sm">å‘¨æ³¢æ•°</div>
                    <div id="frequency-2" class="text-2xl font-bold text-blue-300">--- Hz</div>
                </div>
                <div class="note-display">
                    <div class="text-white-70 text-sm">éŸ³éš</div>
                    <div id="note-2" class="text-2xl font-bold text-yellow-300">---</div>
                </div>
            </div>

            <div class="flex gap-3 mt-4">
                <button id="switch-to-2-btn" class="btn btn-secondary">
                    <i data-lucide="target"></i>
                    <span>ãƒãƒ¼#2ã«åˆ‡ã‚Šæ›¿ãˆ</span>
                </button>
            </div>
        </section>

        <!-- éŸ³é‡ãƒãƒ¼3 - ç¬¬ä¸‰ -->
        <section class="glass-card">
            <h2 class="heading-md">
                <i data-lucide="bar-chart" class="text-purple-300"></i>
                <span>éŸ³é‡ãƒãƒ¼ #3 (ç¬¬ä¸‰)</span>
            </h2>

            <div class="volume-meter">
                <div class="flex items-center justify-between mb-2">
                    <span class="text-white-70">éŸ³é‡ãƒ¬ãƒ™ãƒ«</span>
                    <span id="volume-text-3" class="text-white font-medium">0.0%</span>
                </div>
                <div class="progress-bar">
                    <div id="volume-bar-3" class="progress-fill gradient-catalog-purple"></div>
                </div>
            </div>

            <div class="flex items-center justify-center gap-6 mt-4">
                <div class="frequency-display">
                    <div class="text-white-70 text-sm">å‘¨æ³¢æ•°</div>
                    <div id="frequency-3" class="text-2xl font-bold text-purple-300">--- Hz</div>
                </div>
                <div class="note-display">
                    <div class="text-white-70 text-sm">éŸ³éš</div>
                    <div id="note-3" class="text-2xl font-bold text-yellow-300">---</div>
                </div>
            </div>

            <div class="flex gap-3 mt-4">
                <button id="switch-to-3-btn" class="btn btn-secondary">
                    <i data-lucide="target"></i>
                    <span>ãƒãƒ¼#3ã«åˆ‡ã‚Šæ›¿ãˆ</span>
                </button>
            </div>
        </section>

        <!-- ãƒ‡ãƒãƒƒã‚°æƒ…å ± -->
        <section class="glass-card">
            <h2 class="heading-md">
                <i data-lucide="terminal" class="text-gray-300"></i>
                <span>ãƒ‡ãƒãƒƒã‚°ãƒ­ã‚°</span>
            </h2>

            <div class="flex gap-3 mb-4">
                <button id="clear-log-btn" class="btn btn-outline">
                    <i data-lucide="trash-2"></i>
                    <span>ãƒ­ã‚°ã‚¯ãƒªã‚¢</span>
                </button>
            </div>

            <div id="debug-log" class="debug-log">
                <div>[åˆæœŸåŒ–] ãƒšãƒ¼ã‚¸èª­ã¿è¾¼ã¿å®Œäº†</div>
            </div>
        </section>
    </div>

    <!-- JavaScript -->
    <script src="https://unpkg.com/lucide@latest/dist/umd/lucide.js"></script>
    <script src="src/js/pitchpro-v1.2.2.umd.js"></script>

    <script>
        /**
         * éŸ³é‡ãƒãƒ¼ãƒ†ã‚¹ãƒˆ - PitchPro v1.2.2ã®éŸ³é‡ãƒãƒ¼å‹•ä½œç¢ºèª
         */
        class VolumeBarTest {
            constructor() {
                this.audioDetector = null;
                this.isInitialized = false;
                this.currentTarget = 1;

                // DOMè¦ç´ å–å¾—
                this.elements = {
                    // ã‚³ãƒ³ãƒˆãƒ­ãƒ¼ãƒ«
                    initBtn: document.getElementById('init-btn'),
                    startBtn: document.getElementById('start-btn'),
                    stopBtn: document.getElementById('stop-btn'),
                    destroyBtn: document.getElementById('destroy-btn'),

                    // åˆ‡ã‚Šæ›¿ãˆãƒœã‚¿ãƒ³
                    switchTo1Btn: document.getElementById('switch-to-1-btn'),
                    switchTo2Btn: document.getElementById('switch-to-2-btn'),
                    switchTo3Btn: document.getElementById('switch-to-3-btn'),

                    // æƒ…å ±è¡¨ç¤º
                    versionInfo: document.getElementById('version-info'),
                    debugLog: document.getElementById('debug-log'),
                    clearLogBtn: document.getElementById('clear-log-btn'),

                    // ãƒãƒƒã‚¯ãƒœã‚¿ãƒ³
                    backButton: document.getElementById('back-button')
                };

                this.setupEventListeners();
                this.initialize();
            }

            setupEventListeners() {
                // ã‚³ãƒ³ãƒˆãƒ­ãƒ¼ãƒ«ãƒœã‚¿ãƒ³
                this.elements.initBtn.addEventListener('click', () => this.initAudioDetection());
                this.elements.startBtn.addEventListener('click', () => this.startDetection());
                this.elements.stopBtn.addEventListener('click', () => this.stopDetection());
                this.elements.destroyBtn.addEventListener('click', () => this.destroyAudioDetection());

                // åˆ‡ã‚Šæ›¿ãˆãƒœã‚¿ãƒ³
                this.elements.switchTo1Btn.addEventListener('click', () => this.switchToTarget(1));
                this.elements.switchTo2Btn.addEventListener('click', () => this.switchToTarget(2));
                this.elements.switchTo3Btn.addEventListener('click', () => this.switchToTarget(3));

                // ãƒ‡ãƒãƒƒã‚°ãƒ­ã‚°
                this.elements.clearLogBtn.addEventListener('click', () => this.clearLog());

                // ãƒŠãƒ“ã‚²ãƒ¼ã‚·ãƒ§ãƒ³
                this.elements.backButton.addEventListener('click', () => {
                    if (confirm('ãƒ†ã‚¹ãƒˆã‚’çµ‚äº†ã—ã¾ã™ã‹ï¼Ÿ')) {
                        this.cleanup();
                        window.location.href = '../index.html';
                    }
                });

                // ãƒšãƒ¼ã‚¸ã‚¢ãƒ³ãƒ­ãƒ¼ãƒ‰æ™‚ã®ã‚¯ãƒªãƒ¼ãƒ³ã‚¢ãƒƒãƒ—
                window.addEventListener('beforeunload', () => this.cleanup());
            }

            initialize() {
                this.log('ğŸš€ éŸ³é‡ãƒãƒ¼ãƒ†ã‚¹ãƒˆåˆæœŸåŒ–é–‹å§‹');

                // PitchProæƒ…å ±è¡¨ç¤º
                if (typeof PitchPro !== 'undefined') {
                    const info = [
                        `âœ… PitchPro ãƒ©ã‚¤ãƒ–ãƒ©ãƒªèª­ã¿è¾¼ã¿å®Œäº†`,
                        `ğŸ”§ ãƒãƒ¼ã‚¸ãƒ§ãƒ³: ${PitchPro.VERSION || 'v1.2.2'}`,
                        `ğŸ“‹ åˆ©ç”¨å¯èƒ½ã‚¯ãƒ©ã‚¹: ${Object.keys(PitchPro).length}å€‹`,
                        `ğŸ¯ ä¸»è¦æ©Ÿèƒ½: ${Object.keys(PitchPro).slice(0, 5).join(', ')}`,
                        `ğŸ†• v1.2.2æ–°æ©Ÿèƒ½: updateSelectors(), æ”¹å–„ã•ã‚ŒãŸã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°`
                    ];

                    this.elements.versionInfo.innerHTML = info.map(text =>
                        `<div class="flex items-center gap-2 mb-1">${text}</div>`
                    ).join('');

                    this.log('âœ… PitchPro v1.2.2 æƒ…å ±è¡¨ç¤ºå®Œäº†');
                } else {
                    this.elements.versionInfo.innerHTML = '<div class="text-red-300">âŒ PitchProèª­ã¿è¾¼ã¿ã‚¨ãƒ©ãƒ¼</div>';
                    this.log('âŒ PitchProèª­ã¿è¾¼ã¿å¤±æ•—', 'error');
                }

                // Lucideã‚¢ã‚¤ã‚³ãƒ³åˆæœŸåŒ–
                if (typeof lucide !== 'undefined') {
                    lucide.createIcons();
                    this.log('âœ… Lucideã‚¢ã‚¤ã‚³ãƒ³åˆæœŸåŒ–å®Œäº†');
                }

                this.log('ğŸšï¸ éŸ³é‡ãƒãƒ¼ãƒ†ã‚¹ãƒˆæº–å‚™å®Œäº†');
            }

            async initAudioDetection() {
                try {
                    this.elements.initBtn.disabled = true;
                    this.log('ğŸ¤ AudioDetectionComponentåˆæœŸåŒ–é–‹å§‹...');

                    // åˆæœŸã¯ãƒãƒ¼#1ã«è¨­å®š
                    this.audioDetector = new PitchPro.AudioDetectionComponent({
                        volumeBarSelector: '#volume-bar-1',
                        volumeTextSelector: '#volume-text-1',
                        frequencySelector: '#frequency-1',
                        noteSelector: '#note-1',
                        clarityThreshold: 0.4,
                        minVolumeAbsolute: 0.01,
                        deviceOptimization: true,
                        autoUpdateUI: true,  // è‡ªå‹•UIæ›´æ–°ã‚’æ˜ç¤ºçš„ã«æœ‰åŠ¹åŒ–
                        debug: true  // ãƒ‡ãƒãƒƒã‚°ãƒ¢ãƒ¼ãƒ‰ã‚’æœ‰åŠ¹åŒ–
                    });

                    await this.audioDetector.initialize();

                    // ã‚³ãƒ¼ãƒ«ãƒãƒƒã‚¯è¨­å®š
                    this.audioDetector.setCallbacks({
                        onPitchUpdate: (result) => this.handlePitchUpdate(result),
                        onError: (error) => this.handleError(error)
                    });

                    this.isInitialized = true;
                    this.currentTarget = 1;

                    // UIæ›´æ–°
                    this.elements.startBtn.disabled = false;
                    this.elements.destroyBtn.disabled = false;

                    this.log('âœ… AudioDetectionComponentåˆæœŸåŒ–å®Œäº† (ã‚¿ãƒ¼ã‚²ãƒƒãƒˆ: ãƒãƒ¼#1)');
                    this.log('ğŸ”§ updateSelectors()æ©Ÿèƒ½ãŒåˆ©ç”¨å¯èƒ½ã§ã™');

                } catch (error) {
                    this.log(`âŒ åˆæœŸåŒ–ã‚¨ãƒ©ãƒ¼: ${error.message}`, 'error');
                    this.elements.initBtn.disabled = false;
                }
            }

            async startDetection() {
                if (!this.audioDetector || !this.isInitialized) {
                    this.log('âŒ AudioDetectionComponentãŒåˆæœŸåŒ–ã•ã‚Œã¦ã„ã¾ã›ã‚“', 'error');
                    return;
                }

                try {
                    this.elements.startBtn.disabled = true;
                    this.log('â–¶ï¸ éŸ³å£°æ¤œå‡ºé–‹å§‹...');

                    await this.audioDetector.startDetection();

                    // UIæ›´æ–°
                    this.elements.stopBtn.disabled = false;

                    this.log(`âœ… éŸ³å£°æ¤œå‡ºé–‹å§‹ (ç¾åœ¨ã®ã‚¿ãƒ¼ã‚²ãƒƒãƒˆ: ãƒãƒ¼#${this.currentTarget})`);
                    this.log('ğŸµ ãƒã‚¤ã‚¯ã«å‘ã‹ã£ã¦å£°ã‚’å‡ºã—ã¦ãã ã•ã„');

                } catch (error) {
                    this.log(`âŒ æ¤œå‡ºé–‹å§‹ã‚¨ãƒ©ãƒ¼: ${error.message}`, 'error');
                    this.elements.startBtn.disabled = false;
                }
            }

            stopDetection() {
                if (!this.audioDetector) {
                    this.log('âŒ AudioDetectionComponentãŒå­˜åœ¨ã—ã¾ã›ã‚“', 'error');
                    return;
                }

                try {
                    this.audioDetector.stopDetection();

                    // UIæ›´æ–°
                    this.elements.startBtn.disabled = false;
                    this.elements.stopBtn.disabled = true;

                    this.log('â¹ï¸ éŸ³å£°æ¤œå‡ºåœæ­¢');

                } catch (error) {
                    this.log(`âŒ æ¤œå‡ºåœæ­¢ã‚¨ãƒ©ãƒ¼: ${error.message}`, 'error');
                }
            }

            destroyAudioDetection() {
                if (!this.audioDetector) {
                    this.log('âŒ AudioDetectionComponentãŒå­˜åœ¨ã—ã¾ã›ã‚“', 'error');
                    return;
                }

                try {
                    this.log('ğŸ—‘ï¸ AudioDetectionComponentç ´æ£„ä¸­...');

                    this.audioDetector.stopDetection();
                    this.audioDetector.destroy();
                    this.audioDetector = null;
                    this.isInitialized = false;

                    // UIæ›´æ–°
                    this.elements.initBtn.disabled = false;
                    this.elements.startBtn.disabled = true;
                    this.elements.stopBtn.disabled = true;
                    this.elements.destroyBtn.disabled = true;

                    this.log('âœ… ãƒªã‚½ãƒ¼ã‚¹ç ´æ£„å®Œäº†');

                } catch (error) {
                    this.log(`âŒ ç ´æ£„ã‚¨ãƒ©ãƒ¼: ${error.message}`, 'error');
                }
            }

            switchToTarget(targetNumber) {
                if (!this.audioDetector || !this.isInitialized) {
                    this.log('âŒ AudioDetectionComponentãŒåˆæœŸåŒ–ã•ã‚Œã¦ã„ã¾ã›ã‚“', 'error');
                    return;
                }

                try {
                    this.log(`ğŸ”„ ãƒãƒ¼#${targetNumber}ã«åˆ‡ã‚Šæ›¿ãˆä¸­...`);

                    // PitchPro v1.2.2ã®æ–°æ©Ÿèƒ½: updateSelectors()
                    this.audioDetector.updateSelectors({
                        volumeBarSelector: `#volume-bar-${targetNumber}`,
                        volumeTextSelector: `#volume-text-${targetNumber}`,
                        frequencySelector: `#frequency-${targetNumber}`,
                        noteSelector: `#note-${targetNumber}`
                    });

                    this.currentTarget = targetNumber;
                    this.log(`âœ… ãƒãƒ¼#${targetNumber}ã«åˆ‡ã‚Šæ›¿ãˆå®Œäº†`);
                    this.log(`ğŸ¯ ç¾åœ¨ã®ã‚¿ãƒ¼ã‚²ãƒƒãƒˆ: ãƒãƒ¼#${targetNumber}`);

                } catch (error) {
                    this.log(`âŒ åˆ‡ã‚Šæ›¿ãˆã‚¨ãƒ©ãƒ¼: ${error.message}`, 'error');
                }
            }

            handlePitchUpdate(result) {
                // è©³ç´°ãƒ­ã‚°ï¼ˆéŸ³é‡æƒ…å ±ã‚’é‡ç‚¹çš„ã«è¨˜éŒ²ï¼‰
                if (result.volume !== undefined) {
                    const volumePercent = result.volume.toFixed(1);
                    this.log(`ğŸšï¸ éŸ³é‡æ›´æ–°: ${volumePercent}% (ãƒãƒ¼#${this.currentTarget}) | å‘¨æ³¢æ•°: ${result.frequency?.toFixed(1) || '---'}Hz`, 'debug');

                    // ãƒ‡ãƒãƒƒã‚°: ç¾åœ¨ã®ã‚»ãƒ¬ã‚¯ã‚¿ãƒ¼è¨­å®šã‚’è¡¨ç¤º
                    if (Math.random() < 0.1) { // 10%ã®ç¢ºç‡ã§ãƒ­ã‚°å‡ºåŠ›ï¼ˆãƒ­ã‚°éå¤šé˜²æ­¢ï¼‰
                        console.log(`ğŸ“Š ç¾åœ¨ã®ã‚»ãƒ¬ã‚¯ã‚¿ãƒ¼è¨­å®š:`, {
                            volumeBarSelector: `#volume-bar-${this.currentTarget}`,
                            volumeTextSelector: `#volume-text-${this.currentTarget}`,
                            frequencySelector: `#frequency-${this.currentTarget}`,
                            noteSelector: `#note-${this.currentTarget}`
                        });
                    }
                }
            }

            handleError(error) {
                this.log(`ğŸš¨ PitchProã‚¨ãƒ©ãƒ¼: ${error.message}`, 'error');
            }

            log(message, level = 'info') {
                const timestamp = new Date().toLocaleTimeString();
                const logEntry = document.createElement('div');

                let className = '';
                let prefix = '';

                switch (level) {
                    case 'error':
                        className = 'text-red-300';
                        prefix = 'âŒ ';
                        break;
                    case 'debug':
                        className = 'text-gray-400';
                        prefix = 'ğŸ” ';
                        break;
                    default:
                        className = 'text-white-70';
                        prefix = 'â„¹ï¸ ';
                }

                logEntry.className = className;
                logEntry.textContent = `[${timestamp}] ${prefix}${message}`;

                this.elements.debugLog.appendChild(logEntry);

                // è‡ªå‹•ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«
                this.elements.debugLog.scrollTop = this.elements.debugLog.scrollHeight;

                // ã‚³ãƒ³ã‚½ãƒ¼ãƒ«ã«ã‚‚å‡ºåŠ›
                console.log(`[VolumeBarTest] ${message}`);
            }

            clearLog() {
                this.elements.debugLog.innerHTML = '';
                this.log('ğŸ§¹ ãƒ‡ãƒãƒƒã‚°ãƒ­ã‚°ã‚¯ãƒªã‚¢å®Œäº†');
            }

            cleanup() {
                this.log('ğŸ§¹ ã‚¯ãƒªãƒ¼ãƒ³ã‚¢ãƒƒãƒ—é–‹å§‹...');

                if (this.audioDetector) {
                    try {
                        this.audioDetector.stopDetection();
                        this.audioDetector.destroy();
                        this.audioDetector = null;
                        this.log('âœ… AudioDetectionComponent ã‚¯ãƒªãƒ¼ãƒ³ã‚¢ãƒƒãƒ—å®Œäº†');
                    } catch (error) {
                        this.log(`âš ï¸ ã‚¯ãƒªãƒ¼ãƒ³ã‚¢ãƒƒãƒ—ã‚¨ãƒ©ãƒ¼: ${error.message}`, 'error');
                    }
                }

                this.isInitialized = false;
                this.log('âœ… ã‚¯ãƒªãƒ¼ãƒ³ã‚¢ãƒƒãƒ—å®Œäº†');
            }
        }

        // ãƒšãƒ¼ã‚¸èª­ã¿è¾¼ã¿å®Œäº†æ™‚ã«åˆæœŸåŒ–
        document.addEventListener('DOMContentLoaded', () => {
            console.log('ğŸšï¸ éŸ³é‡ãƒãƒ¼ãƒ†ã‚¹ãƒˆ - PitchPro v1.2.2');
            window.volumeBarTest = new VolumeBarTest();
        });
    </script>
</body>
</html>