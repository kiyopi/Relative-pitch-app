<body>
<h1>ğŸ“Š è©•ä¾¡è¨ˆç®—ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ãƒ†ã‚¹ãƒˆ</h1>
<pre id="output">â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
ğŸ“Š è©•ä¾¡è¨ˆç®—ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ãƒ†ã‚¹ãƒˆçµæœ
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

ğŸ–¥ï¸  ãƒ‡ãƒã‚¤ã‚¹æƒ…å ±:
   UserAgent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/16.6 Safari/605.1.15
   Platform: MacIntel

âœ… ãƒ†ã‚¹ãƒˆ1: 1ã‚»ãƒƒã‚·ãƒ§ãƒ³è¨ˆç®—
   è¨ˆç®—æ™‚é–“: 39.000ms
   ã‚°ãƒ¬ãƒ¼ãƒ‰: S
   å¹³å‡èª¤å·®: 11.6Â¢

âœ… ãƒ†ã‚¹ãƒˆ2: 10ã‚»ãƒƒã‚·ãƒ§ãƒ³å€‹åˆ¥è¨ˆç®—
   åˆè¨ˆæ™‚é–“: 0.000ms
   å¹³å‡æ™‚é–“: 0.000ms/ã‚»ãƒƒã‚·ãƒ§ãƒ³

âœ… ãƒ†ã‚¹ãƒˆ3: 50ã‚»ãƒƒã‚·ãƒ§ãƒ³å€‹åˆ¥è¨ˆç®—ï¼ˆrecordsè¡¨ç¤ºæƒ³å®šï¼‰
   åˆè¨ˆæ™‚é–“: 2.000ms
   å¹³å‡æ™‚é–“: 0.040ms/ã‚»ãƒƒã‚·ãƒ§ãƒ³
   ä½“æ„Ÿé€Ÿåº¦: å®Œå…¨ã«å³åº§ï¼ˆ60FPSç¶­æŒï¼‰

âœ… ãƒ†ã‚¹ãƒˆ4: 100å›ç¹°ã‚Šè¿”ã—çµ±è¨ˆ
   å¹³å‡: 0.240ms
   ä¸­å¤®å€¤: 0.000ms
   æœ€å°: 0.000ms
   æœ€å¤§: 20.000ms

âš ï¸  ãƒ†ã‚¹ãƒˆ5: å®Ÿãƒ‡ãƒ¼ã‚¿ãªã—
   localStorageã«ã‚»ãƒƒã‚·ãƒ§ãƒ³ãƒ‡ãƒ¼ã‚¿ãŒã‚ã‚Šã¾ã›ã‚“
   ãƒˆãƒ¬ãƒ¼ãƒ‹ãƒ³ã‚°ã‚’1å›å®Ÿè¡Œå¾Œã€å†åº¦ãƒ†ã‚¹ãƒˆã—ã¦ãã ã•ã„

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
ğŸ“Œ ç·åˆçµè«–:
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

   ğŸ”¹ 1ã‚»ãƒƒã‚·ãƒ§ãƒ³å¹³å‡è¨ˆç®—æ™‚é–“: 0.24ms
   ğŸ”¹ 50ã‚»ãƒƒã‚·ãƒ§ãƒ³è¡¨ç¤ºæ™‚é–“: 2.000ms
   ğŸ”¹ ãƒ¦ãƒ¼ã‚¶ãƒ¼ä½“é¨“: å®Œå…¨ã«å³åº§ï¼ˆ60FPSç¶­æŒï¼‰

ğŸ’¡ æ¨å¥¨å®Ÿè£…æ–¹é‡:

   âœ… å‹•çš„è¨ˆç®—ã§å•é¡Œãªã—
   âœ… ã‚­ãƒ£ãƒƒã‚·ãƒ¥ä¸è¦ï¼ˆè¨ˆç®—ã‚³ã‚¹ãƒˆãŒååˆ†ä½ã„ï¼‰
   âœ… è©•ä¾¡åŸºæº–å¤‰æ›´ã«æŸ”è»Ÿã«å¯¾å¿œå¯èƒ½
   âœ… ãƒ‡ãƒ¼ã‚¿ä¸€è²«æ€§ã‚’ä¿æŒ

   ğŸ“ å®Ÿè£…æ–¹é‡:
      - SessionDataRecorderã¯ç”Ÿãƒ‡ãƒ¼ã‚¿ã®ã¿ä¿å­˜
      - records-controllerã§è¡¨ç¤ºæ™‚ã«å‹•çš„è¨ˆç®—
      - è©•ä¾¡åŸºæº–å¤‰æ›´æ™‚ã‚‚éå»ãƒ‡ãƒ¼ã‚¿ã‚’æ­£ã—ãå†è©•ä¾¡
</pre>

<script>
// EvaluationCalculatorã®ç°¡ç•¥ç‰ˆï¼ˆè¨ˆç®—ã‚³ã‚¢éƒ¨åˆ†ã®ã¿ï¼‰
class EvaluationCalculator {
    static calculateDynamicGrade(sessionData) {
        const modeInfo = this.detectMode(sessionData);
        const deviceInfo = this.detectDeviceQuality();
        const basicMetrics = this.calculateBasicMetrics(sessionData, deviceInfo);
        const metricsWithAdjustment = this.applyTechnicalAdjustment(basicMetrics, deviceInfo);
        const thresholdInfo = this.getModeSpecificThresholds(modeInfo.actualSessions);
        const gradeResult = this.determineGrade(metricsWithAdjustment.adjusted, thresholdInfo.thresholds);

        return {
            grade: gradeResult.grade,
            metrics: metricsWithAdjustment
        };
    }

    static detectMode(sessionData) {
        const sessionCount = sessionData.length;
        if (sessionCount <= 8) return { mode: 'random', actualSessions: sessionCount };
        if (sessionCount <= 12) return { mode: 'continuous', actualSessions: sessionCount };
        return { mode: '12tone', actualSessions: sessionCount };
    }

    static detectDeviceQuality() {
        try {
            const audioContext = new (window.AudioContext || window.webkitAudioContext)();
            const sampleRate = audioContext.sampleRate;
            audioContext.close();
            return { quality: 'standard', factor: 1.0, sampleRate };
        } catch (error) {
            return { quality: 'standard', factor: 1.0, sampleRate: 'unknown' };
        }
    }

    static calculateBasicMetrics(sessionData, deviceInfo) {
        let totalError = 0;
        let totalNotes = 0;
        let excellentNotes = 0;
        let errors = [];

        sessionData.forEach(session => {
            if (!session.pitchErrors) return;
            session.pitchErrors.forEach(note => {
                const absError = Math.abs(note.errorInCents);
                totalError += absError;
                totalNotes++;
                errors.push(absError);
                if (absError <= 30) excellentNotes++;
            });
        });

        if (totalNotes === 0) {
            return { avgError: 50.0, excellenceRate: 0.5, stability: 15.0, totalNotes: 0 };
        }

        const outlierThreshold = 180;
        const validErrors = errors.filter(e => e <= outlierThreshold);
        const avgError = validErrors.length > 0
            ? validErrors.reduce((a, b) => a + b, 0) / validErrors.length
            : totalError / totalNotes;

        const excellenceRate = excellentNotes / totalNotes;
        const mean = validErrors.reduce((a, b) => a + b, 0) / validErrors.length;
        const variance = validErrors.reduce((a, b) => a + Math.pow(b - mean, 2), 0) / validErrors.length;
        const stability = Math.sqrt(variance);

        return {
            avgError: Math.round(avgError * 10) / 10,
            excellenceRate: Math.round(excellenceRate * 1000) / 1000,
            stability: Math.round(stability * 10) / 10,
            totalNotes
        };
    }

    static applyTechnicalAdjustment(basicMetrics, deviceInfo) {
        return {
            raw: basicMetrics,
            adjusted: {
                avgError: basicMetrics.avgError / deviceInfo.factor,
                excellenceRate: basicMetrics.excellenceRate,
                stability: basicMetrics.stability / deviceInfo.factor,
                totalNotes: basicMetrics.totalNotes
            }
        };
    }

    static getModeSpecificThresholds(actualSessions) {
        const sessionCount = actualSessions <= 8 ? 8 : actualSessions <= 12 ? 12 : 24;
        const thresholds = {
            8: { S: { avgError: 25, excellence: 0.70 }, A: { avgError: 35, excellence: 0.60 }, B: { avgError: 45, excellence: 0.50 }, C: { avgError: 55, excellence: 0.40 }, D: { avgError: 65, excellence: 0.30 }, E: { avgError: 80, excellence: 0.20 } },
            12: { S: { avgError: 20, excellence: 0.75 }, A: { avgError: 30, excellence: 0.65 }, B: { avgError: 40, excellence: 0.55 }, C: { avgError: 50, excellence: 0.45 }, D: { avgError: 60, excellence: 0.35 }, E: { avgError: 75, excellence: 0.25 } },
            24: { S: { avgError: 15, excellence: 0.80 }, A: { avgError: 25, excellence: 0.70 }, B: { avgError: 35, excellence: 0.60 }, C: { avgError: 45, excellence: 0.50 }, D: { avgError: 55, excellence: 0.40 }, E: { avgError: 70, excellence: 0.30 } }
        };
        return { thresholds: thresholds[sessionCount], sessionCount };
    }

    static determineGrade(adjustedMetrics, thresholds) {
        const grades = ['S', 'A', 'B', 'C', 'D', 'E'];
        for (const grade of grades) {
            const threshold = thresholds[grade];
            if (!threshold) continue;
            if (adjustedMetrics.avgError <= threshold.avgError &&
                adjustedMetrics.excellenceRate >= threshold.excellence) {
                return { grade, thresholds: threshold };
            }
        }
        return { grade: 'E', thresholds: thresholds.E || {} };
    }
}

// ãƒ€ãƒŸãƒ¼ã‚»ãƒƒã‚·ãƒ§ãƒ³ãƒ‡ãƒ¼ã‚¿ç”Ÿæˆ
function generateDummySession(sessionId) {
    const pitchErrors = [];
    for (let i = 0; i < 8; i++) {
        pitchErrors.push({
            step: i,
            errorInCents: (Math.random() - 0.5) * 60  // Â±30Â¢ã®ãƒ©ãƒ³ãƒ€ãƒ èª¤å·®
        });
    }
    return {
        sessionId,
        mode: 'random',
        startTime: Date.now() - sessionId * 1000000,
        pitchErrors
    };
}

// ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ãƒ†ã‚¹ãƒˆå®Ÿè¡Œ
setTimeout(() => {
    const output = document.getElementById('output');
    let log = 'â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”\n';
    log += 'ğŸ“Š è©•ä¾¡è¨ˆç®—ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ãƒ†ã‚¹ãƒˆçµæœ\n';
    log += 'â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”\n\n';

    // ãƒ‡ãƒã‚¤ã‚¹æƒ…å ±
    log += 'ğŸ–¥ï¸  ãƒ‡ãƒã‚¤ã‚¹æƒ…å ±:\n';
    log += `   UserAgent: ${navigator.userAgent}\n`;
    log += `   Platform: ${navigator.platform}\n\n`;

    // ãƒ†ã‚¹ãƒˆ1: 1ã‚»ãƒƒã‚·ãƒ§ãƒ³ã®è¨ˆç®—æ™‚é–“
    const singleSession = [generateDummySession(1)];
    const start1 = performance.now();
    const result1 = EvaluationCalculator.calculateDynamicGrade(singleSession);
    const end1 = performance.now();
    const time1 = (end1 - start1).toFixed(3);
    log += `âœ… ãƒ†ã‚¹ãƒˆ1: 1ã‚»ãƒƒã‚·ãƒ§ãƒ³è¨ˆç®—\n`;
    log += `   è¨ˆç®—æ™‚é–“: ${time1}ms\n`;
    log += `   ã‚°ãƒ¬ãƒ¼ãƒ‰: ${result1.grade}\n`;
    log += `   å¹³å‡èª¤å·®: ${result1.metrics.adjusted.avgError.toFixed(1)}Â¢\n\n`;

    // ãƒ†ã‚¹ãƒˆ2: 10ã‚»ãƒƒã‚·ãƒ§ãƒ³ã®è¨ˆç®—æ™‚é–“ï¼ˆå€‹åˆ¥è¨ˆç®—ï¼‰
    const sessions10 = Array.from({ length: 10 }, (_, i) => generateDummySession(i + 1));
    const start2 = performance.now();
    const results10 = sessions10.map(s => EvaluationCalculator.calculateDynamicGrade([s]));
    const end2 = performance.now();
    const time2 = (end2 - start2).toFixed(3);
    const avg2 = ((end2 - start2) / 10).toFixed(3);
    log += `âœ… ãƒ†ã‚¹ãƒˆ2: 10ã‚»ãƒƒã‚·ãƒ§ãƒ³å€‹åˆ¥è¨ˆç®—\n`;
    log += `   åˆè¨ˆæ™‚é–“: ${time2}ms\n`;
    log += `   å¹³å‡æ™‚é–“: ${avg2}ms/ã‚»ãƒƒã‚·ãƒ§ãƒ³\n\n`;

    // ãƒ†ã‚¹ãƒˆ3: 50ã‚»ãƒƒã‚·ãƒ§ãƒ³ã®è¨ˆç®—æ™‚é–“ï¼ˆrecordsè¡¨ç¤ºæƒ³å®šï¼‰
    const sessions50 = Array.from({ length: 50 }, (_, i) => generateDummySession(i + 1));
    const start3 = performance.now();
    const results50 = sessions50.map(s => EvaluationCalculator.calculateDynamicGrade([s]));
    const end3 = performance.now();
    const time3 = (end3 - start3).toFixed(3);
    const avg3 = ((end3 - start3) / 50).toFixed(3);
    log += `âœ… ãƒ†ã‚¹ãƒˆ3: 50ã‚»ãƒƒã‚·ãƒ§ãƒ³å€‹åˆ¥è¨ˆç®—ï¼ˆrecordsè¡¨ç¤ºæƒ³å®šï¼‰\n`;
    log += `   åˆè¨ˆæ™‚é–“: ${time3}ms\n`;
    log += `   å¹³å‡æ™‚é–“: ${avg3}ms/ã‚»ãƒƒã‚·ãƒ§ãƒ³\n`;

    // ä½“æ„Ÿé€Ÿåº¦è©•ä¾¡
    const time3Num = parseFloat(time3);
    let userExperience = '';
    if (time3Num < 16) {
        userExperience = 'å®Œå…¨ã«å³åº§ï¼ˆ60FPSç¶­æŒï¼‰';
    } else if (time3Num < 100) {
        userExperience = 'ä½“æ„Ÿçš„ã«å³åº§';
    } else if (time3Num < 300) {
        userExperience = 'è¨±å®¹ç¯„å›²';
    } else {
        userExperience = 'é…ã„ã¨æ„Ÿã˜ã‚‹å¯èƒ½æ€§ã‚ã‚Š';
    }
    log += `   ä½“æ„Ÿé€Ÿåº¦: ${userExperience}\n\n`;

    // ãƒ†ã‚¹ãƒˆ4: 100å›ç¹°ã‚Šè¿”ã—ï¼ˆçµ±è¨ˆçš„ä¿¡é ¼æ€§ï¼‰
    const times = [];
    for (let i = 0; i < 100; i++) {
        const session = [generateDummySession(i)];
        const s = performance.now();
        EvaluationCalculator.calculateDynamicGrade(session);
        const e = performance.now();
        times.push(e - s);
    }
    const avgTime = times.reduce((a, b) => a + b, 0) / times.length;
    const minTime = Math.min(...times);
    const maxTime = Math.max(...times);
    const medianTime = times.sort((a, b) => a - b)[50];

    log += `âœ… ãƒ†ã‚¹ãƒˆ4: 100å›ç¹°ã‚Šè¿”ã—çµ±è¨ˆ\n`;
    log += `   å¹³å‡: ${avgTime.toFixed(3)}ms\n`;
    log += `   ä¸­å¤®å€¤: ${medianTime.toFixed(3)}ms\n`;
    log += `   æœ€å°: ${minTime.toFixed(3)}ms\n`;
    log += `   æœ€å¤§: ${maxTime.toFixed(3)}ms\n\n`;

    // LocalStorageã‹ã‚‰ã®å®Ÿãƒ‡ãƒ¼ã‚¿ãƒ†ã‚¹ãƒˆ
    const realSessions = JSON.parse(localStorage.getItem('pitchpro_sessions') || '[]');
    if (realSessions.length > 0) {
        log += `âœ… ãƒ†ã‚¹ãƒˆ5: å®Ÿãƒ‡ãƒ¼ã‚¿ãƒ†ã‚¹ãƒˆï¼ˆlocalStorageï¼‰\n`;
        log += `   ä¿å­˜ã‚»ãƒƒã‚·ãƒ§ãƒ³æ•°: ${realSessions.length}ä»¶\n`;

        const testCount = Math.min(10, realSessions.length);
        const startReal = performance.now();
        const realResults = realSessions.slice(0, testCount).map(s => {
            try {
                return EvaluationCalculator.calculateDynamicGrade([s]);
            } catch (e) {
                console.error('è©•ä¾¡è¨ˆç®—ã‚¨ãƒ©ãƒ¼:', e, s);
                return null;
            }
        });
        const endReal = performance.now();
        const timeReal = (endReal - startReal).toFixed(3);

        const validResults = realResults.filter(r => r !== null);
        log += `   ãƒ†ã‚¹ãƒˆã‚»ãƒƒã‚·ãƒ§ãƒ³æ•°: ${testCount}ä»¶\n`;
        log += `   è¨ˆç®—æ™‚é–“: ${timeReal}ms\n`;
        log += `   æœ‰åŠ¹çµæœ: ${validResults.length}ä»¶\n`;
        log += `   å¹³å‡æ™‚é–“: ${(timeReal / testCount).toFixed(3)}ms/ã‚»ãƒƒã‚·ãƒ§ãƒ³\n`;

        if (validResults.length > 0) {
            const grades = validResults.map(r => r.grade);
            log += `   ã‚°ãƒ¬ãƒ¼ãƒ‰åˆ†å¸ƒ: ${grades.join(', ')}\n`;
        }
        log += '\n';
    } else {
        log += `âš ï¸  ãƒ†ã‚¹ãƒˆ5: å®Ÿãƒ‡ãƒ¼ã‚¿ãªã—\n`;
        log += `   localStorageã«ã‚»ãƒƒã‚·ãƒ§ãƒ³ãƒ‡ãƒ¼ã‚¿ãŒã‚ã‚Šã¾ã›ã‚“\n`;
        log += `   ãƒˆãƒ¬ãƒ¼ãƒ‹ãƒ³ã‚°ã‚’1å›å®Ÿè¡Œå¾Œã€å†åº¦ãƒ†ã‚¹ãƒˆã—ã¦ãã ã•ã„\n\n`;
    }

    // çµè«–
    log += 'â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”\n';
    log += 'ğŸ“Œ ç·åˆçµè«–:\n';
    log += 'â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”\n\n';

    log += `   ğŸ”¹ 1ã‚»ãƒƒã‚·ãƒ§ãƒ³å¹³å‡è¨ˆç®—æ™‚é–“: ${avgTime.toFixed(2)}ms\n`;
    log += `   ğŸ”¹ 50ã‚»ãƒƒã‚·ãƒ§ãƒ³è¡¨ç¤ºæ™‚é–“: ${time3}ms\n`;
    log += `   ğŸ”¹ ãƒ¦ãƒ¼ã‚¶ãƒ¼ä½“é¨“: ${userExperience}\n\n`;

    // æ¨å¥¨æ–¹é‡
    log += 'ğŸ’¡ æ¨å¥¨å®Ÿè£…æ–¹é‡:\n\n';

    if (time3Num < 100) {
        log += '   âœ… å‹•çš„è¨ˆç®—ã§å•é¡Œãªã—\n';
        log += '   âœ… ã‚­ãƒ£ãƒƒã‚·ãƒ¥ä¸è¦ï¼ˆè¨ˆç®—ã‚³ã‚¹ãƒˆãŒååˆ†ä½ã„ï¼‰\n';
        log += '   âœ… è©•ä¾¡åŸºæº–å¤‰æ›´ã«æŸ”è»Ÿã«å¯¾å¿œå¯èƒ½\n';
        log += '   âœ… ãƒ‡ãƒ¼ã‚¿ä¸€è²«æ€§ã‚’ä¿æŒ\n\n';
        log += '   ğŸ“ å®Ÿè£…æ–¹é‡:\n';
        log += '      - SessionDataRecorderã¯ç”Ÿãƒ‡ãƒ¼ã‚¿ã®ã¿ä¿å­˜\n';
        log += '      - records-controllerã§è¡¨ç¤ºæ™‚ã«å‹•çš„è¨ˆç®—\n';
        log += '      - è©•ä¾¡åŸºæº–å¤‰æ›´æ™‚ã‚‚éå»ãƒ‡ãƒ¼ã‚¿ã‚’æ­£ã—ãå†è©•ä¾¡\n';
    } else if (time3Num < 300) {
        log += '   âš ï¸  å‹•çš„è¨ˆç®—ã¯å¯èƒ½ã ãŒã‚­ãƒ£ãƒƒã‚·ãƒ¥æ¨å¥¨\n';
        log += '   âœ… ãƒ¡ãƒ¢ãƒªã‚­ãƒ£ãƒƒã‚·ãƒ¥ã§æœ€é©åŒ–\n';
        log += '   âœ… è©•ä¾¡åŸºæº–å¤‰æ›´æ™‚ã¯ã‚­ãƒ£ãƒƒã‚·ãƒ¥ã‚¯ãƒªã‚¢\n\n';
        log += '   ğŸ“ å®Ÿè£…æ–¹é‡:\n';
        log += '      - å‹•çš„è¨ˆç®— + Map()ãƒ™ãƒ¼ã‚¹ã®ã‚­ãƒ£ãƒƒã‚·ãƒ¥\n';
        log += '      - EvaluationCalculator.VERSIONã§ã‚­ãƒ£ãƒƒã‚·ãƒ¥ç®¡ç†\n';
    } else {
        log += '   âš ï¸  è¨ˆç®—ã‚³ã‚¹ãƒˆãŒé«˜ã„\n';
        log += '   âš ï¸  SessionDataRecorderã§äº‹å‰è¨ˆç®—æ¨å¥¨\n\n';
        log += '   ğŸ“ å®Ÿè£…æ–¹é‡:\n';
        log += '      - ã‚»ãƒƒã‚·ãƒ§ãƒ³ä¿å­˜æ™‚ã«è©•ä¾¡è¨ˆç®—ãƒ»ä¿å­˜\n';
        log += '      - è©•ä¾¡åŸºæº–å¤‰æ›´æ™‚ã¯å†è¨ˆç®—æ©Ÿèƒ½ã‚’å®Ÿè£…\n';
    }

    output.textContent = log;
    console.log(log);
}, 100);
</script>
<!-- Code injected by live-server -->
<script>
	// <![CDATA[  <-- For SVG support
	if ('WebSocket' in window) {
		(function () {
			function refreshCSS() {
				var sheets = [].slice.call(document.getElementsByTagName("link"));
				var head = document.getElementsByTagName("head")[0];
				for (var i = 0; i < sheets.length; ++i) {
					var elem = sheets[i];
					var parent = elem.parentElement || head;
					parent.removeChild(elem);
					var rel = elem.rel;
					if (elem.href && typeof rel != "string" || rel.length == 0 || rel.toLowerCase() == "stylesheet") {
						var url = elem.href.replace(/(&|\?)_cacheOverride=\d+/, '');
						elem.href = url + (url.indexOf('?') >= 0 ? '&' : '?') + '_cacheOverride=' + (new Date().valueOf());
					}
					parent.appendChild(elem);
				}
			}
			var protocol = window.location.protocol === 'http:' ? 'ws://' : 'wss://';
			var address = protocol + window.location.host + window.location.pathname + '/ws';
			var socket = new WebSocket(address);
			socket.onmessage = function (msg) {
				if (msg.data == 'reload') window.location.reload();
				else if (msg.data == 'refreshcss') refreshCSS();
			};
			if (sessionStorage && !sessionStorage.getItem('IsThisFirstTime_Log_From_LiveServer')) {
				console.log('Live reload enabled.');
				sessionStorage.setItem('IsThisFirstTime_Log_From_LiveServer', true);
			}
		})();
	}
	else {
		console.error('Upgrade your browser. This Browser is NOT supported WebSocket for Live-Reloading.');
	}
	// ]]>
</script>


</body>