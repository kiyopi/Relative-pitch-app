<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <!-- ã‚­ãƒ£ãƒƒã‚·ãƒ¥ç„¡åŠ¹åŒ– -->
    <meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate">
    <meta http-equiv="Pragma" content="no-cache">
    <meta http-equiv="Expires" content="0">
    <title>8vaç›¸å¯¾éŸ³æ„Ÿãƒˆãƒ¬ãƒ¼ãƒ‹ãƒ³ã‚° - ãƒ›ãƒ¼ãƒ </title>
    <link rel="stylesheet" href="styles/base.css?v=20251029005">
    <link rel="stylesheet" href="styles/results.css?v=20251029005">
    <link rel="stylesheet" href="styles/training.css?v=20251029005">
    <link rel="stylesheet" href="styles/voice-range.css?v=20251029005">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;700&display=swap" rel="stylesheet">

    <!-- Lucide Icons - unpkg CDN (å®‰å®šç‰ˆãƒ»ç‰¹å®šãƒãƒ¼ã‚¸ãƒ§ãƒ³æŒ‡å®š) -->
    <script src="https://unpkg.com/lucide@0.263.0/dist/umd/lucide.js"></script>

    <!-- JavaScript ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ« -->
    <script src="js/data-manager.js?v=20251029005"></script>
    <script src="js/navigation-manager.js?v=20251029005"></script>
    <script src="js/evaluation-calculator.js?v=20251029005"></script>
    <script src="js/controllers/session-data-recorder.js?v=20251029005"></script>
    <script src="pages/js/result-session-controller.js?v=20251029005"></script>
    <script src="js/core/pitchpro-v1.3.1.umd.js?v=20251029005"></script>

    <!-- éŸ³åŸŸãƒ†ã‚¹ãƒˆæ­£è¦ç‰ˆï¼ˆSPAå¯¾å¿œãƒ»æ¡ä»¶ä»˜ãåˆæœŸåŒ–ï¼‰ -->
    <script src="pages/js/voice-range-test.js?v=20251029005"></script>
    <!-- ã‚¿ã‚¤ãƒ ã‚¹ã‚¿ãƒ³ãƒ—æ–¹å¼ã§ã‚­ãƒ£ãƒƒã‚·ãƒ¥ã‚’å¼·åˆ¶ç„¡åŠ¹åŒ– -->
    <script>
        const script = document.createElement('script');
        script.src = `pages/js/preparation-pitchpro-cycle.js?t=${Date.now()}`;
        document.head.appendChild(script);
    </script>

    <!-- Tone.js Library (Required for PitchShifter) -->
    <script type="importmap">
    {
        "imports": {
            "tone": "https://cdn.jsdelivr.net/npm/tone@15.1.22/+esm"
        }
    }
    </script>

    <!-- PitchShifter Library -->
    <script type="module">
        import { PitchShifter } from './js/core/reference-tones.js?v=2.9.0&t=1128536049&nocache=1';
        import * as Tone from 'tone';

        window.PitchShifter = PitchShifter;
        window.Tone = Tone;

        console.log('âœ… PitchShifter loaded globally (v2.9.0 - Balanced Envelope)');
        console.log('ğŸ“¦ [CACHE BUSTER] Timestamp: 1128536049');
        console.log('âš™ï¸ [ENVELOPE] attack: 0.02s, sustain: 1.0s, release: 1.5s (2.52s total), curve: linear');
        console.log('âœ… Tone.js v15.1.22 (stable latest) loaded globally');
    </script>
</head>
<body>
    <div class="container">
        <!-- Header -->
        <header class="app-header">
                <div class="header-brand">
                    <div class="header-icon-wrapper">
                        <div class="header-icon">
                            <i data-lucide="music" class="icon-lg text-white"></i>
                        </div>
                    </div>
                    <div>
                        <h1 class="text-3xl font-bold text-white">8vaç›¸å¯¾éŸ³æ„Ÿãƒˆãƒ¬ãƒ¼ãƒ‹ãƒ³ã‚°</h1>
                        <p class="text-purple-200">ã‚ãªãŸã®éŸ³æ„Ÿã‚’ç§‘å­¦çš„ã«å‘ä¸Šã•ã›ã¾ã—ã‚‡ã†</p>
                    </div>
                </div>
                <!-- ãƒ¢ãƒã‚¤ãƒ«ç”¨ãƒãƒ³ãƒãƒ¼ã‚¬ãƒ¼ãƒ¡ãƒ‹ãƒ¥ãƒ¼ -->
                <button class="menu-toggle" id="menu-toggle">
                    <i data-lucide="menu" class="icon-md"></i>
                </button>
                
                <!-- PCç”¨ãƒŠãƒ“ã‚²ãƒ¼ã‚·ãƒ§ãƒ³ -->
                <nav class="header-nav" id="header-nav">
                    <button class="nav-button" onclick="location.hash='records'" title="ãƒˆãƒ¬ãƒ¼ãƒ‹ãƒ³ã‚°è¨˜éŒ²ã‚’è¦‹ã‚‹">
                        <i data-lucide="history" class="icon-md"></i>
                        <span class="nav-text">è¨˜éŒ²</span>
                    </button>
                    <button class="nav-button" onclick="location.hash='results'" title="ç·åˆè©•ä¾¡ã‚’è¦‹ã‚‹">
                        <i data-lucide="bar-chart-3" class="icon-md"></i>
                        <span class="nav-text">è©•ä¾¡</span>
                    </button>
                    <button class="nav-button">
                        <i data-lucide="settings" class="icon-md"></i>
                        <span class="nav-text">è¨­å®š</span>
                    </button>
                    <button class="nav-button">
                        <i data-lucide="share" class="icon-md"></i>
                        <span class="nav-text">å…±æœ‰</span>
                    </button>
                </nav>
        </header>

        <!-- Main Content Container for SPA -->
        <main id="app-root" class="wide-main">
            <!-- å‹•çš„ã«ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ãŒã“ã“ã«èª­ã¿è¾¼ã¾ã‚Œã¾ã™ -->
        </main>
        
        <!-- Footer -->
        <footer class="footer-base">
            <p class="footer-copyright">Â© 2024 8vaç›¸å¯¾éŸ³æ„Ÿãƒˆãƒ¬ãƒ¼ãƒ‹ãƒ³ã‚°ã‚¢ãƒ—ãƒª</p>
            <p class="footer-tagline">éŸ³æ¥½ã®æ–°ã—ã„æ‰‰ã‚’é–‹ã“ã†</p>
        </footer>
    </div>

    <!-- LucideåˆæœŸåŒ– -->
    <script src="js/lucide-init.js?v=20251028009"></script>

    <!-- SPA Router -->
    <script src="js/router.js?v=20251028009"></script>

    <!-- ãƒ¡ãƒ‹ãƒ¥ãƒ¼é–‹é–‰ã‚¹ã‚¯ãƒªãƒ—ãƒˆ -->
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            const menuToggle = document.getElementById('menu-toggle');
            const headerNav = document.getElementById('header-nav');
            
            menuToggle.addEventListener('click', function() {
                headerNav.classList.toggle('active');
                // ã‚¢ã‚¤ã‚³ãƒ³åˆ‡ã‚Šæ›¿ãˆ
                const icon = menuToggle.querySelector('i');
                if (icon) {
                    if (headerNav.classList.contains('active')) {
                        icon.setAttribute('data-lucide', 'x');
                    } else {
                        icon.setAttribute('data-lucide', 'menu');
                    }
                    // çµ±åˆåˆæœŸåŒ–é–¢æ•°ã‚’ä½¿ç”¨ï¼ˆå³åº§å®Ÿè¡Œãƒ¢ãƒ¼ãƒ‰ï¼‰
                    if (typeof window.initializeLucideIcons === 'function') {
                        window.initializeLucideIcons({ immediate: true });
                    }
                }
            });
            
            // å¤–å´ã‚¯ãƒªãƒƒã‚¯ã§é–‰ã˜ã‚‹
            document.addEventListener('click', function(event) {
                if (!menuToggle.contains(event.target) && !headerNav.contains(event.target)) {
                    headerNav.classList.remove('active');
                    const icon = menuToggle.querySelector('i');
                    if (icon) {
                        icon.setAttribute('data-lucide', 'menu');
                        // çµ±åˆåˆæœŸåŒ–é–¢æ•°ã‚’ä½¿ç”¨ï¼ˆå³åº§å®Ÿè¡Œãƒ¢ãƒ¼ãƒ‰ï¼‰
                        if (typeof window.initializeLucideIcons === 'function') {
                            window.initializeLucideIcons({ immediate: true });
                        }
                    }
                }
            });
        });
    </script>
</body>
</html>