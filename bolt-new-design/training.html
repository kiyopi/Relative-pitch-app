<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ãƒˆãƒ¬ãƒ¼ãƒ‹ãƒ³ã‚° - 8vaç›¸å¯¾éŸ³æ„Ÿãƒˆãƒ¬ãƒ¼ãƒ‹ãƒ³ã‚°</title>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/lucide/0.344.0/lucide.min.css" rel="stylesheet">
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <!-- Debug Navigation -->
    <nav class="debug-nav">
        <h4>Debug Nav</h4>
        <div class="nav-grid">
            <a href="index.html" class="nav-btn">
                <i data-lucide="home" style="width: 12px; height: 12px;"></i>
                <span>ãƒ›ãƒ¼ãƒ </span>
            </a>
            <a href="mic-test.html" class="nav-btn">
                <i data-lucide="mic" style="width: 12px; height: 12px;"></i>
                <span>ãƒã‚¤ã‚¯ãƒ†ã‚¹ãƒˆ</span>
            </a>
            <a href="training.html" class="nav-btn current">
                <i data-lucide="target" style="width: 12px; height: 12px;"></i>
                <span>ãƒˆãƒ¬ãƒ¼ãƒ‹ãƒ³ã‚°</span>
            </a>
            <a href="session-result.html" class="nav-btn">
                <i data-lucide="check-circle" style="width: 12px; height: 12px;"></i>
                <span>ã‚»ãƒƒã‚·ãƒ§ãƒ³çµæœ</span>
            </a>
            <a href="final-result.html" class="nav-btn">
                <i data-lucide="trophy" style="width: 12px; height: 12px;"></i>
                <span>ç·åˆçµæœ</span>
            </a>
        </div>
    </nav>

    <div class="container">
        <!-- ãƒ˜ãƒƒãƒ€ãƒ¼ -->
        <header class="page-header">
            <div class="page-header-icon page-header-icon-green">
                <i data-lucide="target" 
                   style="width: 48px; height: 48px; color: white; stroke-width: 2;"></i>
            </div>
            <div class="header-nav">
                <a href="index.html" class="nav-btn">
                    <i data-lucide="home" style="width: 16px; height: 16px;"></i>
                    <span>ãƒ›ãƒ¼ãƒ </span>
                </a>
                <div class="session-badge">
                    ã‚»ãƒƒã‚·ãƒ§ãƒ³ 1/8
                </div>
            </div>
            <h1 class="page-title">ãƒ©ãƒ³ãƒ€ãƒ åŸºéŸ³ãƒ¢ãƒ¼ãƒ‰</h1>
        </header>

        <!-- ãƒ¡ã‚¤ãƒ³ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ -->
        <main class="training-main">
            <!-- åŸºéŸ³ã‚¨ãƒªã‚¢ -->
            <section class="base-note-section">
                <div class="glass-card base-note-card">
                    <div class="card-icon">
                        <i data-lucide="music" style="width: 32px; height: 32px; color: #60a5fa;"></i>
                    </div>
                    <h2>åŸºéŸ³</h2>
                    <button class="btn btn-primary btn-large" id="play-base-note">
                        <i data-lucide="volume-2" style="width: 16px; height: 16px;"></i>
                        <span>åŸºéŸ³ã‚¹ã‚¿ãƒ¼ãƒˆ</span>
                    </button>
                </div>
            </section>

            <!-- çµ±åˆã‚¬ã‚¤ãƒ‰ã‚¨ãƒªã‚¢ -->
            <section class="guide-section">
                <div class="glass-card guide-card">
                    <!-- é€²è¡Œãƒãƒ¼ -->
                    <div class="progress-section">
                        <div class="progress-labels">
                            <span>åŸºéŸ³å†ç”Ÿ(2.0ç§’)</span>
                            <span>ä¼‘æ†©</span>
                            <span>é–‹å§‹</span>
                        </div>
                        <div class="progress-bar">
                            <div class="progress-fill" id="progress-fill"></div>
                            <div class="progress-marker">ğŸ¯</div>
                        </div>
                        <div class="progress-status">
                            <span>â†‘ç¾åœ¨ä½ç½®</span>
                            <span>â†‘ 0.5ç§’ ã‚¬ã‚¤ãƒ‰é–‹å§‹</span>
                        </div>
                    </div>

                    <!-- ãƒ‰ãƒ¬ãƒŸã‚¬ã‚¤ãƒ‰ -->
                    <div class="doremi-guide">
                        <div class="note-circles">
                            <div class="note-circle" data-note="ãƒ‰">ãƒ‰</div>
                            <div class="note-circle" data-note="ãƒ¬">ãƒ¬</div>
                            <div class="note-circle" data-note="ãƒŸ">ãƒŸ</div>
                            <div class="note-circle" data-note="ãƒ•ã‚¡">ãƒ•ã‚¡</div>
                            <div class="note-circle" data-note="ã‚½">ã‚½</div>
                            <div class="note-circle" data-note="ãƒ©">ãƒ©</div>
                            <div class="note-circle" data-note="ã‚·">ã‚·</div>
                            <div class="note-circle" data-note="ãƒ‰">ãƒ‰</div>
                        </div>
                        <div class="note-labels">
                            <span>ãƒ‰</span>
                            <span>ãƒ¬</span>
                            <span>ãƒŸ</span>
                            <span>ãƒ•ã‚¡</span>
                            <span>ã‚½</span>
                            <span>ãƒ©</span>
                            <span>ã‚·</span>
                            <span>ãƒ‰</span>
                        </div>
                    </div>
                </div>
            </section>

            <!-- éŸ³é‡ç¢ºèªã‚»ã‚¯ã‚·ãƒ§ãƒ³ -->
            <section class="volume-section">
                <div class="glass-card volume-card">
                    <h3>éŸ³é‡ç¢ºèª</h3>
                    <div class="volume-meter">
                        <div class="volume-bar">
                            <div class="volume-fill" id="volume-fill"></div>
                        </div>
                        <span class="volume-percentage" id="volume-percentage">60%</span>
                    </div>
                    <p class="volume-status" id="volume-status">é©åˆ‡ãªéŸ³é‡ã§ã™</p>
                </div>
            </section>
        </main>
    </div>

    <script src="https://unpkg.com/lucide@latest/dist/umd/lucide.js"></script>
    <script>
        lucide.createIcons();

        // åŸºéŸ³å†ç”Ÿãƒœã‚¿ãƒ³ã®å‡¦ç†
        document.getElementById('play-base-note').addEventListener('click', function() {
            startTraining();
        });

        function startTraining() {
            const button = document.getElementById('play-base-note');
            const progressFill = document.getElementById('progress-fill');
            
            // ãƒœã‚¿ãƒ³ã‚’ç„¡åŠ¹åŒ–
            button.disabled = true;
            button.innerHTML = '<i data-lucide="volume-2" style="width: 16px; height: 16px;"></i><span>å†ç”Ÿä¸­...</span>';
            
            // é€²è¡Œãƒãƒ¼ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³
            progressFill.style.width = '0%';
            progressFill.style.transition = 'width 2.5s linear';
            
            setTimeout(() => {
                progressFill.style.width = '100%';
            }, 100);
            
            // ãƒ‰ãƒ¬ãƒŸã‚¬ã‚¤ãƒ‰é–‹å§‹
            setTimeout(() => {
                startDoremiGuide();
            }, 2500);
        }

        function startDoremiGuide() {
            const circles = document.querySelectorAll('.note-circle');
            let currentIndex = 0;
            
            const interval = setInterval(() => {
                if (currentIndex > 0) {
                    circles[currentIndex - 1].classList.remove('current');
                    circles[currentIndex - 1].classList.add('completed');
                }
                
                if (currentIndex < circles.length) {
                    circles[currentIndex].classList.add('current');
                    currentIndex++;
                } else {
                    clearInterval(interval);
                    // ãƒˆãƒ¬ãƒ¼ãƒ‹ãƒ³ã‚°å®Œäº†å¾Œã®å‡¦ç†
                    setTimeout(() => {
                        window.location.href = 'session-result.html';
                    }, 1000);
                }
            }, 662.5); // 5.3ç§’ Ã· 8éŸ³ = 662.5ms
        }

        // éŸ³é‡ãƒ¡ãƒ¼ã‚¿ãƒ¼ã®ã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³
        function updateVolumeLevel() {
            const volumeFill = document.getElementById('volume-fill');
            const volumePercentage = document.getElementById('volume-percentage');
            const volumeStatus = document.getElementById('volume-status');
            
            // ãƒ©ãƒ³ãƒ€ãƒ ãªéŸ³é‡ãƒ¬ãƒ™ãƒ«ï¼ˆ50-80%ï¼‰
            const level = Math.floor(Math.random() * 30) + 50;
            
            volumeFill.style.width = level + '%';
            volumePercentage.textContent = level + '%';
            
            if (level >= 70) {
                volumeStatus.textContent = 'é©åˆ‡ãªéŸ³é‡ã§ã™';
                volumeStatus.style.color = '#22c55e';
            } else if (level >= 40) {
                volumeStatus.textContent = 'ã‚‚ã†å°‘ã—å¤§ãã';
                volumeStatus.style.color = '#f59e0b';
            } else {
                volumeStatus.textContent = 'éŸ³é‡ãŒå°ã•ã™ãã¾ã™';
                volumeStatus.style.color = '#ef4444';
            }
        }

        // éŸ³é‡ãƒ¬ãƒ™ãƒ«ã‚’å®šæœŸçš„ã«æ›´æ–°
        setInterval(updateVolumeLevel, 500);
    </script>
</body>
</html>