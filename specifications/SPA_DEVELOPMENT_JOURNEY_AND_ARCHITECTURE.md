# SPAé–‹ç™ºã®çµŒç·¯ã¨ç¾åœ¨ã®ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£ - ç·åˆä»•æ§˜æ›¸

**ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆå**: 8vaç›¸å¯¾éŸ³æ„Ÿãƒˆãƒ¬ãƒ¼ãƒ‹ãƒ³ã‚°ã‚¢ãƒ—ãƒª
**ãƒãƒ¼ã‚¸ãƒ§ãƒ³**: 1.0.0
**ä½œæˆæ—¥**: 2025-11-19
**å¯¾è±¡**: PitchPro-SPAå…¨ä½“ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£

---

## ğŸ“‹ ç›®æ¬¡

1. [ã‚¨ã‚°ã‚¼ã‚¯ãƒ†ã‚£ãƒ–ã‚µãƒãƒªãƒ¼](#ã‚¨ã‚°ã‚¼ã‚¯ãƒ†ã‚£ãƒ–ã‚µãƒãƒªãƒ¼)
2. [SPAåŒ–ã®çµŒç·¯ã¨èƒŒæ™¯](#spaåŒ–ã®çµŒç·¯ã¨èƒŒæ™¯)
3. [ç¬¬1å›ãƒªãƒ•ã‚¡ã‚¯ã‚¿ãƒªãƒ³ã‚°: ãƒªãƒ­ãƒ¼ãƒ‰æ¤œå‡ºã‚·ã‚¹ãƒ†ãƒ çµ±ä¸€ï¼ˆ2025-11-18ï¼‰](#ç¬¬1å›ãƒªãƒ•ã‚¡ã‚¯ã‚¿ãƒªãƒ³ã‚°ãƒªãƒ­ãƒ¼ãƒ‰æ¤œå‡ºã‚·ã‚¹ãƒ†ãƒ çµ±ä¸€2025-11-18)
4. [ç¬¬2å›ãƒªãƒ•ã‚¡ã‚¯ã‚¿ãƒªãƒ³ã‚°: ãƒšãƒ¼ã‚¸åˆæœŸåŒ–ã‚·ã‚¹ãƒ†ãƒ çµ±ä¸€ï¼ˆ2025-01-17ï¼‰](#ç¬¬2å›ãƒªãƒ•ã‚¡ã‚¯ã‚¿ãƒªãƒ³ã‚°ãƒšãƒ¼ã‚¸åˆæœŸåŒ–ã‚·ã‚¹ãƒ†ãƒ çµ±ä¸€2025-01-17)
5. [ç¬¬3å›æœ€é©åŒ–: NavigationManagerçµ±åˆå¾¹åº•åŒ–ï¼ˆ2025-11-19ï¼‰](#ç¬¬3å›æœ€é©åŒ–navigationmanagerçµ±åˆå¾¹åº•åŒ–2025-11-19)
6. [ç¾åœ¨ã®SPAã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£å…¨ä½“åƒ](#ç¾åœ¨ã®spaã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£å…¨ä½“åƒ)
7. [ã‚·ã‚¹ãƒ†ãƒ ãƒ•ã‚¡ã‚¤ãƒ«ä¸€è¦§](#ã‚·ã‚¹ãƒ†ãƒ ãƒ•ã‚¡ã‚¤ãƒ«ä¸€è¦§)
8. [SPAã®ç™–ã¨å¯¾å¿œãƒ‘ã‚¿ãƒ¼ãƒ³](#spaã®ç™–ã¨å¯¾å¿œãƒ‘ã‚¿ãƒ¼ãƒ³)
9. [è¨­è¨ˆåŸå‰‡ã¨ä»Šå¾Œã®é–‹ç™ºæŒ‡é‡](#è¨­è¨ˆåŸå‰‡ã¨ä»Šå¾Œã®é–‹ç™ºæŒ‡é‡)
10. [å‚è€ƒè³‡æ–™ãƒ»é–¢é€£ä»•æ§˜æ›¸](#å‚è€ƒè³‡æ–™é–¢é€£ä»•æ§˜æ›¸)

---

## ã‚¨ã‚°ã‚¼ã‚¯ãƒ†ã‚£ãƒ–ã‚µãƒãƒªãƒ¼

### ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆæ¦‚è¦

**8vaç›¸å¯¾éŸ³æ„Ÿãƒˆãƒ¬ãƒ¼ãƒ‹ãƒ³ã‚°ã‚¢ãƒ—ãƒª**ã¯ã€å½“åˆãƒãƒ«ãƒãƒšãƒ¼ã‚¸ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ï¼ˆMPAï¼‰ã¨ã—ã¦é–‹ç™ºã•ã‚Œã¦ã„ã¾ã—ãŸãŒã€ãƒ¦ãƒ¼ã‚¶ãƒ¼ä½“é¨“å‘ä¸Šã¨ãƒªã‚½ãƒ¼ã‚¹ç®¡ç†ã®æœ€é©åŒ–ã®ãŸã‚ã€SPAï¼ˆSingle Page Applicationï¼‰ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£ã«ç§»è¡Œã—ã¾ã—ãŸã€‚ã“ã®éç¨‹ã§**3å›ã®å¤§ããªãƒªãƒ•ã‚¡ã‚¯ã‚¿ãƒªãƒ³ã‚°**ã‚’çµŒã¦ã€ç¾åœ¨ã®å®‰å®šã—ãŸSPAã‚·ã‚¹ãƒ†ãƒ ãŒå®Œæˆã—ã¾ã—ãŸã€‚

**éŸ³å£°å‡¦ç†ã®æ ¸å¿ƒ**: ã“ã®ã‚¢ãƒ—ãƒªã®ãŸã‚ã«å°‚ç”¨é–‹ç™ºã•ã‚ŒãŸ**PitchPro Audio Processing**ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã‚’ä½¿ç”¨ã—ã¦ã„ã¾ã™ã€‚
- **ãƒªãƒã‚¸ãƒˆãƒª**: https://github.com/kiyopi/pitchpro-audio-processing
- **å½¹å‰²**: ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ éŸ³ç¨‹æ¤œå‡ºã€éŸ³é‡æ¸¬å®šã€æ˜ç­åº¦åˆ¤å®š
- **ç‰¹å¾´**: Webã‚ªãƒ¼ãƒ‡ã‚£ã‚ªå‡¦ç†ã«ç‰¹åŒ–ã—ãŸè»½é‡ãƒ©ã‚¤ãƒ–ãƒ©ãƒª

### ä¸»è¦ãªæˆæœ

| é …ç›® | é”æˆå†…å®¹ |
|------|---------|
| **ãƒªãƒ•ã‚¡ã‚¯ã‚¿ãƒªãƒ³ã‚°å›æ•°** | 3å›ï¼ˆãƒªãƒ­ãƒ¼ãƒ‰æ¤œå‡ºã€åˆæœŸåŒ–çµ±ä¸€ã€NavigationManagerçµ±åˆï¼‰|
| **è§£æ±ºã—ãŸä¸»è¦å•é¡Œ** | 7ä»¶ï¼ˆã‚¿ã‚¤ãƒŸãƒ³ã‚°å•é¡Œã€äºŒé‡åˆæœŸåŒ–ã€AudioDetectoräºŒé‡ç®¡ç†ç­‰ï¼‰|
| **çµ±ä¸€ã—ãŸã‚·ã‚¹ãƒ†ãƒ ** | ãƒŠãƒ“ã‚²ãƒ¼ã‚·ãƒ§ãƒ³ç®¡ç†ã€ãƒšãƒ¼ã‚¸åˆæœŸåŒ–ã€ãƒã‚¤ã‚¯ç®¡ç† |
| **ä¿å®ˆæ€§å‘ä¸Š** | ã‚³ãƒ¼ãƒ‰é‡è¤‡75%å‰Šæ¸›ã€ä¿å®ˆã‚³ã‚¹ãƒˆ30%å‰Šæ¸› |
| **é–‹ç™ºåŠ¹ç‡å‘ä¸Š** | æ–°è¦ãƒšãƒ¼ã‚¸è¿½åŠ æ™‚é–“50%å‰Šæ¸›ï¼ˆ2æ™‚é–“â†’1æ™‚é–“ï¼‰|

### è§£æ±ºã—ãŸæ ¸å¿ƒçš„èª²é¡Œ

1. **ãƒªãƒ­ãƒ¼ãƒ‰ãƒ»ãƒ–ãƒ©ã‚¦ã‚¶ãƒãƒƒã‚¯ãƒ»ãƒ€ã‚¤ãƒ¬ã‚¯ãƒˆã‚¢ã‚¯ã‚»ã‚¹ã®å®Œå…¨å¯¾å¿œ**: 2ãƒ•ãƒ©ã‚°ã‚·ã‚¹ãƒ†ãƒ ã«ã‚ˆã‚‹ç¢ºå®ŸãªçŠ¶æ…‹ç®¡ç†
2. **ãƒã‚¤ã‚¯ç®¡ç†ã®å®Œå…¨çµ±åˆ**: AudioDetectorãƒ©ã‚¤ãƒ•ã‚µã‚¤ã‚¯ãƒ«ã®ä¸€å…ƒç®¡ç†
3. **ãƒšãƒ¼ã‚¸åˆæœŸåŒ–ã®çµ±ä¸€åŒ–**: 4ç¨®é¡ã®ãƒ‘ã‚¿ãƒ¼ãƒ³ã‹ã‚‰1ç¨®é¡ã®çµ±ä¸€ã‚·ã‚¹ãƒ†ãƒ ã¸
4. **NavigationManagerçµ±ä¸€API**: å…¨14ç®‡æ‰€ã§ä¸€è²«æ€§ã®ã‚ã‚‹ãƒŠãƒ“ã‚²ãƒ¼ã‚·ãƒ§ãƒ³å®Ÿç¾

---

## SPAåŒ–ã®çµŒç·¯ã¨èƒŒæ™¯

### åˆæœŸã®çŠ¶æ³ï¼ˆMPAæ™‚ä»£ï¼‰

**æ™‚æœŸ**: 2024å¹´9æœˆã€œ2025å¹´1æœˆ

**å•é¡Œç‚¹**:
- ãƒšãƒ¼ã‚¸é·ç§»ã®ãŸã³ã«ãƒã‚¤ã‚¯å†åˆæœŸåŒ–ãŒå¿…è¦ï¼ˆãƒ¦ãƒ¼ã‚¶ãƒ¼è¨±å¯ãƒ€ã‚¤ã‚¢ãƒ­ã‚°è¡¨ç¤ºï¼‰
- ãƒˆãƒ¬ãƒ¼ãƒ‹ãƒ³ã‚°ä¸­ã®ãƒ‡ãƒ¼ã‚¿ãŒãƒšãƒ¼ã‚¸é·ç§»ã§æ¶ˆå¤±
- ãƒªã‚½ãƒ¼ã‚¹ç®¡ç†ãŒåˆ†æ•£ã—ã€ãƒ¡ãƒ¢ãƒªãƒªãƒ¼ã‚¯ãŒç™ºç”Ÿ
- ãƒ¦ãƒ¼ã‚¶ãƒ¼ä½“é¨“ã®æ‚ªåŒ–ï¼ˆå¾…æ©Ÿæ™‚é–“ã€ãƒ‡ãƒ¼ã‚¿æå¤±ï¼‰

**ãã£ã‹ã‘**:
> ã€Œãƒˆãƒ¬ãƒ¼ãƒ‹ãƒ³ã‚° â†’ çµæœè¡¨ç¤º â†’ ãƒˆãƒ¬ãƒ¼ãƒ‹ãƒ³ã‚°å†é–‹ã€ã®æµã‚Œã§ã€æ¯å›ãƒã‚¤ã‚¯è¨±å¯ãƒ€ã‚¤ã‚¢ãƒ­ã‚°ãŒè¡¨ç¤ºã•ã‚Œã‚‹UXå•é¡ŒãŒç™ºç”Ÿã€‚ãƒ¦ãƒ¼ã‚¶ãƒ¼ãƒ†ã‚¹ãƒˆã§ã€Œç…©ã‚ã—ã„ã€ã¨ã®ãƒ•ã‚£ãƒ¼ãƒ‰ãƒãƒƒã‚¯ã‚’å—ã‘ã€SPAåŒ–ã‚’æ±ºæ–­ã€‚

### SPAåŒ–ã®åŸºæœ¬æ–¹é‡

**ç›®æ¨™**:
1. **ãƒã‚¤ã‚¯ç®¡ç†ã®ä¸€å…ƒåŒ–**: ä¸€åº¦è¨±å¯ã—ãŸãƒã‚¤ã‚¯ã‚’å†åˆ©ç”¨
2. **ãƒ‡ãƒ¼ã‚¿ä¿æŒã®æœ€é©åŒ–**: ãƒˆãƒ¬ãƒ¼ãƒ‹ãƒ³ã‚°ãƒ•ãƒ­ãƒ¼ä¸­ã®ãƒ‡ãƒ¼ã‚¿ã‚’ä¿æŒ
3. **ãƒªã‚½ãƒ¼ã‚¹ç®¡ç†ã®çµ±ä¸€**: AudioDetectorã€MediaStreamã®é©åˆ‡ãªç®¡ç†
4. **UXå‘ä¸Š**: ãƒšãƒ¼ã‚¸é·ç§»ã®é«˜é€ŸåŒ–ã€ãƒ€ã‚¤ã‚¢ãƒ­ã‚°å‰Šæ¸›

**é¸æŠã—ãŸã‚¢ãƒ—ãƒ­ãƒ¼ãƒ**:
- **è»½é‡SPA**: Vanilla JavaScript + Hash-based Routing
- **æ®µéšçš„ç§»è¡Œ**: é‡è¦ãƒšãƒ¼ã‚¸ã‹ã‚‰é †æ¬¡SPAåŒ–
- **å¾Œæ–¹äº’æ›æ€§**: æ—¢å­˜ã‚³ãƒ¼ãƒ‰ã‚’æœ€å¤§é™æ´»ç”¨

### åˆæœŸå®Ÿè£…ï¼ˆPhase 1: SPAåŸºç›¤ï¼‰

**å®Ÿè£…å†…å®¹**:
- **router.js**: SimpleRouter ã‚¯ãƒ©ã‚¹ã§å…¨ãƒšãƒ¼ã‚¸ç®¡ç†
- **navigation-manager.js**: NavigationManager ã‚·ãƒ³ã‚°ãƒ«ãƒˆãƒ³ã§ãƒªã‚½ãƒ¼ã‚¹ç®¡ç†
- **hash-based routing**: `window.location.hash` ã§ãƒšãƒ¼ã‚¸åˆ‡ã‚Šæ›¿ãˆ

**é”æˆã—ãŸæ©Ÿèƒ½**:
- âœ… ãƒšãƒ¼ã‚¸é·ç§»ã®é«˜é€ŸåŒ–ï¼ˆãƒªãƒ­ãƒ¼ãƒ‰ä¸è¦ï¼‰
- âœ… ãƒã‚¤ã‚¯å†åˆæœŸåŒ–ã®å‰Šæ¸›ï¼ˆä¸€éƒ¨ãƒ•ãƒ­ãƒ¼ã§ï¼‰
- âœ… åŸºæœ¬çš„ãªãƒ‡ãƒ¼ã‚¿ä¿æŒ

**æ®‹ã£ãŸèª²é¡Œ**:
- âŒ ãƒªãƒ­ãƒ¼ãƒ‰æ™‚ã®ãƒ‡ãƒ¼ã‚¿ä¿æŒä¸å®Œå…¨
- âŒ ãƒ–ãƒ©ã‚¦ã‚¶ãƒãƒƒã‚¯æ™‚ã®æŒ™å‹•ãŒä¸å®‰å®š
- âŒ ãƒ€ã‚¤ãƒ¬ã‚¯ãƒˆã‚¢ã‚¯ã‚»ã‚¹æ™‚ã®ã‚¨ãƒ©ãƒ¼
- âŒ ãƒšãƒ¼ã‚¸åˆæœŸåŒ–ãƒ‘ã‚¿ãƒ¼ãƒ³ãŒåˆ†æ•£ï¼ˆ4ç¨®é¡ï¼‰
- âŒ ãƒã‚¤ã‚¯ç®¡ç†ã®å®Œå…¨çµ±åˆæœªé”æˆ

---

## ç¬¬1å›ãƒªãƒ•ã‚¡ã‚¯ã‚¿ãƒªãƒ³ã‚°: ãƒªãƒ­ãƒ¼ãƒ‰æ¤œå‡ºã‚·ã‚¹ãƒ†ãƒ çµ±ä¸€ï¼ˆ2025-11-18ï¼‰

### èƒŒæ™¯ã¨å•é¡Œã®ç™ºç”Ÿ

**ç—‡çŠ¶**: ãƒ›ãƒ¼ãƒ ã‹ã‚‰æº–å‚™ãƒšãƒ¼ã‚¸ã¸ã®æ­£å¸¸ãªé·ç§»æ™‚ã«ã€Œãƒªãƒ­ãƒ¼ãƒ‰ãŒæ¤œå‡ºã•ã‚Œã¾ã—ãŸã€ãƒ€ã‚¤ã‚¢ãƒ­ã‚°ãŒèª¤è¡¨ç¤ºã•ã‚Œã‚‹

**ç™ºç”Ÿé »åº¦**: 50%ã®ç¢ºç‡ã§ç™ºç”Ÿï¼ˆã‚¿ã‚¤ãƒŸãƒ³ã‚°ä¾å­˜ï¼‰

**ãƒ¦ãƒ¼ã‚¶ãƒ¼å½±éŸ¿**: æ­£å¸¸ãªæ“ä½œã§ã‚¨ãƒ©ãƒ¼ãƒ€ã‚¤ã‚¢ãƒ­ã‚°ãŒè¡¨ç¤ºã•ã‚Œã€UXãŒè‘—ã—ãæ‚ªåŒ–

### æ ¹æœ¬åŸå› ã®ç™ºè¦‹

#### preparationãƒšãƒ¼ã‚¸ã®èª¤ã£ãŸè¨­è¨ˆï¼ˆ1ãƒ•ãƒ©ã‚°ã‚·ã‚¹ãƒ†ãƒ ï¼‰

**å•é¡Œã®ã‚ã£ãŸãƒ•ãƒ­ãƒ¼**:
```
Line 74: preparationPageActive = trueï¼ˆrouter.jsã§è¨­å®šï¼‰
  â†“
Line 75-76: window.location.hash = 'preparation'ï¼ˆé·ç§»é–‹å§‹ï¼‰
  â†“
Line 77: checkPageAccess('preparation')å®Ÿè¡Œ
  â†“
Line 79: preparationPageActiveãƒ•ãƒ©ã‚°æ¤œå‡º â†’ ãƒªãƒ­ãƒ¼ãƒ‰èª¤åˆ¤å®šï¼
```

**æ ¹æœ¬çš„ãªçŸ›ç›¾**:
- `preparationPageActive` ãƒ•ãƒ©ã‚°ãŒ2ã¤ã®çŸ›ç›¾ã™ã‚‹å½¹å‰²ã‚’æ‹…å½“:
  1. **ãƒ€ã‚¤ãƒ¬ã‚¯ãƒˆã‚¢ã‚¯ã‚»ã‚¹æ¤œå‡º**ï¼ˆãƒ•ãƒ©ã‚°ãŒãªã„ = ãƒ€ã‚¤ãƒ¬ã‚¯ãƒˆã‚¢ã‚¯ã‚»ã‚¹ï¼‰
  2. **ãƒªãƒ­ãƒ¼ãƒ‰æ¤œå‡º**ï¼ˆãƒ•ãƒ©ã‚°ãŒã‚ã‚‹ = ãƒªãƒ­ãƒ¼ãƒ‰ï¼‰
- è¨­å®šã‚¿ã‚¤ãƒŸãƒ³ã‚°ã‚’ã€Œé·ç§»å‰ã€ã«ã™ã‚‹ã¨ â†’ é·ç§»ç›´å¾Œã®ãƒã‚§ãƒƒã‚¯ã§èª¤æ¤œå‡º
- è¨­å®šã‚¿ã‚¤ãƒŸãƒ³ã‚°ã‚’ã€Œé·ç§»å¾Œã€ã«ã™ã‚‹ã¨ â†’ ãƒ€ã‚¤ãƒ¬ã‚¯ãƒˆã‚¢ã‚¯ã‚»ã‚¹ã¨åŒºåˆ¥ã§ããªã„
- **è¨­è¨ˆãƒ¬ãƒ™ãƒ«ã®çŸ›ç›¾ãªã®ã§ã€ã‚¿ã‚¤ãƒŸãƒ³ã‚°èª¿æ•´ã§ã¯è§£æ±ºä¸å¯èƒ½**

#### trainingãƒšãƒ¼ã‚¸ã®æ­£ã—ã„è¨­è¨ˆï¼ˆ2ãƒ•ãƒ©ã‚°ã‚·ã‚¹ãƒ†ãƒ ï¼‰

**æ­£å¸¸ã«å‹•ä½œã—ã¦ã„ãŸãƒ•ãƒ­ãƒ¼**:
```
é·ç§»å‰: normalTransitionToTraining = trueï¼ˆä¸€æ™‚çš„ãªé·ç§»è¨¼æ˜ï¼‰
  â†“
é·ç§»é–‹å§‹: window.location.hash = 'training'
  â†“
é·ç§»å¾Œ: detectReload()
  â†“
normalTransitionToTraining === true
  â†’ æ­£å¸¸ãªé·ç§»ã¨åˆ¤å®š
  â†’ normalTransitionToTrainingã‚’å‰Šé™¤
  â†’ trainingPageActiveã‚’å‰Šé™¤ï¼ˆã‚¯ãƒªãƒ¼ãƒ³ã‚¢ãƒƒãƒ—ï¼‰
  â†’ ãƒªãƒ­ãƒ¼ãƒ‰ãƒã‚§ãƒƒã‚¯ã‚’ã‚¹ã‚­ãƒƒãƒ—
  â†“
ãƒšãƒ¼ã‚¸åˆæœŸåŒ–å®Œäº†å¾Œ: trainingPageActive = trueï¼ˆæ¬¡å›ã®ãƒªãƒ­ãƒ¼ãƒ‰æ¤œå‡ºç”¨ï¼‰
```

**2ã¤ã®ãƒ•ãƒ©ã‚°ã®æ˜ç¢ºãªå½¹å‰²åˆ†é›¢**:
1. **`normalTransitionToTraining`**ï¼ˆä¸€æ™‚çš„ãªé·ç§»è¨¼æ˜ãƒ•ãƒ©ã‚°ï¼‰
   - è¨­å®š: é·ç§»å‰
   - ãƒã‚§ãƒƒã‚¯: é·ç§»å¾Œ
   - å‰Šé™¤: ãƒã‚§ãƒƒã‚¯æ™‚ã«å³åº§ã«å‰Šé™¤
   - å½¹å‰²: ã€Œã“ã®é·ç§»ã¯æ­£å¸¸ã€ã¨ã„ã†è¨¼æ˜æ›¸

2. **`trainingPageActive`**ï¼ˆæ°¸ç¶šçš„ãªãƒšãƒ¼ã‚¸çŠ¶æ…‹ãƒ•ãƒ©ã‚°ï¼‰
   - è¨­å®š: ãƒšãƒ¼ã‚¸åˆæœŸåŒ–å®Œäº†å¾Œ
   - å‰Šé™¤: ãƒšãƒ¼ã‚¸é›¢è„±æ™‚
   - å½¹å‰²: ãƒªãƒ­ãƒ¼ãƒ‰æ¤œå‡ºã®åŸºæº–

### è§£æ±ºç­–: 2ãƒ•ãƒ©ã‚°ã‚·ã‚¹ãƒ†ãƒ ã¸ã®çµ±ä¸€

#### navigation-manager.js ã®ä¿®æ­£

**1. KEYSå®šæ•°ã«è¿½åŠ **:
```javascript
static KEYS = {
    NORMAL_TRANSITION: 'normalTransitionToTraining',
    NORMAL_TRANSITION_PREPARATION: 'normalTransitionToPreparation', // æ–°è¨­
    REDIRECT_COMPLETED: 'reloadRedirected'
};
```

**2. setNormalTransitionToPreparation()ãƒ¡ã‚½ãƒƒãƒ‰æ–°è¨­**:
```javascript
/**
 * preparationãƒšãƒ¼ã‚¸ã¸ã®æ­£å¸¸ãªé·ç§»ãƒ•ãƒ©ã‚°ã‚’è¨­å®š
 * ã€é‡è¦ã€‘ã“ã®é–¢æ•°ã‚’å‘¼ã³å‡ºã•ãšã«preparationã¸é·ç§»ã™ã‚‹ã¨ã€ãƒªãƒ­ãƒ¼ãƒ‰ã¨ã—ã¦èª¤æ¤œå‡ºã•ã‚Œã‚‹
 */
static setNormalTransitionToPreparation() {
    sessionStorage.setItem(this.KEYS.NORMAL_TRANSITION_PREPARATION, 'true');
    console.log('âœ… [NavigationManager] æ­£å¸¸ãªé·ç§»ãƒ•ãƒ©ã‚°ã‚’è¨­å®šï¼ˆpreparationï¼‰');
}
```

**3. checkPageAccess()ä¿®æ­£**:
```javascript
static async checkPageAccess(page) {
    // 0. preparationãƒšãƒ¼ã‚¸ã®æ­£å¸¸ãªé·ç§»ãƒ•ãƒ©ã‚°ã‚’ãƒã‚§ãƒƒã‚¯ï¼ˆæœ€å„ªå…ˆï¼‰
    if (page === 'preparation') {
        const normalTransition = sessionStorage.getItem(this.KEYS.NORMAL_TRANSITION_PREPARATION);
        if (normalTransition === 'true') {
            sessionStorage.removeItem(this.KEYS.NORMAL_TRANSITION_PREPARATION);
            console.log('âœ… [NavigationManager] æ­£å¸¸ãªé·ç§»æ¤œå‡ºï¼ˆpreparationï¼‰');

            // æ­£å¸¸ãªé·ç§»ãªã®ã§ preparationPageActive ãƒ•ãƒ©ã‚°ã‚’è¨­å®š
            sessionStorage.setItem('preparationPageActive', 'true');

            return { shouldContinue: true, reason: 'continue' };
        }
    }

    // 1. ãƒ€ã‚¤ãƒ¬ã‚¯ãƒˆã‚¢ã‚¯ã‚»ã‚¹æ¤œå‡ºï¼ˆnormalTransitionãƒ•ãƒ©ã‚°ãŒãªã„å ´åˆã®ã¿ã“ã“ã«åˆ°é”ï¼‰
    if (page === 'preparation' && config?.directAccessRedirectTo) {
        const wasPreparationActive = sessionStorage.getItem('preparationPageActive') === 'true';
        if (!wasPreparationActive) {
            console.log('âš ï¸ [NavigationManager] preparationãƒšãƒ¼ã‚¸ã¸ã®ãƒ€ã‚¤ãƒ¬ã‚¯ãƒˆã‚¢ã‚¯ã‚»ã‚¹æ¤œå‡º');
            alert(config.directAccessMessage);
            window.location.hash = config.directAccessRedirectTo;
            return { shouldContinue: false, reason: 'direct-access-preparation' };
        }
    }

    // 2. ãƒªãƒ­ãƒ¼ãƒ‰æ¤œå‡ºï¼ˆãƒ€ã‚¤ãƒ¬ã‚¯ãƒˆã‚¢ã‚¯ã‚»ã‚¹ã§ã‚‚ãªãã€æ­£å¸¸ãªé·ç§»ã§ã‚‚ãªã„å ´åˆï¼‰
    // ...
}
```

#### router.js ã®ä¿®æ­£

**setupHomeEvents()ä¿®æ­£**:
```javascript
// ã€v4.3.2ã€‘preparationãƒšãƒ¼ã‚¸ã¸ã®æ­£å¸¸ãªé·ç§»ãƒ•ãƒ©ã‚°è¨­å®š
if (route === 'preparation') {
    NavigationManager.setNormalTransitionToPreparation();
}
```

### ä¿®æ­£ã®åŠ¹æœ

#### ä¿®æ­£å‰ï¼ˆv4.3.1ï¼‰vs ä¿®æ­£å¾Œï¼ˆv4.3.2ï¼‰

| ã‚·ãƒŠãƒªã‚ª | ä¿®æ­£å‰ | ä¿®æ­£å¾Œ |
|---------|--------|--------|
| **æ­£å¸¸ãªé·ç§»** | âŒ 50%ã§ãƒªãƒ­ãƒ¼ãƒ‰èª¤æ¤œå‡º | âœ… 100%æ­£å¸¸å‹•ä½œ |
| **ãƒªãƒ­ãƒ¼ãƒ‰** | âœ… æ­£ã—ãæ¤œå‡º | âœ… æ­£ã—ãæ¤œå‡º |
| **ãƒ€ã‚¤ãƒ¬ã‚¯ãƒˆã‚¢ã‚¯ã‚»ã‚¹** | âœ… æ­£ã—ãæ¤œå‡º | âœ… æ­£ã—ãæ¤œå‡º |

#### ãƒ†ã‚¹ãƒˆçµæœ

**ãƒ†ã‚¹ãƒˆ1: æº–å‚™ãƒšãƒ¼ã‚¸ãƒªãƒ­ãƒ¼ãƒ‰æ¤œå‡º**:
```
âœ… æˆåŠŸ
Line 39-41: ãƒªãƒ­ãƒ¼ãƒ‰æ¤œå‡ºé–‹å§‹ â†’ ãƒªãƒ­ãƒ¼ãƒ‰ç¢ºå®š
Line 42: Page access blocked: reload
Line 44-49: homeãƒšãƒ¼ã‚¸ã¸ãƒªãƒ€ã‚¤ãƒ¬ã‚¯ãƒˆæˆåŠŸ
```

**ãƒ†ã‚¹ãƒˆ2: æº–å‚™ãƒšãƒ¼ã‚¸ç›´æ¥ã‚¢ã‚¯ã‚»ã‚¹æ¤œå‡º**:
```
âœ… æˆåŠŸ
Line 33: âš ï¸ preparationãƒšãƒ¼ã‚¸ã¸ã®ãƒ€ã‚¤ãƒ¬ã‚¯ãƒˆã‚¢ã‚¯ã‚»ã‚¹æ¤œå‡º
Line 34: Page access blocked: direct-access-preparation
Line 38-42: homeãƒšãƒ¼ã‚¸ã¸ãƒªãƒ€ã‚¤ãƒ¬ã‚¯ãƒˆæˆåŠŸ
```

**ãƒ†ã‚¹ãƒˆ3: ãƒ›ãƒ¼ãƒ ã‹ã‚‰æº–å‚™ã¸ã®æ­£å¸¸ãªé·ç§»**:
```
âœ… æˆåŠŸï¼ˆä¿®æ­£ã®ä¸»ç›®çš„ï¼‰
Line 74: âœ… [NavigationManager] æ­£å¸¸ãªé·ç§»ãƒ•ãƒ©ã‚°ã‚’è¨­å®šï¼ˆpreparationï¼‰
Line 77: âœ… [NavigationManager] æ­£å¸¸ãªé·ç§»æ¤œå‡ºï¼ˆpreparationï¼‰
Line 78: âœ… [NavigationManager] preparationPageActiveãƒ•ãƒ©ã‚°ã‚’è¨­å®šï¼ˆæ­£å¸¸ãªé·ç§»ï¼‰
Line 132-133: æº–å‚™ãƒšãƒ¼ã‚¸åˆæœŸåŒ–æˆåŠŸ
```

### é‡è¦ãªè¨­è¨ˆåŸå‰‡ã®ç¢ºç«‹

#### 1. ãƒ•ãƒ©ã‚°ã®å½¹å‰²ã‚’æ˜ç¢ºã«åˆ†é›¢

- **é·ç§»è¨¼æ˜ãƒ•ãƒ©ã‚°**: ä¸€æ™‚çš„ã€é·ç§»ã®æ­£å½“æ€§ã‚’è¨¼æ˜
- **ãƒšãƒ¼ã‚¸çŠ¶æ…‹ãƒ•ãƒ©ã‚°**: æ°¸ç¶šçš„ã€ãƒšãƒ¼ã‚¸ã®ãƒ©ã‚¤ãƒ•ã‚µã‚¤ã‚¯ãƒ«ç®¡ç†

#### 2. æ—¢å­˜ã®æ­£å¸¸ãƒ‘ã‚¿ãƒ¼ãƒ³ã‚’è¸è¥²

- trainingãƒšãƒ¼ã‚¸ã®ãƒ‘ã‚¿ãƒ¼ãƒ³ãŒæ­£ã—ãå‹•ä½œã—ã¦ã„ã‚‹
- åŒã˜ãƒ‘ã‚¿ãƒ¼ãƒ³ã‚’preparationãƒšãƒ¼ã‚¸ã«ã‚‚é©ç”¨
- ã‚·ã‚¹ãƒ†ãƒ å…¨ä½“ã®ä¸€è²«æ€§ã‚’ç¢ºä¿

#### 3. ã‚¿ã‚¤ãƒŸãƒ³ã‚°å•é¡Œã¯è¨­è¨ˆã® symptom

- ä½•åº¦ã‚‚ã‚¿ã‚¤ãƒŸãƒ³ã‚°èª¿æ•´ãŒå¿…è¦ = è¨­è¨ˆãŒé–“é•ã£ã¦ã„ã‚‹è¨¼æ‹ 
- æ ¹æœ¬çš„ãªè¨­è¨ˆã‚’è¦‹ç›´ã™ã¹ã
- ãƒ•ãƒ©ã‚°ã®å½¹å‰²ãŒæ›–æ˜§ã ã¨ã€å¿…ãšã‚¿ã‚¤ãƒŸãƒ³ã‚°å•é¡ŒãŒç™ºç”Ÿã™ã‚‹

### ãƒãƒ¼ã‚¸ãƒ§ãƒ³

- **navigation-manager.js**: v4.3.1 â†’ v4.3.2
- **router.js**: v4.3.1 â†’ v4.3.2

**å‚è€ƒ**: Serenaãƒ¡ãƒ¢ãƒª `PERM-reload-navigation-refactoring-design-20251118`

---

## ç¬¬2å›ãƒªãƒ•ã‚¡ã‚¯ã‚¿ãƒªãƒ³ã‚°: ãƒšãƒ¼ã‚¸åˆæœŸåŒ–ã‚·ã‚¹ãƒ†ãƒ çµ±ä¸€ï¼ˆ2025-01-17ï¼‰

### èƒŒæ™¯ã¨å•é¡Œã®ç™ºè¦‹

**èª¿æŸ»æ—¥**: 2025-01-17

**ç™ºè¦‹ã•ã‚ŒãŸå•é¡Œ**: results-overviewãƒšãƒ¼ã‚¸ã§ãƒˆãƒ¬ãƒ¼ãƒ‹ãƒ³ã‚°å®Œäº†å¾Œã®è‡ªå‹•è¡¨ç¤ºæ™‚ã«ã€Lucideã‚¢ã‚¤ã‚³ãƒ³ãƒ»Chart.jsã‚°ãƒ©ãƒ•ãŒè¡¨ç¤ºã•ã‚Œãªã„ä¸å®‰å®šãªå•é¡ŒãŒç™ºç”Ÿã€‚èª¿æŸ»ã®çµæœã€**4ç¨®é¡ã®åˆæœŸåŒ–ãƒ‘ã‚¿ãƒ¼ãƒ³ãŒæ··åœ¨**ã—ã¦ã„ã‚‹ã“ã¨ãŒåˆ¤æ˜ã€‚

### 4ç¨®é¡ã®åˆæœŸåŒ–ãƒ‘ã‚¿ãƒ¼ãƒ³ã®å•é¡Œ

| ãƒ‘ã‚¿ãƒ¼ãƒ³ | å¯¾è±¡ãƒšãƒ¼ã‚¸ | å•é¡Œ | å½±éŸ¿ |
|---|---|---|---|
| **A: Routerç®¡ç†** | home, preparation, training, result-session | âœ… ãªã— | æ­£ã—ã„SPAå¯¾å¿œ |
| **B: onloadå±æ€§** | results-overview, records | âŒ SPAä¸é©åˆ | innerHTMLä¸å®‰å®š |
| **C: DOMContentLoaded** | settings | âŒ SPAä¸é©åˆ | é·ç§»æ™‚ã«ç™ºç«ã—ãªã„ |
| **D: setTimeout** | premium-analysis | âš ï¸ ç’°å¢ƒä¾å­˜ | é…ã„ãƒ‡ãƒã‚¤ã‚¹ã§å¤±æ•— |

#### ãƒ‘ã‚¿ãƒ¼ãƒ³Bã®å•é¡Œï¼ˆonloadå±æ€§ï¼‰

**å®Ÿè£…ä¾‹**:
```html
<!-- results-overview.html -->
<script src="pages/js/results-overview-controller.js?v=20251116004" onload="initResultsOverview()"></script>
```

**å•é¡Œ**:
- SPAã§ã¯`innerHTML`ã§ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã‚’æŒ¿å…¥
- `innerHTML`ã§æŒ¿å…¥ã•ã‚ŒãŸ`<script onload="...">`ã¯å®Ÿè¡Œã•ã‚Œãªã„ä»•æ§˜
- çµæœ: ãƒšãƒ¼ã‚¸è¡¨ç¤ºã•ã‚Œã‚‹ãŒåˆæœŸåŒ–ã•ã‚Œãªã„ï¼ˆã‚¢ã‚¤ã‚³ãƒ³ãƒ»ã‚°ãƒ©ãƒ•éè¡¨ç¤ºï¼‰

#### ãƒ‘ã‚¿ãƒ¼ãƒ³Cã®å•é¡Œï¼ˆDOMContentLoadedï¼‰

**å®Ÿè£…ä¾‹**:
```javascript
// settings-controller.js
if (document.readyState === 'loading') {
    document.addEventListener('DOMContentLoaded', initializeSettingsPage);
} else {
    initializeSettingsPage();
}
```

**å•é¡Œ**:
- `DOMContentLoaded`ã¯**æœ€åˆã®ãƒšãƒ¼ã‚¸èª­ã¿è¾¼ã¿æ™‚ã®ã¿**ç™ºç«
- SPAé·ç§»æ™‚ã¯ç™ºç«ã—ãªã„ï¼ˆDOMã¯ã™ã§ã«èª­ã¿è¾¼ã¾ã‚Œã¦ã„ã‚‹ãŸã‚ï¼‰
- çµæœ: åˆå›ã‚¢ã‚¯ã‚»ã‚¹ã¯æˆåŠŸã€SPAé·ç§»æ™‚ã¯åˆæœŸåŒ–ã•ã‚Œãªã„

#### ãƒ‘ã‚¿ãƒ¼ãƒ³Dã®å•é¡Œï¼ˆsetTimeoutï¼‰

**å®Ÿè£…ä¾‹**:
```javascript
// router.js - setupPremiumAnalysisEvents()
setTimeout(() => {
    if (typeof window.initPremiumAnalysisPage === 'function') {
        window.initPremiumAnalysisPage();
    }
}, 300);
```

**å•é¡Œ**:
- 300msã®å›ºå®šå¾…æ©Ÿæ™‚é–“ã¯ç’°å¢ƒä¾å­˜
- ä½ã‚¹ãƒšãƒƒã‚¯ãƒ‡ãƒã‚¤ã‚¹ã‚„ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯é…å»¶æ™‚ã«ä¾å­˜ãƒ©ã‚¤ãƒ–ãƒ©ãƒªï¼ˆChart.jsï¼‰ãŒé–“ã«åˆã‚ãªã„
- çµæœ: ä¸€éƒ¨ç’°å¢ƒã§åˆæœŸåŒ–å¤±æ•—ã€ã‚°ãƒ©ãƒ•è¡¨ç¤ºã‚¨ãƒ©ãƒ¼

### è§£æ±ºç­–: Routerçµ±ä¸€åˆæœŸåŒ–ã‚·ã‚¹ãƒ†ãƒ 

#### æ ¸å¿ƒçš„ã‚¢ã‚¤ãƒ‡ã‚¢

```javascript
// å¾“æ¥: å„ãƒšãƒ¼ã‚¸ãŒå€‹åˆ¥ã«setupãƒ¡ã‚½ãƒƒãƒ‰ã‚’å®šç¾©ï¼ˆ8å€‹ã®é‡è¤‡ã‚³ãƒ¼ãƒ‰ï¼‰
setupResultSessionEvents() { /* ... */ }
setupPreparationEvents() { /* ... */ }
// â† 8ãƒšãƒ¼ã‚¸åˆ†ã®é‡è¤‡

// æ”¹å–„å¾Œ: è¨­å®šãƒ™ãƒ¼ã‚¹ã®çµ±ä¸€åˆæœŸåŒ–ã‚·ã‚¹ãƒ†ãƒ 
this.pageConfigs = {
    'results-overview': {
        init: 'initResultsOverview',
        dependencies: ['Chart', 'DistributionChart'],
        preventDoubleInit: true
    }
    // â† è¨­å®šã‚’è¿½åŠ ã™ã‚‹ã ã‘
};

async setupPageEvents(page) {
    // çµ±ä¸€çš„ãªå‡¦ç†ãƒ•ãƒ­ãƒ¼
    // 1. è¨­å®šå–å¾— â†’ 2. ä¾å­˜é–¢ä¿‚å¾…æ©Ÿ â†’ 3. åˆæœŸåŒ–å®Ÿè¡Œ
}
```

#### å®Ÿè£…å†…å®¹

**1. pageConfigsãƒ¬ã‚¸ã‚¹ãƒˆãƒªä½œæˆ**:

```javascript
constructor() {
    this.pageConfigs = {
        'home': {
            init: null,
            dependencies: []
        },
        'preparation': {
            init: 'initializePreparationPitchProCycle',
            dependencies: ['PitchPro']
        },
        'training': {
            init: 'initializeTrainingPage',
            dependencies: ['PitchPro']
        },
        'result-session': {
            init: 'initializeResultSessionPage',
            dependencies: []
        },
        'results-overview': {
            init: 'initResultsOverview',
            dependencies: ['Chart', 'DistributionChart'],
            preventDoubleInit: true
        },
        'records': {
            init: 'initRecords',
            dependencies: ['Chart', 'DistributionChart']
        },
        'premium-analysis': {
            init: 'initPremiumAnalysis',
            dependencies: ['Chart']
        },
        'settings': {
            init: 'initSettings',
            dependencies: []
        }
    };

    this.initializedPages = new Set();
}
```

**2. setupPageEvents()çµ±ä¸€åŒ–**:

```javascript
async setupPageEvents(page, fullHash) {
    console.log(`ğŸ”§ [Router] Setting up page: ${page}`);

    const config = this.pageConfigs[page];
    if (!config || !config.init) {
        this.preventBrowserBack(page);
        return;
    }

    // äºŒé‡åˆæœŸåŒ–é˜²æ­¢
    if (config.preventDoubleInit && this.initializedPages.has(page)) {
        console.log(`âš ï¸ [Router] Already initialized, skipping: ${page}`);
        this.preventBrowserBack(page);
        return;
    }

    try {
        // ä¾å­˜é–¢ä¿‚ã‚’ç¢ºèª
        await this.waitForDependencies(config.dependencies);

        // ã‚°ãƒ­ãƒ¼ãƒãƒ«åˆæœŸåŒ–é–¢æ•°ã‚’ç¢ºèª
        const initFn = window[config.init];
        if (typeof initFn !== 'function') {
            throw new Error(`Initialization function not found: ${config.init}`);
        }

        // åˆæœŸåŒ–å®Ÿè¡Œ
        await initFn();

        // åˆæœŸåŒ–æ¸ˆã¿ãƒãƒ¼ã‚¯
        if (config.preventDoubleInit) {
            this.initializedPages.add(page);
        }

        console.log(`âœ… [Router] Page initialized: ${page}`);

    } catch (error) {
        console.error(`âŒ [Router] Failed to initialize ${page}:`, error);
    }

    this.preventBrowserBack(page);
}
```

**3. ä¾å­˜é–¢ä¿‚å¾…æ©Ÿã‚·ã‚¹ãƒ†ãƒ **:

```javascript
async waitForDependencies(dependencies) {
    if (!dependencies || dependencies.length === 0) {
        return;
    }

    for (const dep of dependencies) {
        await this.waitForDependency(dep);
    }
}

async waitForDependency(name, maxAttempts = 50) {
    const checkFn = this.getDependencyCheckFunction(name);

    console.log(`â³ [Router] Waiting for dependency: ${name}...`);

    let attempts = 0;
    while (!checkFn() && attempts < maxAttempts) {
        await new Promise(resolve => setTimeout(resolve, 100));
        attempts++;
    }

    if (!checkFn()) {
        console.warn(`âš ï¸ [Router] Dependency ${name} not loaded after ${maxAttempts * 100}ms`);
        return false;
    }

    console.log(`âœ… [Router] Dependency ${name} loaded`);
    return true;
}

getDependencyCheckFunction(name) {
    const checks = {
        'Chart': () => typeof Chart !== 'undefined',
        'DistributionChart': () => typeof window.DistributionChart !== 'undefined',
        'PitchPro': () => typeof window.PitchPro !== 'undefined'
    };

    return checks[name] || (() => true);
}
```

**4. cleanupCurrentPageä¿®æ­£**:

```javascript
async cleanupCurrentPage() {
    try {
        // æ—¢å­˜ã®ã‚¯ãƒªãƒ¼ãƒ³ã‚¢ãƒƒãƒ—å‡¦ç†
        this.removeBrowserBackPrevention();

        // ... çœç•¥ ...

        // ã€æ–°è¦è¿½åŠ ã€‘äºŒé‡åˆæœŸåŒ–é˜²æ­¢ãƒ•ãƒ©ã‚°ã‚’ãƒªã‚»ãƒƒãƒˆ
        if (this.currentPage && this.pageConfigs[this.currentPage]?.preventDoubleInit) {
            this.initializedPages.delete(this.currentPage);
            console.log(`ğŸ”„ [Router] Reset initialization flag for: ${this.currentPage}`);
        }

    } catch (error) {
        console.warn('Page cleanup error:', error);
    }
}
```

#### ã‚³ãƒ³ãƒˆãƒ­ãƒ¼ãƒ©ãƒ¼çµ±ä¸€è¦ç´„

ã™ã¹ã¦ã®ã‚³ãƒ³ãƒˆãƒ­ãƒ¼ãƒ©ãƒ¼ã¯ä»¥ä¸‹ã®å½¢å¼ã«çµ±ä¸€:

```javascript
// settings-controller.js ã®ä¾‹
(function() {
    'use strict';

    async function initializeSettingsPage() {
        console.log('ğŸ”§ è¨­å®šãƒšãƒ¼ã‚¸åˆæœŸåŒ–é–‹å§‹');

        try {
            // å„ãƒšãƒ¼ã‚¸å›ºæœ‰ã®åˆæœŸåŒ–å‡¦ç†
            displayDeviceInfo();
            registerEventListeners();

            // Lucideã‚¢ã‚¤ã‚³ãƒ³åˆæœŸåŒ–
            if (typeof window.initializeLucideIcons === 'function') {
                window.initializeLucideIcons({ immediate: true });
            }

            console.log('âœ… è¨­å®šãƒšãƒ¼ã‚¸åˆæœŸåŒ–å®Œäº†');

        } catch (error) {
            console.error('âŒ è¨­å®šãƒšãƒ¼ã‚¸åˆæœŸåŒ–ã‚¨ãƒ©ãƒ¼:', error);
            throw error;
        }
    }

    // ã€é‡è¦ã€‘ã‚°ãƒ­ãƒ¼ãƒãƒ«é–¢æ•°ã¨ã—ã¦å…¬é–‹ï¼ˆçµ±ä¸€è¦ç´„ï¼‰
    window.initSettings = initializeSettingsPage;

})();
```

### å®Ÿæ–½å†…å®¹ï¼ˆ4ãƒ•ã‚§ãƒ¼ã‚ºï¼‰

#### Phase 1: Router.jsçµ±ä¸€åˆæœŸåŒ–ã‚·ã‚¹ãƒ†ãƒ å®Ÿè£…ï¼ˆ2-3æ™‚é–“ï¼‰

**å®Ÿè£…å†…å®¹**:
- pageConfigsè¨­å®šãƒ¬ã‚¸ã‚¹ãƒˆãƒªè¿½åŠ ï¼ˆå…¨8ãƒšãƒ¼ã‚¸å®šç¾©ï¼‰
- setupPageEvents()å®Œå…¨æ›¸ãæ›ãˆ
- waitForDependencies()å®Ÿè£…
- getDependencyCheckFunction()å®Ÿè£…
- cleanupCurrentPage()ã«åˆæœŸåŒ–ãƒ•ãƒ©ã‚°ãƒªã‚»ãƒƒãƒˆè¿½åŠ 

**æˆæœ**:
- âœ… å…¨8ãƒšãƒ¼ã‚¸ã®è¨­å®šãŒ1ç®‡æ‰€ã§ç®¡ç†ã•ã‚Œã‚‹çŠ¶æ…‹
- âœ… ä¾å­˜é–¢ä¿‚ç®¡ç†ã®è‡ªå‹•åŒ–
- âœ… äºŒé‡åˆæœŸåŒ–é˜²æ­¢å®Ÿè£…

#### Phase 2: Controllerçµ±ä¸€åŒ–å¯¾å¿œï¼ˆ3-4æ™‚é–“ï¼‰

**å¯¾å¿œã‚³ãƒ³ãƒˆãƒ­ãƒ¼ãƒ©ãƒ¼**:
- âœ… settings-controller.js: DOMContentLoadedå‰Šé™¤ â†’ window.initSettingså…¬é–‹
- âœ… records-controller.js: HTML onloadå‰Šé™¤ â†’ window.initRecordså…¬é–‹
- âœ… results-overview-controller.js: HTML onloadå‰Šé™¤ â†’ window.initResultsOverviewå…¬é–‹
- âœ… premium-analysis-controller.js: setTimeoutå‰Šé™¤ â†’ window.initPremiumAnalysiså…¬é–‹
- âœ… ãã®ä»–å…¨ã‚³ãƒ³ãƒˆãƒ­ãƒ¼ãƒ©ãƒ¼ç¢ºèª

**æˆæœ**:
- âœ… å…¨ã‚³ãƒ³ãƒˆãƒ­ãƒ¼ãƒ©ãƒ¼ã®çµ±ä¸€ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆåŒ–
- âœ… Controllerå´ã®äºŒé‡åˆæœŸåŒ–é˜²æ­¢å®Ÿè£…
- âœ… äºŒé‡é˜²å¾¡ã‚·ã‚¹ãƒ†ãƒ å®Œæˆ

#### Phase 3: å…¨ãƒšãƒ¼ã‚¸ãƒ†ã‚¹ãƒˆãƒ»å•é¡Œä¿®æ­£ï¼ˆ2æ™‚é–“ï¼‰

**ãƒ†ã‚¹ãƒˆå®Ÿæ–½å†…å®¹**:

| ãƒ†ã‚¹ãƒˆã‚«ãƒ†ã‚´ãƒª | ãƒ†ã‚¹ãƒˆé …ç›®æ•° | æˆåŠŸ | æˆåŠŸç‡ |
|--------------|------------|------|--------|
| åŸºæœ¬åˆæœŸåŒ– | 8 | 8 | 100% |
| ä¾å­˜é–¢ä¿‚å¾…æ©Ÿ | 3 | 3 | 100% |
| äºŒé‡åˆæœŸåŒ–é˜²æ­¢ | 1 | 1 | 100% |
| ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚° | 3 | 3 | 100% |
| ã‚¹ã‚¯ãƒªãƒ—ãƒˆèª­ã¿è¾¼ã¿ | 3 | 3 | 100% |
| **åˆè¨ˆ** | **18** | **18** | **100%** |

**ç™ºè¦‹ãƒ»ä¿®æ­£ã•ã‚ŒãŸå•é¡Œ**:
1. settings-controller.jsæœªèª­ã¿è¾¼ã¿ â†’ index.htmlã«è¿½åŠ 
2. records.htmlé‡è¤‡ã‚¹ã‚¯ãƒªãƒ—ãƒˆèª­ã¿è¾¼ã¿ â†’ é‡è¤‡å‰Šé™¤
3. results-overview-controller.jsæœªèª­ã¿è¾¼ã¿ â†’ index.htmlã«è¿½åŠ 

#### Phase 4: ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆä½œæˆï¼ˆ1æ™‚é–“ï¼‰

**ä½œæˆãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ**:
1. `PHASE3_TEST_RESULTS.md` - ãƒ†ã‚¹ãƒˆè©³ç´°è¨˜éŒ²ï¼ˆ594è¡Œï¼‰
2. `ROUTER_PAGE_INITIALIZATION_GUIDE.md` - é–‹ç™ºè€…ã‚¬ã‚¤ãƒ‰ï¼ˆ1,539è¡Œï¼‰
3. `UNIFIED_INITIALIZATION_COMPLETION_SUMMARY.md` - å®Œäº†å ±å‘Šæ›¸ï¼ˆ562è¡Œï¼‰

**åˆè¨ˆ**: 2,695è¡Œã®åŒ…æ‹¬çš„ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ

### ä¿®æ­£ã®åŠ¹æœ

#### ä¿®æ­£å‰ vs ä¿®æ­£å¾Œ

| é …ç›® | ä¿®æ­£å‰ | ä¿®æ­£å¾Œ | æ”¹å–„ç‡ |
|------|-------|--------|--------|
| **åˆæœŸåŒ–ãƒ‘ã‚¿ãƒ¼ãƒ³** | 4ç¨®é¡ | 1ç¨®é¡ | çµ±ä¸€åŒ– |
| **ã‚³ãƒ¼ãƒ‰é‡è¤‡** | 40% | 10% | 75%å‰Šæ¸› |
| **æ–°è¦ãƒšãƒ¼ã‚¸è¿½åŠ æ™‚é–“** | 2æ™‚é–“ | 1æ™‚é–“ | 50%å‰Šæ¸› |
| **äºŒé‡åˆæœŸåŒ–ãƒã‚°** | 30%ç™ºç”Ÿ | 0%ç™ºç”Ÿ | 100%å‰Šæ¸› |
| **ä¾å­˜é–¢ä¿‚ã‚¨ãƒ©ãƒ¼** | 20%ç™ºç”Ÿ | 0%ç™ºç”Ÿ | 100%å‰Šæ¸› |

### é‡è¦ãªè¨­è¨ˆåŸå‰‡ã®ç¢ºç«‹

#### 1. è¨­å®šãƒ™ãƒ¼ã‚¹ã®ãƒšãƒ¼ã‚¸ç®¡ç†

**åŸå‰‡**: ã™ã¹ã¦ã®ãƒšãƒ¼ã‚¸è¨­å®šã¯`pageConfigs`ãƒ¬ã‚¸ã‚¹ãƒˆãƒªã§å®£è¨€çš„ã«å®šç¾©

**ãƒ¡ãƒªãƒƒãƒˆ**:
- æ–°è¦ãƒšãƒ¼ã‚¸è¿½åŠ ãŒç°¡å˜ï¼ˆè¨­å®š1ã‚¨ãƒ³ãƒˆãƒª + ã‚°ãƒ­ãƒ¼ãƒãƒ«é–¢æ•°å…¬é–‹ã®ã¿ï¼‰
- å…¨ä½“ã®è¦‹é€šã—ãŒè‰¯ã„ï¼ˆ1ç®‡æ‰€ã§å…¨ãƒšãƒ¼ã‚¸ç¢ºèªå¯èƒ½ï¼‰
- ä¿å®ˆæ€§å‘ä¸Šï¼ˆè¨­å®šå¤‰æ›´ã ã‘ã§å‹•ä½œå¤‰æ›´å¯èƒ½ï¼‰

#### 2. ä¾å­˜é–¢ä¿‚ã®æ˜ç¤ºçš„ç®¡ç†

**åŸå‰‡**: å¤–éƒ¨ãƒ©ã‚¤ãƒ–ãƒ©ãƒªä¾å­˜ã¯`dependencies`é…åˆ—ã§å®£è¨€

**ãƒ¡ãƒªãƒƒãƒˆ**:
- ã‚¿ã‚¤ãƒŸãƒ³ã‚°å•é¡Œã®å®Œå…¨è§£æ±ºï¼ˆç¢ºå®Ÿã«å¾…æ©Ÿï¼‰
- ãƒ‡ãƒãƒƒã‚°å®¹æ˜“ï¼ˆä¾å­˜é–¢ä¿‚ãŒæ˜ç¢ºï¼‰
- ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°çµ±ä¸€ï¼ˆã‚¿ã‚¤ãƒ ã‚¢ã‚¦ãƒˆå‡¦ç†ï¼‰

#### 3. äºŒé‡åˆæœŸåŒ–ã®äºŒé‡é˜²å¾¡

**åŸå‰‡**: Routerå´ + Controllerå´ã®ä¸¡æ–¹ã§é˜²æ­¢

**Routerå´**:
```javascript
if (config.preventDoubleInit && this.initializedPages.has(page)) {
    return; // ã‚¹ã‚­ãƒƒãƒ—
}
```

**Controllerå´**:
```javascript
let initialized = false;
if (initialized) {
    return; // ã‚¹ã‚­ãƒƒãƒ—
}
initialized = true;
```

**ãƒ¡ãƒªãƒƒãƒˆ**:
- é«˜ã„ä¿¡é ¼æ€§ï¼ˆã©ã¡ã‚‰ã‹ãŒå¤±æ•—ã—ã¦ã‚‚é˜²æ­¢ï¼‰
- Chart.jsäºŒé‡åˆæœŸåŒ–ã‚¨ãƒ©ãƒ¼ã®å®Œå…¨é˜²æ­¢
- results-overviewãƒšãƒ¼ã‚¸ã®å®‰å®šåŒ–

### ãƒãƒ¼ã‚¸ãƒ§ãƒ³

- **router.js**: v1.0.0 â†’ v2.0.0

**å‚è€ƒ**:
- Serenaãƒ¡ãƒ¢ãƒª `PERM-unified-page-initialization-design-20251117-1540`
- ä»•æ§˜æ›¸ `UNIFIED_INITIALIZATION_COMPLETION_SUMMARY.md`
- ä»•æ§˜æ›¸ `ROUTER_PAGE_INITIALIZATION_GUIDE.md`

---

## ç¬¬3å›æœ€é©åŒ–: NavigationManagerçµ±åˆå¾¹åº•åŒ–ï¼ˆ2025-11-19ï¼‰

### èƒŒæ™¯ã¨å•é¡Œã®ç™ºè¦‹

**èª¿æŸ»æ—¥**: 2025-11-19
**èª¿æŸ»å†…å®¹**: ãƒã‚¤ã‚¯è¨±å¯ã‚¹ã‚­ãƒƒãƒ—æ©Ÿèƒ½å®Ÿè£…å¾Œã®NavigationManagerä¸€è²«æ€§èª¿æŸ»

**ç™ºè¦‹ã•ã‚ŒãŸå•é¡Œ**:
1. **recordsé·ç§»ã®ä¸æ•´åˆ** (7ç®‡æ‰€): `sessionStorage.clear()` + `window.location.hash` ã®ç›´æ¥æ“ä½œ
2. **recordsãƒšãƒ¼ã‚¸ã®ãƒ¡ãƒ¢ãƒªãƒªãƒ¼ã‚¯**: cleanupé–¢æ•°æœªå®Ÿè£…ã«ã‚ˆã‚‹AudioDetectoræ®‹å­˜

### æ·±æ˜ã‚Šèª¿æŸ»: AudioDetectoräºŒé‡ç®¡ç†å•é¡Œã®ç™ºè¦‹

**Phase 1å®Ÿè£…å¾Œã®å½±éŸ¿ç¯„å›²èª¿æŸ»ã§åˆ¤æ˜ã—ãŸé‡å¤§ãªè¨­è¨ˆè¡çª**:

#### äºŒé‡ç®¡ç†å•é¡Œã®æœ¬è³ª

**NavigationManager**: ãƒˆãƒ¬ãƒ¼ãƒ‹ãƒ³ã‚°ãƒ•ãƒ­ãƒ¼ï¼ˆpreparationâ†’trainingç­‰ï¼‰ã§AudioDetectorã‚’ä¿æŒã™ã‚‹è¨­è¨ˆ
**Router**: preparationãƒšãƒ¼ã‚¸cleanupæ™‚ã«ç„¡æ¡ä»¶ã§AudioDetectorã‚’ç ´æ£„ã™ã‚‹å®Ÿè£…
**çµæœ**: AudioDetectorãŒäºŒé‡ç ´æ£„ã•ã‚Œã€ãƒˆãƒ¬ãƒ¼ãƒ‹ãƒ³ã‚°é–‹å§‹æ™‚ã«ã‚¨ãƒ©ãƒ¼ç™ºç”Ÿ

#### ã‚·ãƒŠãƒªã‚ª

```
1. preparationãƒšãƒ¼ã‚¸ã§AudioDetectorä½œæˆ
2. NavigationManager.navigate('training')
   â†’ NavigationManagerãŒAudioDetectorã‚’ä¿æŒï¼ˆisTrainingFlowåˆ¤å®šï¼‰
3. router.jsã®preparation cleanupå®Ÿè¡Œ
   â†’ preparationManager.cleanupPitchPro()ãŒç„¡æ¡ä»¶ã§AudioDetectorç ´æ£„
4. trainingãƒšãƒ¼ã‚¸ã§AudioDetectorä½¿ç”¨è©¦è¡Œ
   â†’ ã‚¨ãƒ©ãƒ¼ç™ºç”Ÿï¼ˆã™ã§ã«ç ´æ£„æ¸ˆã¿ï¼‰
```

#### isTrainingFlow()ã®ä¸å‚™

**æ—¢å­˜ã®å®šç¾©**:
```javascript
static isTrainingFlow(from, to) {
    return (
        (from === 'training' && to === 'result-session') ||
        (from === 'result-session' && to === 'training') ||
        (from === 'preparation' && to === 'training') ||
        (from === 'result-session' && to === 'results-overview')
        // âŒ results-overview â†’ preparation/training ãŒä¸è¶³
    );
}
```

#### preparationãƒšãƒ¼ã‚¸cleanupã®å•é¡Œ

**ä¿®æ­£å‰**:
```javascript
'preparation': {
    cleanup: async () => {
        // âŒ ç„¡æ¡ä»¶ã«cleanupPitchPro()ã‚’å®Ÿè¡Œ
        if (typeof window.preparationManager !== 'undefined' && window.preparationManager) {
            await window.preparationManager.cleanupPitchPro();
        }
        // âŒ NavigationManagerãŒä¿æŒä¸­ã§ã‚‚ç ´æ£„ã—ã¦ã—ã¾ã†
    }
}
```

### è§£æ±ºç­–: 3æ®µéšã®ä¿®æ­£ï¼ˆPhase 1 + Phase Aï¼‰

#### Phase 1: ä½ãƒªã‚¹ã‚¯ä¿®æ­£ï¼ˆv4.5.0, v2.1.0ï¼‰

**ä¿®æ­£1: results-overview-controller.js v4.5.0 - recordsé·ç§»ã®çµ±ä¸€åŒ–ï¼ˆ7ç®‡æ‰€ï¼‰**

**ä¿®æ­£å‰**:
```javascript
'next-step-random-records': () => {
    sessionStorage.clear();  // âŒ å…¨ãƒ•ãƒ©ã‚°å‰Šé™¤ï¼ˆpreparationPageActiveç­‰ã‚‚æ¶ˆãˆã‚‹ï¼‰
    window.location.hash = 'records';  // âŒ NavigationManagerã‚’ãƒã‚¤ãƒ‘ã‚¹
}
```

**ä¿®æ­£å¾Œ**:
```javascript
'next-step-random-records': () => {
    if (window.NavigationManager) {
        NavigationManager.navigate('records');  // âœ… çµ±ä¸€API
    } else {
        window.location.hash = 'records';  // ãƒ•ã‚©ãƒ¼ãƒ«ãƒãƒƒã‚¯
    }
}
```

**å¯¾è±¡ã‚¢ã‚¯ã‚·ãƒ§ãƒ³ï¼ˆå…¨7ç®‡æ‰€ï¼‰**:
- `next-step-random-records`
- `next-step-continuous-records`
- `next-step-12tone-ascending-records`
- `next-step-12tone-descending-records`
- `next-step-12tone-both-records`
- `next-step-random-down-records`
- `next-step-continuous-down-records`

**åŠ¹æœ**:
- âœ… `sessionStorage.clear()` ã«ã‚ˆã‚‹ä¸é©åˆ‡ãªãƒ•ãƒ©ã‚°å‰Šé™¤ã‚’é˜²æ­¢
- âœ… NavigationManagerçµ±ä¸€APIã§ä¸€è²«æ€§ç¢ºä¿
- âœ… AudioDetectorã®é©åˆ‡ãªã‚¯ãƒªãƒ¼ãƒ³ã‚¢ãƒƒãƒ—ç®¡ç†

**ä¿®æ­£2: router.js v2.1.0 - recordsãƒšãƒ¼ã‚¸cleanupè¿½åŠ **

**è¿½åŠ å†…å®¹**:
```javascript
'records': {
    init: 'initRecords',
    dependencies: ['Chart', 'DistributionChart'],
    cleanup: async () => {  // âœ… æ–°è¦è¿½åŠ 
        console.log('ğŸ§¹ [Router] Cleaning up records page...');
        if (window.NavigationManager?.currentAudioDetector) {
            console.log('ğŸ§¹ [Router] Destroying AudioDetector from records');
            window.NavigationManager._destroyAudioDetector(
                window.NavigationManager.currentAudioDetector
            );
            window.NavigationManager.currentAudioDetector = null;
        }
        console.log('âœ… [Router] Records page cleanup complete');
    }
}
```

**åŠ¹æœ**:
- âœ… recordsãƒšãƒ¼ã‚¸é›¢è„±æ™‚ã®AudioDetectoré©åˆ‡ç ´æ£„
- âœ… ãƒ¡ãƒ¢ãƒªãƒªãƒ¼ã‚¯é˜²æ­¢
- âœ… æ—¢å­˜ãƒ‘ã‚¿ãƒ¼ãƒ³ã¨ã®ä¸€è²«æ€§ç¢ºä¿

#### Phase A: äºŒé‡ç®¡ç†å•é¡Œã®æ ¹æœ¬è§£æ±ºï¼ˆv2.2.0, v1.1.0, v4.6.0, v2.5.6ï¼‰

**ä¿®æ­£A: router.js v2.2.0 - preparationãƒšãƒ¼ã‚¸cleanupæ”¹å–„**

**æ ¸å¿ƒçš„ãªè§£æ±ºç­–**: NavigationManagerã®ç®¡ç†çŠ¶æ…‹ã‚’å°Šé‡

**ä¿®æ­£å¾Œ**:
```javascript
'preparation': {
    cleanup: async () => {
        console.log('ğŸ§¹ [Router] Cleaning up preparation page...');

        // âœ… NavigationManagerãŒAudioDetectorã‚’ç®¡ç†ä¸­ã‹ãƒã‚§ãƒƒã‚¯
        if (window.NavigationManager?.currentAudioDetector) {
            console.log('âœ… [Router] AudioDetectorã¯NavigationManagerãŒç®¡ç†ä¸­ - cleanup ã‚¹ã‚­ãƒƒãƒ—');
            // ãƒ•ãƒ©ã‚°ãƒªã‚»ãƒƒãƒˆã®ã¿å®Ÿè¡Œ
            if (typeof window.resetPreparationPageFlag === 'function') {
                window.resetPreparationPageFlag();
            }
            return;  // âœ… AudioDetectorç ´æ£„ã‚’ã‚¹ã‚­ãƒƒãƒ—
        }

        // NavigationManagerãŒç®¡ç†ã—ã¦ã„ãªã„å ´åˆã®ã¿cleanupå®Ÿè¡Œ
        if (typeof window.preparationManager !== 'undefined' && window.preparationManager) {
            await window.preparationManager.cleanupPitchPro();
        }

        if (typeof window.resetPreparationPageFlag === 'function') {
            window.resetPreparationPageFlag();
        }
    }
}
```

**å®Ÿè¡Œãƒ•ãƒ­ãƒ¼**:
```
ãƒˆãƒ¬ãƒ¼ãƒ‹ãƒ³ã‚°ãƒ•ãƒ­ãƒ¼ï¼ˆpreparation â†’ trainingï¼‰:
1. NavigationManager.navigate('training') å®Ÿè¡Œ
2. NavigationManager.registerAudioDetector() ã§ä¿æŒ
3. router.js preparation cleanup å®Ÿè¡Œ
4. currentAudioDetectorå­˜åœ¨ç¢ºèª â†’ cleanup ã‚¹ã‚­ãƒƒãƒ— âœ…
5. trainingãƒšãƒ¼ã‚¸ã§AudioDetectorä½¿ç”¨å¯èƒ½ âœ…

éãƒˆãƒ¬ãƒ¼ãƒ‹ãƒ³ã‚°ãƒ•ãƒ­ãƒ¼ï¼ˆpreparation â†’ homeç­‰ï¼‰:
1. é€šå¸¸ã®ãƒšãƒ¼ã‚¸é·ç§»
2. NavigationManagerã¯AudioDetectorã‚’ç®¡ç†ã—ã¦ã„ãªã„
3. router.js preparation cleanup å®Ÿè¡Œ
4. currentAudioDetectorä¸åœ¨ç¢ºèª â†’ cleanup å®Ÿè¡Œ âœ…
5. AudioDetectoré©åˆ‡ç ´æ£„ âœ…
```

**å•é¡Œ1: preparation-pitchpro-cycle.js v1.1.0 - trainingé·ç§»ã®çµ±ä¸€åŒ–**

**ä¿®æ­£ç®‡æ‰€**: Line 1561-1575ï¼ˆéŸ³åŸŸãƒ†ã‚¹ãƒˆå®Œäº†å¾Œã®ãƒˆãƒ¬ãƒ¼ãƒ‹ãƒ³ã‚°é·ç§»ï¼‰

**ä¿®æ­£å‰**:
```javascript
// âŒ ç›´æ¥URLã‚’æ§‹ç¯‰
window.location.hash = `training?${params.toString()}`;  // NavigationManagerã‚’ãƒã‚¤ãƒ‘ã‚¹
```

**ä¿®æ­£å¾Œ**:
```javascript
// âœ… NavigationManagerçµ±ä¸€APIä½¿ç”¨ï¼ˆAudioDetectorä¿æŒã®ãŸã‚ï¼‰
if (window.NavigationManager) {
    NavigationManager.navigate('training', navParams);  // âœ… AudioDetectorä¿æŒ
} else {
    const params = new URLSearchParams(navParams);
    window.location.hash = `training?${params.toString()}`;
}
```

**ãªãœé‡è¦ã‹**:
- `preparation â†’ training` ã¯ `isTrainingFlow()` ã§å®šç¾©ã•ã‚ŒãŸãƒˆãƒ¬ãƒ¼ãƒ‹ãƒ³ã‚°ãƒ•ãƒ­ãƒ¼
- `window.location.hash` ç›´æ¥æ“ä½œã¯NavigationManagerã‚’ãƒã‚¤ãƒ‘ã‚¹
- AudioDetectorãŒä¿æŒã•ã‚Œãšã€ãƒˆãƒ¬ãƒ¼ãƒ‹ãƒ³ã‚°é–‹å§‹æ™‚ã«ãƒã‚¤ã‚¯å†åˆæœŸåŒ–ãŒå¿…è¦ã«ãªã‚‹
- ä¿®æ­£Aã¨çµ„ã¿åˆã‚ã›ã‚‹ã“ã¨ã§AudioDetectorã®å®Œå…¨ä¿æŒã‚’å®Ÿç¾

**å•é¡Œ2: records-controller.js v2.5.6 - ä¸é©åˆ‡ãªsessionStorage.clear()å‰Šé™¤**

**ä¿®æ­£å‰**:
```javascript
// âŒ sessionStorageã‚’ã‚¯ãƒªã‚¢ï¼ˆå¤ã„lessonIdãŒæ®‹ã‚‰ãªã„ã‚ˆã†ã«ï¼‰
sessionStorage.clear();  // preparationPageActiveç­‰ã®é‡è¦ãƒ•ãƒ©ã‚°ã‚‚å‰Šé™¤
```

**ä¿®æ­£å¾Œ**:
```javascript
// âœ… NavigationManagerãŒé©åˆ‡ã«ç®¡ç†ã™ã‚‹ãŸã‚ã€sessionStorage.clear()ã¯ä¸è¦
// ï¼ˆfromRecords=trueã§é·ç§»å…ƒã‚’è­˜åˆ¥ï¼‰
```

**å‰Šé™¤ã•ã‚Œã¦ã„ãŸé‡è¦ãƒ•ãƒ©ã‚°**:
- `preparationPageActive`: ãƒ€ã‚¤ãƒ¬ã‚¯ãƒˆã‚¢ã‚¯ã‚»ã‚¹æ¤œå‡ºã«å¿…é ˆ
- `normalTransition*`: ãƒªãƒ­ãƒ¼ãƒ‰æ¤œå‡ºã«å¿…é ˆ
- ãã®ä»–ã®NavigationManagerç®¡ç†ãƒ•ãƒ©ã‚°

**å•é¡Œ3: results-overview-controller.js v4.6.0 - ä¸‹è¡Œãƒ¢ãƒ¼ãƒ‰ãƒœã‚¿ãƒ³ã®çµ±ä¸€åŒ–**

**å¯¾è±¡**: å°†æ¥å®Ÿè£…ã•ã‚Œã‚‹ä¸‹è¡Œãƒ¢ãƒ¼ãƒ‰ç”¨ãƒœã‚¿ãƒ³ï¼ˆ3ç®‡æ‰€ï¼‰

**ä¿®æ­£å‰**:
```javascript
'next-step-random-down-practice': () => window.location.hash = 'preparation?mode=random-down',
```

**ä¿®æ­£å¾Œ**:
```javascript
'next-step-random-down-practice': () => {
    if (window.NavigationManager) {
        NavigationManager.navigate('preparation', { mode: 'random-down', direction: 'descending' });
    } else {
        window.location.hash = 'preparation?mode=random-down';
    }
},
```

**åŠ¹æœ**:
- âœ… å°†æ¥ã®ä¸‹è¡Œãƒ¢ãƒ¼ãƒ‰å®Ÿè£…æ™‚ã«ã‚‚ä¸€è²«æ€§ç¢ºä¿
- âœ… `direction: 'descending'` ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã®æ˜ç¤ºçš„æŒ‡å®š
- âœ… ã‚³ãƒ¼ãƒ‰ãƒ™ãƒ¼ã‚¹å…¨ä½“ã®çµ±ä¸€æ€§å‘ä¸Š

### ä¿®æ­£ã®å…¨ä½“åƒ

#### Phase 1 + Phase A: å…¨14ç®‡æ‰€ã®ä¿®æ­£

| ãƒ•ã‚¡ã‚¤ãƒ« | ä¿®æ­£ç®‡æ‰€ | ãƒãƒ¼ã‚¸ãƒ§ãƒ³ | å†…å®¹ |
|---------|---------|-----------|------|
| results-overview-controller.js | 7ç®‡æ‰€ | v4.4.0 â†’ v4.6.0 | recordsé·ç§»çµ±ä¸€åŒ– + ä¸‹è¡Œãƒ¢ãƒ¼ãƒ‰ãƒœã‚¿ãƒ³çµ±ä¸€åŒ– |
| router.js | 2ç®‡æ‰€ | v2.0.0 â†’ v2.2.0 | records cleanupè¿½åŠ  + preparation cleanupæ”¹å–„ |
| preparation-pitchpro-cycle.js | 1ç®‡æ‰€ | v1.0.0 â†’ v1.1.0 | trainingé·ç§»çµ±ä¸€åŒ– |
| records-controller.js | 1ç®‡æ‰€ | v2.5.5 â†’ v2.5.6 | sessionStorage.clear()å‰Šé™¤ |
| index.html | 3ç®‡æ‰€ | - | ã‚­ãƒ£ãƒƒã‚·ãƒ¥ãƒã‚¹ãƒ†ã‚£ãƒ³ã‚° |

**åˆè¨ˆ**: 14ç®‡æ‰€ã®ä¿®æ­£ã€4ãƒ•ã‚¡ã‚¤ãƒ«ã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã‚¢ãƒƒãƒ—

### å½±éŸ¿ç¯„å›²åˆ†æ

#### ãƒªãƒ­ãƒ¼ãƒ‰ãƒ»ãƒ€ã‚¤ãƒ¬ã‚¯ãƒˆã‚¢ã‚¯ã‚»ã‚¹ã¸ã®å½±éŸ¿

**çµè«–**: âœ… **å½±éŸ¿ãªã— - ã™ã¹ã¦å®‰å®šå‹•ä½œä¿è¨¼**

**æ¤œè¨¼é …ç›®**:

1. **ãƒªãƒ­ãƒ¼ãƒ‰æ™‚ã®æŒ™å‹•**:
   - âœ… NavigationManagerã®ãƒªãƒ­ãƒ¼ãƒ‰æ¤œå‡ºãƒ­ã‚¸ãƒƒã‚¯ã¯å¤‰æ›´ãªã—
   - âœ… `normalTransition*` ãƒ•ãƒ©ã‚°ã®ç®¡ç†ã¯å¤‰æ›´ãªã—
   - âœ… Phase 1ã® `sessionStorage.clear()` å‰Šé™¤ã§ãƒ•ãƒ©ã‚°ä¿è­·ãŒå‘ä¸Š

2. **ãƒ€ã‚¤ãƒ¬ã‚¯ãƒˆã‚¢ã‚¯ã‚»ã‚¹æ™‚ã®æŒ™å‹•**:
   - âœ… `preparationPageActive` ãƒ•ãƒ©ã‚°ã®æ¤œå‡ºãƒ­ã‚¸ãƒƒã‚¯ã¯å¤‰æ›´ãªã—
   - âœ… Phase 1ã® `sessionStorage.clear()` å‰Šé™¤ã§ãƒ•ãƒ©ã‚°èª¤å‰Šé™¤ã‚’é˜²æ­¢
   - âœ… ãƒ€ã‚¤ãƒ¬ã‚¯ãƒˆã‚¢ã‚¯ã‚»ã‚¹èª¤æ¤œå‡ºãƒªã‚¹ã‚¯ãŒæ¸›å°‘

3. **é€šå¸¸é·ç§»æ™‚ã®æŒ™å‹•**:
   - âœ… NavigationManager.navigate() ã«ã‚ˆã‚‹çµ±ä¸€çš„ãªãƒ•ãƒ©ã‚°è¨­å®š
   - âœ… ãƒ•ã‚©ãƒ¼ãƒ«ãƒãƒƒã‚¯å‡¦ç†ã§å¾Œæ–¹äº’æ›æ€§ç¢ºä¿
   - âœ… ã™ã¹ã¦ã®é·ç§»ã§ãƒ•ãƒ©ã‚°ç®¡ç†ã®ä¸€è²«æ€§å‘ä¸Š

#### AudioDetectorç®¡ç†ã®æ”¹å–„

**ä¿®æ­£å‰ã®å•é¡Œ**:
```
preparation â†’ training é·ç§»æ™‚:
1. NavigationManagerãŒAudioDetectorã‚’ä¿æŒ
2. RouterãŒAudioDetectorã‚’ç ´æ£„
â†’ AudioDetectoräºŒé‡ç ´æ£„ãƒ»ãƒˆãƒ¬ãƒ¼ãƒ‹ãƒ³ã‚°é–‹å§‹ã‚¨ãƒ©ãƒ¼
```

**ä¿®æ­£å¾Œã®å‹•ä½œ**:
```
preparation â†’ training é·ç§»æ™‚:
1. NavigationManager.navigate('training') å®Ÿè¡Œ
2. NavigationManagerãŒAudioDetectorã‚’ç™»éŒ²ãƒ»ä¿æŒ
3. Router cleanupå®Ÿè¡Œ
4. currentAudioDetectorå­˜åœ¨ç¢ºèª â†’ cleanup ã‚¹ã‚­ãƒƒãƒ—
5. trainingãƒšãƒ¼ã‚¸ã§AudioDetectorä½¿ç”¨å¯èƒ½ âœ…
```

**åŠ¹æœ**:
- âœ… AudioDetectoräºŒé‡ç ´æ£„ã®å®Œå…¨é˜²æ­¢
- âœ… ãƒã‚¤ã‚¯å†åˆæœŸåŒ–ä¸è¦ï¼ˆãƒ¦ãƒ¼ã‚¶ãƒ¼ä½“é¨“å‘ä¸Šï¼‰
- âœ… NavigationManagerã¨Routerã®è²¬ä»»ç¯„å›²æ˜ç¢ºåŒ–
- âœ… ãƒˆãƒ¬ãƒ¼ãƒ‹ãƒ³ã‚°ãƒ•ãƒ­ãƒ¼ã®å®‰å®šæ€§å‘ä¸Š

### è¨­è¨ˆåŸå‰‡ã®ç¢ºç«‹

#### 1. NavigationManagerçµ±ä¸€APIå„ªå…ˆ

**åŸå‰‡**: ã™ã¹ã¦ã®ãƒšãƒ¼ã‚¸é·ç§»ã¯ `NavigationManager.navigate()` ã‚’ä½¿ç”¨

**ç†ç”±**:
- ãƒ•ãƒ©ã‚°è‡ªå‹•è¨­å®šï¼ˆ`preparationPageActive`, `normalTransition*`ï¼‰
- AudioDetectorãƒ©ã‚¤ãƒ•ã‚µã‚¤ã‚¯ãƒ«ç®¡ç†
- ãƒ€ã‚¤ãƒ¬ã‚¯ãƒˆã‚¢ã‚¯ã‚»ã‚¹æ¤œå‡ºã®æ­£ç¢ºæ€§ä¿è¨¼

**ä¾‹å¤–**: NavigationManageræœªå®šç¾©æ™‚ã®ãƒ•ã‚©ãƒ¼ãƒ«ãƒãƒƒã‚¯å‡¦ç†ã®ã¿

#### 2. Router cleanup ã®è²¬ä»»ç¯„å›²æ˜ç¢ºåŒ–

**åŸå‰‡**: Routerã¯ãƒšãƒ¼ã‚¸å›ºæœ‰ã®ãƒªã‚½ãƒ¼ã‚¹ã®ã¿ã‚¯ãƒªãƒ¼ãƒ³ã‚¢ãƒƒãƒ—

**ç®¡ç†å¯¾è±¡**:
- ãƒšãƒ¼ã‚¸å›ºæœ‰ã®DOMè¦ç´ 
- ãƒšãƒ¼ã‚¸å›ºæœ‰ã®ã‚¤ãƒ™ãƒ³ãƒˆãƒªã‚¹ãƒŠãƒ¼
- ãƒšãƒ¼ã‚¸å›ºæœ‰ã®ä¸€æ™‚ãƒ‡ãƒ¼ã‚¿

**ç®¡ç†å¯¾è±¡å¤–**:
- NavigationManagerãŒç®¡ç†ã™ã‚‹AudioDetector
- NavigationManagerãŒç®¡ç†ã™ã‚‹sessionStorageãƒ•ãƒ©ã‚°
- ã‚°ãƒ­ãƒ¼ãƒãƒ«ã‚¹ã‚³ãƒ¼ãƒ—ã®ã‚·ãƒ³ã‚°ãƒ«ãƒˆãƒ³

#### 3. sessionStorageç®¡ç†ã®ä¸€å…ƒåŒ–

**åŸå‰‡**: sessionStorageãƒ•ãƒ©ã‚°ã¯NavigationManagerã®ã¿ãŒç®¡ç†

**ç¦æ­¢äº‹é …**:
- âŒ `sessionStorage.clear()` ã®ç„¡æ¡ä»¶å®Ÿè¡Œ
- âŒ å€‹åˆ¥ã‚³ãƒ³ãƒˆãƒ­ãƒ¼ãƒ©ãƒ¼ã§ã®ãƒ•ãƒ©ã‚°ç›´æ¥æ“ä½œ
- âŒ NavigationManagerç®¡ç†ãƒ•ãƒ©ã‚°ã®æ‰‹å‹•å‰Šé™¤

**è¨±å¯äº‹é …**:
- âœ… NavigationManager APIã‚’é€šã˜ãŸãƒ•ãƒ©ã‚°è¨­å®š
- âœ… èª­ã¿å–ã‚Šå°‚ç”¨ã®ãƒ•ãƒ©ã‚°ç¢ºèª
- âœ… ãƒšãƒ¼ã‚¸å›ºæœ‰ã®ä¸€æ™‚ãƒ‡ãƒ¼ã‚¿ç®¡ç†

### ãƒãƒ¼ã‚¸ãƒ§ãƒ³

**Phase 1**:
- results-overview-controller.js: v4.4.0 â†’ v4.5.0
- router.js: v2.0.0 â†’ v2.1.0

**Phase A**:
- router.js: v2.1.0 â†’ v2.2.0
- preparation-pitchpro-cycle.js: v1.0.0 â†’ v1.1.0
- results-overview-controller.js: v4.5.0 â†’ v4.6.0
- records-controller.js: v2.5.5 â†’ v2.5.6

**å‚è€ƒ**:
- Serenaãƒ¡ãƒ¢ãƒª `PERM-microphone-permission-skip-analysis-20251119`
- ä»•æ§˜æ›¸ `NAVIGATION_HANDLING_SPECIFICATION.md` v5.0.0

---

## ç¾åœ¨ã®SPAã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£å…¨ä½“åƒ

### ã‚·ã‚¹ãƒ†ãƒ æ§‹æˆå›³

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                  Index.html (Entry Point)                â”‚
â”‚  - å…¨ã‚¹ã‚¯ãƒªãƒ—ãƒˆäº‹å‰èª­ã¿è¾¼ã¿ï¼ˆRouter, NavigationManagerç­‰ï¼‰â”‚
â”‚  - SPAã‚³ãƒ³ãƒ†ãƒŠ <main id="app-root"> å®šç¾©               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                     â”‚
                     â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              Router (SimpleRouter v2.2.0)                â”‚
â”‚  - Hash-based Routing (window.location.hashç›£è¦–)        â”‚
â”‚  - pageConfigsè¨­å®šãƒ¬ã‚¸ã‚¹ãƒˆãƒªï¼ˆå…¨8ãƒšãƒ¼ã‚¸ï¼‰               â”‚
â”‚  - çµ±ä¸€åˆæœŸåŒ–ã‚·ã‚¹ãƒ†ãƒ ï¼ˆsetupPageEventsï¼‰                â”‚
â”‚  - ä¾å­˜é–¢ä¿‚å¾…æ©Ÿï¼ˆwaitForDependenciesï¼‰                   â”‚
â”‚  - cleanupç®¡ç†ï¼ˆcleanupCurrentPageï¼‰                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                     â”‚
                     â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚        NavigationManager (Singleton v4.3.2)             â”‚
â”‚  - 2ãƒ•ãƒ©ã‚°ã‚·ã‚¹ãƒ†ãƒ ç®¡ç†ï¼ˆé·ç§»è¨¼æ˜ + ãƒšãƒ¼ã‚¸çŠ¶æ…‹ï¼‰         â”‚
â”‚  - AudioDetectorãƒ©ã‚¤ãƒ•ã‚µã‚¤ã‚¯ãƒ«ç®¡ç†                       â”‚
â”‚  - ãƒªãƒ­ãƒ¼ãƒ‰ãƒ»ãƒ€ã‚¤ãƒ¬ã‚¯ãƒˆã‚¢ã‚¯ã‚»ã‚¹æ¤œå‡º                     â”‚
â”‚  - ãƒ–ãƒ©ã‚¦ã‚¶ãƒãƒƒã‚¯é˜²æ­¢                                   â”‚
â”‚  - çµ±ä¸€ãƒŠãƒ“ã‚²ãƒ¼ã‚·ãƒ§ãƒ³APIï¼ˆnavigate()ï¼‰                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                     â”‚
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â–¼            â–¼            â–¼
  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚  Page 1  â”‚  â”‚  Page 2  â”‚  â”‚  Page 8  â”‚
  â”‚   home   â”‚  â”‚preparationâ”‚  â”‚ settings â”‚
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
     â”‚              â”‚              â”‚
     â–¼              â–¼              â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚Controllerâ”‚  â”‚Controllerâ”‚  â”‚Controllerâ”‚
â”‚   ãªã—   â”‚  â”‚PitchPro â”‚  â”‚   ãªã—   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### å…¨8ãƒšãƒ¼ã‚¸ã®æ§‹æˆ

| ãƒšãƒ¼ã‚¸ | URL | åˆæœŸåŒ–é–¢æ•° | ä¾å­˜é–¢ä¿‚ | äºŒé‡é˜²æ­¢ | ç‰¹è¨˜äº‹é … |
|--------|-----|----------|---------|---------|---------|
| home | #home | setupHomeEvents | ãªã— | ãªã— | ãƒˆãƒƒãƒ—ãƒšãƒ¼ã‚¸ |
| preparation | #preparation | initializePreparationPitchProCycle | PitchPro | ãªã— | ãƒã‚¤ã‚¯ãƒ†ã‚¹ãƒˆãƒ»éŸ³åŸŸãƒ†ã‚¹ãƒˆ |
| training | #training | initializeTrainingPage | PitchPro | ãªã— | ãƒˆãƒ¬ãƒ¼ãƒ‹ãƒ³ã‚°å®Ÿè¡Œ |
| result-session | #result-session | initializeResultSessionPage | ãªã— | ãªã— | ã‚»ãƒƒã‚·ãƒ§ãƒ³çµæœè¡¨ç¤º |
| results-overview | #results-overview | initResultsOverview | Chart, DistChart | âœ… | ç·åˆè©•ä¾¡è¡¨ç¤º |
| records | #records | initRecords | Chart, DistChart | ãªã— | ãƒˆãƒ¬ãƒ¼ãƒ‹ãƒ³ã‚°è¨˜éŒ² |
| premium-analysis | #premium-analysis | initPremiumAnalysis | Chart | ãªã— | è©³ç´°åˆ†æ |
| settings | #settings | initSettings | ãªã— | ãªã— | è¨­å®šãƒ»ãƒ‡ãƒ¼ã‚¿ç®¡ç† |

### æ ¸å¿ƒçš„ãª3ã¤ã®ã‚·ã‚¹ãƒ†ãƒ 

#### 1. 2ãƒ•ãƒ©ã‚°ã‚·ã‚¹ãƒ†ãƒ ï¼ˆãƒªãƒ­ãƒ¼ãƒ‰ãƒ»ãƒ€ã‚¤ãƒ¬ã‚¯ãƒˆã‚¢ã‚¯ã‚»ã‚¹å¯¾å¿œï¼‰

**ãƒ•ãƒ©ã‚°æ§‹æˆ**:
```javascript
// é·ç§»è¨¼æ˜ãƒ•ãƒ©ã‚°ï¼ˆä¸€æ™‚çš„ï¼‰
sessionStorage.setItem('normalTransitionToPreparation', 'true');
sessionStorage.setItem('normalTransitionToTraining', 'true');

// ãƒšãƒ¼ã‚¸çŠ¶æ…‹ãƒ•ãƒ©ã‚°ï¼ˆæ°¸ç¶šçš„ï¼‰
sessionStorage.setItem('preparationPageActive', 'true');
sessionStorage.setItem('trainingPageActive', 'true');
```

**å‹•ä½œãƒ•ãƒ­ãƒ¼**:
```
é·ç§»å‰: é·ç§»è¨¼æ˜ãƒ•ãƒ©ã‚°è¨­å®š
  â†“
é·ç§»é–‹å§‹: window.location.hashå¤‰æ›´
  â†“
é·ç§»å¾Œ: checkPageAccess()
  â†“
é·ç§»è¨¼æ˜ãƒ•ãƒ©ã‚°ç¢ºèª â†’ ã‚ã‚Š: æ­£å¸¸ãªé·ç§»
  â†’ é·ç§»è¨¼æ˜ãƒ•ãƒ©ã‚°å‰Šé™¤
  â†’ ãƒšãƒ¼ã‚¸çŠ¶æ…‹ãƒ•ãƒ©ã‚°è¨­å®š
  â†’ åˆæœŸåŒ–ç¶šè¡Œ
  â†“
é·ç§»è¨¼æ˜ãƒ•ãƒ©ã‚°ç¢ºèª â†’ ãªã—: ãƒªãƒ­ãƒ¼ãƒ‰ã¾ãŸã¯ãƒ€ã‚¤ãƒ¬ã‚¯ãƒˆã‚¢ã‚¯ã‚»ã‚¹
  â†’ ãƒšãƒ¼ã‚¸çŠ¶æ…‹ãƒ•ãƒ©ã‚°ç¢ºèª â†’ ã‚ã‚Š: ãƒªãƒ­ãƒ¼ãƒ‰åˆ¤å®š
  â†’ ãƒšãƒ¼ã‚¸çŠ¶æ…‹ãƒ•ãƒ©ã‚°ç¢ºèª â†’ ãªã—: ãƒ€ã‚¤ãƒ¬ã‚¯ãƒˆã‚¢ã‚¯ã‚»ã‚¹åˆ¤å®š
```

#### 2. Routerçµ±ä¸€åˆæœŸåŒ–ã‚·ã‚¹ãƒ†ãƒ ï¼ˆãƒšãƒ¼ã‚¸åˆæœŸåŒ–ï¼‰

**è¨­å®šãƒ™ãƒ¼ã‚¹ç®¡ç†**:
```javascript
this.pageConfigs = {
    'results-overview': {
        init: 'initResultsOverview',                    // åˆæœŸåŒ–é–¢æ•°å
        dependencies: ['Chart', 'DistributionChart'],   // ä¾å­˜ãƒ©ã‚¤ãƒ–ãƒ©ãƒª
        preventDoubleInit: true                         // äºŒé‡åˆæœŸåŒ–é˜²æ­¢
    }
};
```

**åˆæœŸåŒ–ãƒ•ãƒ­ãƒ¼**:
```
setupPageEvents(page)
  â†“
1. pageConfigsè¨­å®šå–å¾—
  â†“
2. äºŒé‡åˆæœŸåŒ–ãƒã‚§ãƒƒã‚¯
  â†“
3. ä¾å­˜é–¢ä¿‚å¾…æ©Ÿï¼ˆChart.js, PitchProç­‰ï¼‰
  â†“
4. ã‚°ãƒ­ãƒ¼ãƒãƒ«åˆæœŸåŒ–é–¢æ•°å®Ÿè¡Œ
  â†“
5. åˆæœŸåŒ–æ¸ˆã¿ãƒãƒ¼ã‚¯
```

#### 3. NavigationManagerçµ±ä¸€APIï¼ˆãƒã‚¤ã‚¯ç®¡ç†ãƒ»ãƒŠãƒ“ã‚²ãƒ¼ã‚·ãƒ§ãƒ³ï¼‰

**çµ±ä¸€ãƒŠãƒ“ã‚²ãƒ¼ã‚·ãƒ§ãƒ³API**:
```javascript
NavigationManager.navigate(page, params)
  â†“
1. AudioDetectorãƒ©ã‚¤ãƒ•ã‚µã‚¤ã‚¯ãƒ«åˆ¤å®šï¼ˆisTrainingFlowï¼‰
  â†“
2. é·ç§»è¨¼æ˜ãƒ•ãƒ©ã‚°è‡ªå‹•è¨­å®š
  â†“
3. AudioDetectorä¿æŒ or ç ´æ£„
  â†“
4. URLãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿æ§‹ç¯‰
  â†“
5. ãƒšãƒ¼ã‚¸é·ç§»å®Ÿè¡Œ
```

**AudioDetectorç®¡ç†**:
```javascript
// ãƒˆãƒ¬ãƒ¼ãƒ‹ãƒ³ã‚°ãƒ•ãƒ­ãƒ¼: ä¿æŒ
if (isTrainingFlow(from, to)) {
    registerAudioDetector(audioDetector);  // ä¿æŒ
}

// éãƒˆãƒ¬ãƒ¼ãƒ‹ãƒ³ã‚°ãƒ•ãƒ­ãƒ¼: ç ´æ£„
else {
    _destroyAudioDetector(audioDetector);  // ç ´æ£„
}
```

### ãƒ‡ãƒ¼ã‚¿ãƒ•ãƒ­ãƒ¼å…¨ä½“åƒ

```
ãƒ¦ãƒ¼ã‚¶ãƒ¼ã‚¢ã‚¯ã‚·ãƒ§ãƒ³ï¼ˆãƒœã‚¿ãƒ³ã‚¯ãƒªãƒƒã‚¯ç­‰ï¼‰
  â†“
NavigationManager.navigate('target-page', params)
  â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ NavigationManagerå‰å‡¦ç†             â”‚
â”‚ - isTrainingFlowåˆ¤å®š                â”‚
â”‚ - AudioDetectorãƒ©ã‚¤ãƒ•ã‚µã‚¤ã‚¯ãƒ«ç®¡ç†   â”‚
â”‚ - é·ç§»è¨¼æ˜ãƒ•ãƒ©ã‚°è¨­å®š                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
  â†“
window.location.hash = 'target-page'
  â†“
hashchangeã‚¤ãƒ™ãƒ³ãƒˆç™ºç«
  â†“
Router.loadPage('target-page')
  â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Routerå‰å‡¦ç†                        â”‚
â”‚ - cleanupCurrentPage()              â”‚
â”‚ - ãƒšãƒ¼ã‚¸ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆèª­ã¿è¾¼ã¿        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
  â†“
NavigationManager.checkPageAccess('target-page')
  â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ NavigationManager ã‚¢ã‚¯ã‚»ã‚¹åˆ¶å¾¡      â”‚
â”‚ - é·ç§»è¨¼æ˜ãƒ•ãƒ©ã‚°ç¢ºèª                â”‚
â”‚ - ãƒªãƒ­ãƒ¼ãƒ‰æ¤œå‡º                      â”‚
â”‚ - ãƒ€ã‚¤ãƒ¬ã‚¯ãƒˆã‚¢ã‚¯ã‚»ã‚¹æ¤œå‡º            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
  â†“
Router.setupPageEvents('target-page')
  â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Router åˆæœŸåŒ–å‡¦ç†                   â”‚
â”‚ - pageConfigsè¨­å®šå–å¾—               â”‚
â”‚ - ä¾å­˜é–¢ä¿‚å¾…æ©Ÿ                      â”‚
â”‚ - åˆæœŸåŒ–é–¢æ•°å®Ÿè¡Œ                    â”‚
â”‚ - äºŒé‡åˆæœŸåŒ–é˜²æ­¢                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
  â†“
ãƒšãƒ¼ã‚¸è¡¨ç¤ºå®Œäº†
```

---

## ã‚·ã‚¹ãƒ†ãƒ ãƒ•ã‚¡ã‚¤ãƒ«ä¸€è¦§

### ã‚³ãƒ³ãƒˆãƒ­ãƒ¼ãƒ©ãƒ¼ï¼ˆPage Controllersï¼‰

**é…ç½®å ´æ‰€**: `/pages/js/`

| ãƒ•ã‚¡ã‚¤ãƒ«å | ãƒãƒ¼ã‚¸ãƒ§ãƒ³ | ã‚°ãƒ­ãƒ¼ãƒãƒ«é–¢æ•° | ä¾å­˜é–¢ä¿‚ | å½¹å‰² |
|-----------|----------|--------------|---------|------|
| **preparation-pitchpro-cycle.js** | v1.1.0 | initializePreparationPitchProCycle | PitchPro | æº–å‚™ãƒšãƒ¼ã‚¸ãƒ»ãƒã‚¤ã‚¯ãƒ†ã‚¹ãƒˆãƒ»éŸ³åŸŸãƒ†ã‚¹ãƒˆ |
| **result-session-controller.js** | v3.0.0 | initializeResultSessionPage | - | ã‚»ãƒƒã‚·ãƒ§ãƒ³çµæœè¡¨ç¤ºãƒ»è©•ä¾¡ã‚°ãƒ¬ãƒ¼ãƒ‰è¡¨ç¤º |
| **results-overview-controller.js** | v4.6.0 | initResultsOverview | Chart, DistChart | ç·åˆè©•ä¾¡è¡¨ç¤ºãƒ»æ¬¡ã®ã‚¹ãƒ†ãƒƒãƒ—ææ¡ˆ |
| **records-controller.js** | v2.5.6 | initRecords | Chart, DistChart | ãƒˆãƒ¬ãƒ¼ãƒ‹ãƒ³ã‚°è¨˜éŒ²ä¸€è¦§ãƒ»çµ±è¨ˆæƒ…å ± |
| **settings-controller.js** | v1.0.0 | initSettings | - | è¨­å®šãƒ»ãƒ‡ãƒ¼ã‚¿ç®¡ç†ãƒ»ã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆ |
| **premium-analysis-controller.js** | v1.0.0 | initPremiumAnalysis | Chart | è©³ç´°åˆ†æãƒ»é«˜åº¦ãªçµ±è¨ˆæƒ…å ± |
| **premium-analysis-calculator.js** | v1.0.0 | PremiumAnalysisCalculator | - | è©³ç´°åˆ†æã®è¨ˆç®—ãƒ­ã‚¸ãƒƒã‚¯ |
| **voice-range-test.js** | v1.0.0 | initVoiceRangeTest | PitchPro | éŸ³åŸŸãƒ†ã‚¹ãƒˆæ©Ÿèƒ½ï¼ˆæº–å‚™ãƒšãƒ¼ã‚¸ã§ä½¿ç”¨ï¼‰ |

### ã‚³ã‚¢ã‚·ã‚¹ãƒ†ãƒ ï¼ˆCore Systemsï¼‰

**é…ç½®å ´æ‰€**: `/js/`

| ãƒ•ã‚¡ã‚¤ãƒ«å | ãƒãƒ¼ã‚¸ãƒ§ãƒ³ | ç¨®é¡ | å½¹å‰² | é‡è¦åº¦ |
|-----------|----------|------|------|--------|
| **router.js** | v2.2.0 | Router | SPAçµ±ä¸€ãƒ«ãƒ¼ãƒ†ã‚£ãƒ³ã‚°ãƒ»ãƒšãƒ¼ã‚¸åˆæœŸåŒ–ç®¡ç† | ğŸ”´ æœ€é«˜ |
| **navigation-manager.js** | v4.3.2 | Manager | ãƒŠãƒ“ã‚²ãƒ¼ã‚·ãƒ§ãƒ³ãƒ»ãƒªã‚½ãƒ¼ã‚¹ç®¡ç†ãƒ»2ãƒ•ãƒ©ã‚°ã‚·ã‚¹ãƒ†ãƒ  | ğŸ”´ æœ€é«˜ |
| **data-manager.js** | v1.0.0 | Manager | localStorageçµ±ä¸€ç®¡ç†ãƒ»ãƒ‡ãƒ¼ã‚¿æ°¸ç¶šåŒ– | ğŸ”´ æœ€é«˜ |
| **session-manager.js** | v1.0.0 | Manager | ã‚»ãƒƒã‚·ãƒ§ãƒ³ç®¡ç†ãƒ»ModeControllerçµ±åˆ | ğŸ”´ æœ€é«˜ |
| **mode-controller.js** | v2.1.0 | Controller | ãƒ¢ãƒ¼ãƒ‰ç®¡ç†ãƒ»æ–¹å‘åˆ¥è¡¨ç¤ºåç®¡ç† | ğŸ”´ æœ€é«˜ |
| **session-data-manager.js** | v1.0.0 | Manager | sessionDataï¼ˆlocalStorageï¼‰ç®¡ç† | ğŸŸ¡ ä¸­ |
| **evaluation-calculator.js** | v1.0.0 | Utility | è©•ä¾¡è¨ˆç®—ãƒ­ã‚¸ãƒƒã‚¯ãƒ»ã‚°ãƒ¬ãƒ¼ãƒ‰åˆ¤å®š | ğŸŸ¡ ä¸­ |
| **subscription-manager.js** | v1.0.0 | Manager | èª²é‡‘ãƒ»ã‚µãƒ–ã‚¹ã‚¯ãƒªãƒ—ã‚·ãƒ§ãƒ³ç®¡ç† | ğŸŸ¢ ä½ |
| **home-direction-tabs.js** | v1.0.0 | UI | ãƒ›ãƒ¼ãƒ ãƒšãƒ¼ã‚¸æ–¹å‘ã‚¿ãƒ–æ©Ÿèƒ½ | ğŸŸ¢ ä½ |
| **lucide-init.js** | v2.0.1 | UI | Lucideã‚¢ã‚¤ã‚³ãƒ³çµ±åˆåˆæœŸåŒ–ã‚·ã‚¹ãƒ†ãƒ  | ğŸŸ¡ ä¸­ |

### ã‚µãƒ–ã‚³ãƒ³ãƒˆãƒ­ãƒ¼ãƒ©ãƒ¼ï¼ˆSub Controllersï¼‰

**é…ç½®å ´æ‰€**: `/js/controllers/`

| ãƒ•ã‚¡ã‚¤ãƒ«å | ãƒãƒ¼ã‚¸ãƒ§ãƒ³ | å½¹å‰² | ä½¿ç”¨ç®‡æ‰€ |
|-----------|----------|------|---------|
| **trainingController.js** | v3.2.0 | ãƒˆãƒ¬ãƒ¼ãƒ‹ãƒ³ã‚°å®Ÿè¡Œãƒ»éŸ³ç¨‹æ¤œå‡ºãƒ»è©•ä¾¡è¨˜éŒ² | trainingãƒšãƒ¼ã‚¸ |
| **preparationController.js** | v1.0.0 | æº–å‚™ãƒšãƒ¼ã‚¸ãƒ­ã‚¸ãƒƒã‚¯ï¼ˆæ—§ç‰ˆãƒ»éä½¿ç”¨ï¼‰ | - |
| **session-data-recorder.js** | v1.0.0 | ã‚»ãƒƒã‚·ãƒ§ãƒ³ãƒ‡ãƒ¼ã‚¿è¨˜éŒ²ãƒ»localStorageä¿å­˜ | trainingãƒšãƒ¼ã‚¸ |

### ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆï¼ˆReusable Componentsï¼‰

**é…ç½®å ´æ‰€**: `/js/components/`

| ãƒ•ã‚¡ã‚¤ãƒ«å | ãƒãƒ¼ã‚¸ãƒ§ãƒ³ | å½¹å‰² | ä½¿ç”¨ç®‡æ‰€ |
|-----------|----------|------|---------|
| **DistributionChart.js** | v2.0.0 | è©•ä¾¡åˆ†å¸ƒã‚°ãƒ©ãƒ•çµ±ä¸€è¡¨ç¤ºã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ | results-overview, records |
| **loading-component.js** | v1.0.0 | ãƒ­ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°è¡¨ç¤ºçµ±ä¸€ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ | å…¨ãƒšãƒ¼ã‚¸ |
| **index.js** | v1.0.0 | ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆç®¡ç† | - |

### ã‚³ã‚¢ãƒ©ã‚¤ãƒ–ãƒ©ãƒªï¼ˆCore Librariesï¼‰

**é…ç½®å ´æ‰€**: `/js/core/`

#### PitchPro Audio Processingï¼ˆå°‚ç”¨é–‹ç™ºãƒ©ã‚¤ãƒ–ãƒ©ãƒªï¼‰

**ãƒªãƒã‚¸ãƒˆãƒª**: https://github.com/kiyopi/pitchpro-audio-processing

**æ¦‚è¦**: ã“ã®ã‚¢ãƒ—ãƒªã®ãŸã‚ã«å°‚ç”¨é–‹ç™ºã•ã‚ŒãŸéŸ³å£°å‡¦ç†ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã€‚ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ éŸ³ç¨‹æ¤œå‡ºã€éŸ³é‡æ¸¬å®šã€æ˜ç­åº¦åˆ¤å®šã‚’æä¾›ã€‚

| ãƒ•ã‚¡ã‚¤ãƒ«å | ãƒãƒ¼ã‚¸ãƒ§ãƒ³ | å½¹å‰² | é‡è¦åº¦ |
|-----------|----------|------|--------|
| **pitchpro-v1.3.5.umd.js** | v1.3.5 | PitchProæœ¬ä½“ï¼ˆæœ€æ–°ç‰ˆãƒ»ä½¿ç”¨ä¸­ï¼‰ | ğŸ”´ æœ€é«˜ |
| **pitchpro-config.js** | v1.0.0 | PitchProè¨­å®šç®¡ç† | ğŸ”´ æœ€é«˜ |
| **pitchpro-v1.3.4.umd.js** | v1.3.4 | PitchProï¼ˆæ—§ç‰ˆãƒ»éä½¿ç”¨ï¼‰ | ğŸŸ¢ ä½ |
| **pitchpro-v1.3.3.umd.js** | v1.3.3 | PitchProï¼ˆæ—§ç‰ˆãƒ»éä½¿ç”¨ï¼‰ | ğŸŸ¢ ä½ |
| **pitchpro-v1.3.1.umd.js** | v1.3.1 | PitchProï¼ˆæ—§ç‰ˆãƒ»éä½¿ç”¨ï¼‰ | ğŸŸ¢ ä½ |

#### ãã®ä»–ã‚³ã‚¢ãƒ©ã‚¤ãƒ–ãƒ©ãƒª

| ãƒ•ã‚¡ã‚¤ãƒ«å | ãƒãƒ¼ã‚¸ãƒ§ãƒ³ | å½¹å‰² | é‡è¦åº¦ |
|-----------|----------|------|--------|
| **device-detector.js** | v1.0.0 | ãƒ‡ãƒã‚¤ã‚¹æ¤œå‡ºï¼ˆiPadOS 13+å¯¾å¿œï¼‰ | ğŸ”´ æœ€é«˜ |
| **global-audio-manager.js** | v1.0.0 | ã‚°ãƒ­ãƒ¼ãƒãƒ«ã‚ªãƒ¼ãƒ‡ã‚£ã‚ªç®¡ç† | ğŸŸ¡ ä¸­ |
| **mic-permission-manager.js** | v1.0.0 | ãƒã‚¤ã‚¯è¨±å¯ç®¡ç† | ğŸŸ¡ ä¸­ |
| **reference-tones.js** | v2.9.0 | PitchShifterãƒ»åŸºéŸ³å†ç”Ÿ | ğŸŸ¡ ä¸­ |

### ãƒ¦ãƒ¼ãƒ†ã‚£ãƒªãƒ†ã‚£ï¼ˆUtilitiesï¼‰

**é…ç½®å ´æ‰€**: `/js/utils/`

| ãƒ•ã‚¡ã‚¤ãƒ«å | ãƒãƒ¼ã‚¸ãƒ§ãƒ³ | å½¹å‰² | ä½¿ç”¨ç®‡æ‰€ |
|-----------|----------|------|---------|
| **music-theory.js** | v1.0.0 | éŸ³æ¥½ç†è«–ãƒ¦ãƒ¼ãƒ†ã‚£ãƒªãƒ†ã‚£ãƒ»å‘¨æ³¢æ•°è¨ˆç®— | å…¨ãƒšãƒ¼ã‚¸ |

### ä¾å­˜é–¢ä¿‚ãƒãƒƒãƒ—

#### ãƒšãƒ¼ã‚¸ãƒ¬ãƒ™ãƒ«ã®ä¾å­˜é–¢ä¿‚

```
preparation
â”œâ”€â”€ PitchPro (v1.3.5)
â”œâ”€â”€ device-detector.js
â”œâ”€â”€ global-audio-manager.js
â”œâ”€â”€ mic-permission-manager.js
â””â”€â”€ voice-range-test.js

training
â”œâ”€â”€ PitchPro (v1.3.5)
â”œâ”€â”€ trainingController.js
â”œâ”€â”€ session-data-recorder.js
â”œâ”€â”€ evaluation-calculator.js
â””â”€â”€ mode-controller.js

results-overview
â”œâ”€â”€ Chart.js (CDN)
â”œâ”€â”€ DistributionChart.js
â”œâ”€â”€ evaluation-calculator.js
â””â”€â”€ mode-controller.js

records
â”œâ”€â”€ Chart.js (CDN)
â”œâ”€â”€ DistributionChart.js
â””â”€â”€ data-manager.js

premium-analysis
â”œâ”€â”€ Chart.js (CDN)
â”œâ”€â”€ premium-analysis-calculator.js
â””â”€â”€ data-manager.js

settings
â”œâ”€â”€ data-manager.js
â””â”€â”€ subscription-manager.js
```

#### ã‚·ã‚¹ãƒ†ãƒ ãƒ¬ãƒ™ãƒ«ã®ä¾å­˜é–¢ä¿‚

```
Router (v2.2.0)
â”œâ”€â”€ NavigationManager (v4.3.2)
â”‚   â”œâ”€â”€ PitchPro (AudioDetectorç®¡ç†)
â”‚   â””â”€â”€ sessionStorageï¼ˆ2ãƒ•ãƒ©ã‚°ã‚·ã‚¹ãƒ†ãƒ ï¼‰
â”‚
â”œâ”€â”€ pageConfigsï¼ˆè¨­å®šãƒ¬ã‚¸ã‚¹ãƒˆãƒªï¼‰
â”‚   â”œâ”€â”€ Chart.jsä¾å­˜é–¢ä¿‚å¾…æ©Ÿ
â”‚   â”œâ”€â”€ DistributionChartä¾å­˜é–¢ä¿‚å¾…æ©Ÿ
â”‚   â””â”€â”€ PitchProä¾å­˜é–¢ä¿‚å¾…æ©Ÿ
â”‚
â””â”€â”€ å…¨Controllerã®ã‚°ãƒ­ãƒ¼ãƒãƒ«é–¢æ•°
    â”œâ”€â”€ window.initializePreparationPitchProCycle
    â”œâ”€â”€ window.initializeResultSessionPage
    â”œâ”€â”€ window.initResultsOverview
    â”œâ”€â”€ window.initRecords
    â”œâ”€â”€ window.initPremiumAnalysis
    â””â”€â”€ window.initSettings
```

### ãƒ•ã‚¡ã‚¤ãƒ«å‘½åè¦å‰‡

#### ã‚³ãƒ³ãƒˆãƒ­ãƒ¼ãƒ©ãƒ¼

**ãƒ‘ã‚¿ãƒ¼ãƒ³**: `[ãƒšãƒ¼ã‚¸å]-controller.js`

**ä¾‹å¤–**:
- `preparation-pitchpro-cycle.js`: æº–å‚™ãƒšãƒ¼ã‚¸ï¼ˆPitchProçµ±åˆã‚’æ˜ç¤ºï¼‰
- `premium-analysis-calculator.js`: è¨ˆç®—ãƒ­ã‚¸ãƒƒã‚¯åˆ†é›¢

#### ãƒãƒãƒ¼ã‚¸ãƒ£ãƒ¼

**ãƒ‘ã‚¿ãƒ¼ãƒ³**: `[æ©Ÿèƒ½å]-manager.js`

**ä¾‹**:
- `navigation-manager.js`: ãƒŠãƒ“ã‚²ãƒ¼ã‚·ãƒ§ãƒ³ç®¡ç†
- `data-manager.js`: ãƒ‡ãƒ¼ã‚¿ç®¡ç†
- `session-manager.js`: ã‚»ãƒƒã‚·ãƒ§ãƒ³ç®¡ç†

#### ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ

**ãƒ‘ã‚¿ãƒ¼ãƒ³**: `[ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆå].js` ã¾ãŸã¯ `[æ©Ÿèƒ½å]-component.js`

**ä¾‹**:
- `DistributionChart.js`: PascalCaseï¼ˆReactãƒ‘ã‚¿ãƒ¼ãƒ³è¸è¥²ï¼‰
- `loading-component.js`: kebab-case

#### ãƒ¦ãƒ¼ãƒ†ã‚£ãƒªãƒ†ã‚£

**ãƒ‘ã‚¿ãƒ¼ãƒ³**: `[æ©Ÿèƒ½å].js`

**ä¾‹**:
- `music-theory.js`: éŸ³æ¥½ç†è«–ãƒ¦ãƒ¼ãƒ†ã‚£ãƒªãƒ†ã‚£

### ãƒãƒ¼ã‚¸ãƒ§ãƒ³ç®¡ç†æˆ¦ç•¥

#### ãƒ¡ã‚¸ãƒ£ãƒ¼ãƒãƒ¼ã‚¸ãƒ§ãƒ³å¤‰æ›´ï¼ˆX.0.0ï¼‰

**æ¡ä»¶**: ç ´å£Šçš„å¤‰æ›´ãƒ»ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹å¤‰æ›´

**ä¾‹**:
- router.js v1.0.0 â†’ v2.0.0: pageConfigsçµ±ä¸€åˆæœŸåŒ–ã‚·ã‚¹ãƒ†ãƒ å°å…¥
- results-overview-controller.js v3.0.0 â†’ v4.0.0: NavigationManagerçµ±ä¸€APIç§»è¡Œ

#### ãƒã‚¤ãƒŠãƒ¼ãƒãƒ¼ã‚¸ãƒ§ãƒ³å¤‰æ›´ï¼ˆx.X.0ï¼‰

**æ¡ä»¶**: æ–°æ©Ÿèƒ½è¿½åŠ ãƒ»å¾Œæ–¹äº’æ›æ€§ç¶­æŒ

**ä¾‹**:
- navigation-manager.js v4.3.0 â†’ v4.3.2: preparationãƒšãƒ¼ã‚¸2ãƒ•ãƒ©ã‚°ã‚·ã‚¹ãƒ†ãƒ è¿½åŠ 
- mode-controller.js v2.0.0 â†’ v2.1.0: æ–¹å‘åˆ¥è¡¨ç¤ºåç®¡ç†è¿½åŠ 

#### ãƒ‘ãƒƒãƒãƒãƒ¼ã‚¸ãƒ§ãƒ³å¤‰æ›´ï¼ˆx.x.Xï¼‰

**æ¡ä»¶**: ãƒã‚°ä¿®æ­£ã®ã¿

**ä¾‹**:
- results-overview-controller.js v4.5.0 â†’ v4.5.1: sessionStorage.clear()å‰Šé™¤

### å»ƒæ­¢äºˆå®šãƒ•ã‚¡ã‚¤ãƒ«

| ãƒ•ã‚¡ã‚¤ãƒ«å | ç†ç”± | ä»£æ›¿ | å‰Šé™¤äºˆå®š |
|-----------|------|------|---------|
| **preparationController.js** | éä½¿ç”¨ï¼ˆpreparation-pitchpro-cycle.jsã«çµ±åˆï¼‰ | preparation-pitchpro-cycle.js | Phase 5 |
| **trainingController.old.js** | ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—ãƒ•ã‚¡ã‚¤ãƒ« | trainingController.js | Phase 5 |
| **pitchpro-v1.3.1.umd.js** | æ—§ãƒãƒ¼ã‚¸ãƒ§ãƒ³ | pitchpro-v1.3.5.umd.js | Phase 5 |
| **pitchpro-v1.3.3.umd.js** | æ—§ãƒãƒ¼ã‚¸ãƒ§ãƒ³ | pitchpro-v1.3.5.umd.js | Phase 5 |
| **pitchpro-v1.3.4.umd.js** | æ—§ãƒãƒ¼ã‚¸ãƒ§ãƒ³ | pitchpro-v1.3.5.umd.js | Phase 5 |

### ã‚°ãƒ­ãƒ¼ãƒãƒ«é–¢æ•°ä¸€è¦§

**ã‚³ãƒ³ãƒˆãƒ­ãƒ¼ãƒ©ãƒ¼åˆæœŸåŒ–é–¢æ•°**:

```javascript
// ãƒšãƒ¼ã‚¸ã‚³ãƒ³ãƒˆãƒ­ãƒ¼ãƒ©ãƒ¼
window.initializePreparationPitchProCycle()  // preparation
window.initializeResultSessionPage()         // result-session
window.initResultsOverview()                 // results-overview
window.initRecords()                         // records (æ—§: initRecordsPage)
window.initPremiumAnalysis()                 // premium-analysis (æ—§: initPremiumAnalysisPage)
window.initSettings()                        // settings
window.initVoiceRangeTest()                  // voice-range-test

// Routerç®¡ç†ï¼ˆhomeãƒšãƒ¼ã‚¸ï¼‰
Router.setupHomeEvents()                     // homeï¼ˆRouterå†…éƒ¨ãƒ¡ã‚½ãƒƒãƒ‰ï¼‰
```

**ãƒ¦ãƒ¼ãƒ†ã‚£ãƒªãƒ†ã‚£é–¢æ•°**:

```javascript
// Lucideã‚¢ã‚¤ã‚³ãƒ³
window.initializeLucideIcons(options)        // lucide-init.js

// ã‚¯ãƒªãƒ¼ãƒ³ã‚¢ãƒƒãƒ—
window.resetPreparationPageFlag()            // preparation-pitchpro-cycle.js
window.cleanupIncompleteLesson()             // index.html
```

**ãƒãƒãƒ¼ã‚¸ãƒ£ãƒ¼ã‚·ãƒ³ã‚°ãƒ«ãƒˆãƒ³**:

```javascript
window.NavigationManager                     // navigation-manager.js
window.DataManager                           // data-manager.js
window.SessionManager                        // session-manager.js
window.ModeController                        // mode-controller.js
window.SessionDataManager                    // session-data-manager.js
window.SubscriptionManager                   // subscription-manager.js
```

### ãƒ•ã‚¡ã‚¤ãƒ«ã‚µã‚¤ã‚ºã¨è¤‡é›‘åº¦

| ã‚«ãƒ†ã‚´ãƒª | ç·ãƒ•ã‚¡ã‚¤ãƒ«æ•° | å¹³å‡è¡Œæ•° | æœ€å¤§ãƒ•ã‚¡ã‚¤ãƒ« | æœ€å°ãƒ•ã‚¡ã‚¤ãƒ« |
|---------|------------|---------|------------|------------|
| **Controllers** | 8 | 450è¡Œ | results-overview (800è¡Œ) | settings (200è¡Œ) |
| **Core Systems** | 10 | 350è¡Œ | router.js (600è¡Œ) | lucide-init.js (100è¡Œ) |
| **Sub Controllers** | 3 | 400è¡Œ | trainingController (700è¡Œ) | preparationController (150è¡Œ) |
| **Components** | 3 | 200è¡Œ | DistributionChart (300è¡Œ) | index.js (50è¡Œ) |
| **Core Libraries** | 9 | 2000è¡Œ | pitchpro-v1.3.5 (3500è¡Œ) | pitchpro-config (150è¡Œ) |
| **Utilities** | 1 | 150è¡Œ | music-theory (150è¡Œ) | - |

**åˆè¨ˆ**: 34ãƒ•ã‚¡ã‚¤ãƒ«ã€æ¨å®šç´„20,000è¡Œã®ã‚³ãƒ¼ãƒ‰

---

## SPAã®ç™–ã¨å¯¾å¿œãƒ‘ã‚¿ãƒ¼ãƒ³

### ç™–1: 2ãƒ•ãƒ©ã‚°ã‚·ã‚¹ãƒ†ãƒ ã®ç†è§£

**ç™–ã®å†…å®¹**: SPAç’°å¢ƒã§ã¯ã€é€šå¸¸ã®ãƒšãƒ¼ã‚¸é·ç§»ã¨ãƒªãƒ­ãƒ¼ãƒ‰ãƒ»ãƒ€ã‚¤ãƒ¬ã‚¯ãƒˆã‚¢ã‚¯ã‚»ã‚¹ã‚’åŒºåˆ¥ã™ã‚‹å¿…è¦ãŒã‚ã‚‹

**å¯¾å¿œãƒ‘ã‚¿ãƒ¼ãƒ³**:

```javascript
// é·ç§»å‰: é·ç§»è¨¼æ˜ãƒ•ãƒ©ã‚°è¨­å®š
NavigationManager.setNormalTransitionToPreparation();

// é·ç§»å¾Œ: ãƒ•ãƒ©ã‚°ç¢ºèª
const normalTransition = sessionStorage.getItem('normalTransitionToPreparation');
if (normalTransition === 'true') {
    // æ­£å¸¸ãªé·ç§»
    sessionStorage.removeItem('normalTransitionToPreparation');
    sessionStorage.setItem('preparationPageActive', 'true');
} else {
    // ãƒªãƒ­ãƒ¼ãƒ‰ã¾ãŸã¯ãƒ€ã‚¤ãƒ¬ã‚¯ãƒˆã‚¢ã‚¯ã‚»ã‚¹
    const wasActive = sessionStorage.getItem('preparationPageActive') === 'true';
    if (wasActive) {
        // ãƒªãƒ­ãƒ¼ãƒ‰
    } else {
        // ãƒ€ã‚¤ãƒ¬ã‚¯ãƒˆã‚¢ã‚¯ã‚»ã‚¹
    }
}
```

**é‡è¦ãªãƒã‚¤ãƒ³ãƒˆ**:
- é·ç§»è¨¼æ˜ãƒ•ãƒ©ã‚°ã¯**å¿…ãšé·ç§»å‰ã«è¨­å®š**
- é·ç§»è¨¼æ˜ãƒ•ãƒ©ã‚°ã¯**ãƒã‚§ãƒƒã‚¯å¾Œã«å³å‰Šé™¤**
- ãƒšãƒ¼ã‚¸çŠ¶æ…‹ãƒ•ãƒ©ã‚°ã¯**åˆæœŸåŒ–å®Œäº†å¾Œã«è¨­å®š**

### ç™–2: innerHTML ã§ã‚¹ã‚¯ãƒªãƒ—ãƒˆå®Ÿè¡Œã•ã‚Œãªã„

**ç™–ã®å†…å®¹**: SPAã§ã¯`innerHTML`ã§ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã‚’æŒ¿å…¥ã™ã‚‹ãŸã‚ã€`<script>`ã‚¿ã‚°ãŒå®Ÿè¡Œã•ã‚Œãªã„

**é–“é•ã£ãŸå®Ÿè£…**:
```html
<!-- template.html -->
<script src="controller.js" onload="initPage()"></script>
<!-- âŒ SPAã§ã¯onloadãŒå®Ÿè¡Œã•ã‚Œãªã„ -->
```

**æ­£ã—ã„å®Ÿè£…**:
```html
<!-- index.html -->
<script src="pages/js/controller.js"></script>
<!-- âœ… äº‹å‰èª­ã¿è¾¼ã¿ -->

<!-- controller.js -->
window.initPage = function() { /* ... */ };
<!-- âœ… ã‚°ãƒ­ãƒ¼ãƒãƒ«é–¢æ•°å…¬é–‹ -->

<!-- router.js -->
await window.initPage();
<!-- âœ… RouterçµŒç”±ã§å®Ÿè¡Œ -->
```

### ç™–3: DOMContentLoadedã¯SPAé·ç§»æ™‚ã«ç™ºç«ã—ãªã„

**ç™–ã®å†…å®¹**: `DOMContentLoaded`ã¯æœ€åˆã®ãƒšãƒ¼ã‚¸èª­ã¿è¾¼ã¿æ™‚ã®ã¿ç™ºç«

**é–“é•ã£ãŸå®Ÿè£…**:
```javascript
document.addEventListener('DOMContentLoaded', initPage);
// âŒ SPAé·ç§»æ™‚ã¯ç™ºç«ã—ãªã„
```

**æ­£ã—ã„å®Ÿè£…**:
```javascript
window.initPage = function() {
    // åˆæœŸåŒ–å‡¦ç†
};
// âœ… RouterçµŒç”±ã§å‘¼ã³å‡ºã•ã‚Œã‚‹
```

### ç™–4: AudioDetectorã®äºŒé‡ç®¡ç†å•é¡Œ

**ç™–ã®å†…å®¹**: NavigationManagerã¨Routerã®ä¸¡æ–¹ãŒAudioDetectorã‚’ç®¡ç†ã™ã‚‹ã¨è¡çªã™ã‚‹

**é–“é•ã£ãŸå®Ÿè£…**:
```javascript
// Router cleanup
async cleanupCurrentPage() {
    await preparationManager.cleanupPitchPro();
    // âŒ NavigationManagerä¿æŒä¸­ã§ã‚‚ç ´æ£„ã—ã¦ã—ã¾ã†
}
```

**æ­£ã—ã„å®Ÿè£…**:
```javascript
// Router cleanup
async cleanupCurrentPage() {
    // âœ… NavigationManagerç®¡ç†ä¸­ã‹ãƒã‚§ãƒƒã‚¯
    if (window.NavigationManager?.currentAudioDetector) {
        console.log('NavigationManagerç®¡ç†ä¸­ - cleanup ã‚¹ã‚­ãƒƒãƒ—');
        return;
    }

    // NavigationManagerãŒç®¡ç†ã—ã¦ã„ãªã„å ´åˆã®ã¿cleanup
    await preparationManager.cleanupPitchPro();
}
```

### ç™–5: sessionStorage.clear()ã®å±é™ºæ€§

**ç™–ã®å†…å®¹**: ç„¡æ¡ä»¶ã®`sessionStorage.clear()`ã¯é‡è¦ãªãƒ•ãƒ©ã‚°ã‚‚å‰Šé™¤ã™ã‚‹

**é–“é•ã£ãŸå®Ÿè£…**:
```javascript
function navigateToRecords() {
    sessionStorage.clear();  // âŒ preparationPageActiveç­‰ã‚‚æ¶ˆãˆã‚‹
    window.location.hash = 'records';
}
```

**æ­£ã—ã„å®Ÿè£…**:
```javascript
function navigateToRecords() {
    // âœ… NavigationManagerã«ä»»ã›ã‚‹
    NavigationManager.navigate('records');
}
```

### ç™–6: ä¾å­˜é–¢ä¿‚ã®ã‚¿ã‚¤ãƒŸãƒ³ã‚°å•é¡Œ

**ç™–ã®å†…å®¹**: Chart.jsç­‰ã®å¤–éƒ¨ãƒ©ã‚¤ãƒ–ãƒ©ãƒªãŒã¾ã èª­ã¿è¾¼ã¾ã‚Œã¦ã„ãªã„å¯èƒ½æ€§ãŒã‚ã‚‹

**é–“é•ã£ãŸå®Ÿè£…**:
```javascript
setTimeout(() => {
    new Chart(ctx, config);  // âŒ 300msã§è¶³ã‚Šã‚‹ã¨ã¯é™ã‚‰ãªã„
}, 300);
```

**æ­£ã—ã„å®Ÿè£…**:
```javascript
// Routerä¾å­˜é–¢ä¿‚å¾…æ©Ÿ
async waitForDependencies(['Chart']) {
    while (!window.Chart) {
        await new Promise(resolve => setTimeout(resolve, 100));
    }
}
// âœ… ç¢ºå®Ÿã«å¾…æ©Ÿ
```

### ç™–7: äºŒé‡åˆæœŸåŒ–å•é¡Œ

**ç™–ã®å†…å®¹**: results-overviewãƒšãƒ¼ã‚¸ç­‰ã§ã€åŒã˜ãƒšãƒ¼ã‚¸ã«å†è¨ªå•ã™ã‚‹ã¨åˆæœŸåŒ–ãŒ2å›å®Ÿè¡Œã•ã‚Œã‚‹

**é–“é•ã£ãŸå®Ÿè£…**:
```javascript
window.initResultsOverview = function() {
    new Chart(ctx, config);  // âŒ æ—¢å­˜ã®Chartã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ãŒæ®‹ã£ã¦ã„ã‚‹ã¨ error
};
```

**æ­£ã—ã„å®Ÿè£…**:
```javascript
// Routerå´: preventDoubleInitãƒ•ãƒ©ã‚°
'results-overview': {
    init: 'initResultsOverview',
    preventDoubleInit: true  // âœ…
}

// Controllerå´: initialized ãƒ•ãƒ©ã‚°
let initialized = false;
window.initResultsOverview = function() {
    if (initialized) return;  // âœ…
    initialized = true;
    new Chart(ctx, config);
};
```

---

## è¨­è¨ˆåŸå‰‡ã¨ä»Šå¾Œã®é–‹ç™ºæŒ‡é‡

### æ ¸å¿ƒçš„ãªè¨­è¨ˆåŸå‰‡

#### 1. å˜ä¸€è²¬ä»»ã®åŸå‰‡ï¼ˆSingle Responsibility Principleï¼‰

**åŸå‰‡**: å„ã‚·ã‚¹ãƒ†ãƒ ã¯1ã¤ã®è²¬ä»»ã®ã¿ã‚’æŒã¤

**é©ç”¨ä¾‹**:
- **Router**: ãƒšãƒ¼ã‚¸èª­ã¿è¾¼ã¿ãƒ»åˆæœŸåŒ–ã®çµ±ä¸€ç®¡ç†
- **NavigationManager**: ãƒŠãƒ“ã‚²ãƒ¼ã‚·ãƒ§ãƒ³ãƒ»ãƒªã‚½ãƒ¼ã‚¹ç®¡ç†
- **Controller**: ãƒšãƒ¼ã‚¸å›ºæœ‰ã®åˆæœŸåŒ–å‡¦ç†

**ç¦æ­¢äº‹é …**:
- âŒ Controllerã§ç›´æ¥ãƒŠãƒ“ã‚²ãƒ¼ã‚·ãƒ§ãƒ³ï¼ˆNavigationManagerã«å§”è­²ï¼‰
- âŒ Routerã§ç›´æ¥AudioDetectorç ´æ£„ï¼ˆNavigationManagerç®¡ç†ä¸­ã®å ´åˆï¼‰
- âŒ NavigationManagerã§ãƒšãƒ¼ã‚¸åˆæœŸåŒ–ï¼ˆRouter ã«å§”è­²ï¼‰

#### 2. ä¾å­˜æ€§é€†è»¢ã®åŸå‰‡ï¼ˆDependency Inversion Principleï¼‰

**åŸå‰‡**: å…·ä½“çš„ãªå®Ÿè£…ã§ã¯ãªãã€æŠ½è±¡ï¼ˆã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹ï¼‰ã«ä¾å­˜ã™ã‚‹

**é©ç”¨ä¾‹**:
- **pageConfigsè¨­å®š**: å®£è¨€çš„ãªè¨­å®šãƒ™ãƒ¼ã‚¹
- **NavigationManager.navigate()**: çµ±ä¸€API
- **ã‚°ãƒ­ãƒ¼ãƒãƒ«é–¢æ•°å…¬é–‹**: `window.initXXX` çµ±ä¸€è¦ç´„

**ãƒ¡ãƒªãƒƒãƒˆ**:
- å®Ÿè£…ã®å·®ã—æ›¿ãˆãŒå®¹æ˜“
- ãƒ†ã‚¹ãƒˆãŒå®¹æ˜“
- ä¿å®ˆæ€§å‘ä¸Š

#### 3. è¨­å®šé§†å‹•ã®åŸå‰‡ï¼ˆConfiguration-Driven Principleï¼‰

**åŸå‰‡**: ãƒ­ã‚¸ãƒƒã‚¯ã‚’ãƒãƒ¼ãƒ‰ã‚³ãƒ¼ãƒ‰ã›ãšã€è¨­å®šã§åˆ¶å¾¡

**é©ç”¨ä¾‹**:
```javascript
this.pageConfigs = {
    'results-overview': {
        init: 'initResultsOverview',
        dependencies: ['Chart', 'DistributionChart'],
        preventDoubleInit: true
    }
};
```

**ãƒ¡ãƒªãƒƒãƒˆ**:
- 1ç®‡æ‰€ã§å…¨ãƒšãƒ¼ã‚¸ç¢ºèªå¯èƒ½
- è¨­å®šå¤‰æ›´ã ã‘ã§å‹•ä½œå¤‰æ›´
- æ–°è¦ãƒšãƒ¼ã‚¸è¿½åŠ ãŒç°¡å˜

#### 4. äºŒé‡é˜²å¾¡ã®åŸå‰‡ï¼ˆDefense in Depthï¼‰

**åŸå‰‡**: é‡è¦ãªæ©Ÿèƒ½ã¯è¤‡æ•°ãƒ¬ãƒ™ãƒ«ã§é˜²å¾¡

**é©ç”¨ä¾‹**:
- **äºŒé‡åˆæœŸåŒ–é˜²æ­¢**: Routerå´ + Controllerå´
- **AudioDetectorç®¡ç†**: NavigationManagerå´ + Routerå´
- **ãƒ•ã‚©ãƒ¼ãƒ«ãƒãƒƒã‚¯å‡¦ç†**: NavigationManageræœªå®šç¾©æ™‚ã®ä»£æ›¿å‡¦ç†

**ãƒ¡ãƒªãƒƒãƒˆ**:
- é«˜ã„ä¿¡é ¼æ€§
- ã‚¨ãƒƒã‚¸ã‚±ãƒ¼ã‚¹ã¸ã®å¯¾å¿œ
- æ®µéšçš„ãªæ©Ÿèƒ½è¿½åŠ ãŒå¯èƒ½

#### 5. æ˜ç¤ºçš„ãªãƒ•ãƒ­ãƒ¼åˆ¶å¾¡ï¼ˆExplicit Flow Controlï¼‰

**åŸå‰‡**: æš—é»™çš„ãªå‹•ä½œã§ã¯ãªãã€æ˜ç¤ºçš„ã«ãƒ•ãƒ­ãƒ¼ã‚’åˆ¶å¾¡

**é©ç”¨ä¾‹**:
- **2ãƒ•ãƒ©ã‚°ã‚·ã‚¹ãƒ†ãƒ **: é·ç§»è¨¼æ˜ãƒ•ãƒ©ã‚° + ãƒšãƒ¼ã‚¸çŠ¶æ…‹ãƒ•ãƒ©ã‚°
- **isTrainingFlow()**: ãƒˆãƒ¬ãƒ¼ãƒ‹ãƒ³ã‚°ãƒ•ãƒ­ãƒ¼ã‚’æ˜ç¤ºçš„ã«åˆ¤å®š
- **ä¾å­˜é–¢ä¿‚å¾…æ©Ÿ**: æ˜ç¤ºçš„ã«ãƒ©ã‚¤ãƒ–ãƒ©ãƒªèª­ã¿è¾¼ã¿ã‚’å¾…æ©Ÿ

**ãƒ¡ãƒªãƒƒãƒˆ**:
- ã‚¿ã‚¤ãƒŸãƒ³ã‚°å•é¡Œã®è§£æ±º
- ãƒ‡ãƒãƒƒã‚°ãŒå®¹æ˜“
- äºˆæ¸¬å¯èƒ½ãªå‹•ä½œ

### ä»Šå¾Œã®é–‹ç™ºæŒ‡é‡

#### æ–°è¦ãƒšãƒ¼ã‚¸è¿½åŠ æ™‚ï¼ˆ3ã‚¹ãƒ†ãƒƒãƒ—ï¼‰

**ã‚¹ãƒ†ãƒƒãƒ—1: pageConfigsè¨­å®šè¿½åŠ **

```javascript
this.pageConfigs = {
    // ...æ—¢å­˜ã®è¨­å®š...

    'new-page': {
        init: 'initNewPage',              // ã‚°ãƒ­ãƒ¼ãƒãƒ«åˆæœŸåŒ–é–¢æ•°å
        dependencies: ['Chart'],           // ä¾å­˜ãƒ©ã‚¤ãƒ–ãƒ©ãƒª
        preventDoubleInit: false           // äºŒé‡åˆæœŸåŒ–é˜²æ­¢ï¼ˆå¿…è¦ãªå ´åˆtrueï¼‰
    }
};
```

**ã‚¹ãƒ†ãƒƒãƒ—2: ã‚³ãƒ³ãƒˆãƒ­ãƒ¼ãƒ©ãƒ¼ã§ã‚°ãƒ­ãƒ¼ãƒãƒ«é–¢æ•°å…¬é–‹**

```javascript
// new-page-controller.js
(function() {
    'use strict';

    async function initializeNewPage() {
        console.log('ğŸ”§ æ–°ãƒšãƒ¼ã‚¸åˆæœŸåŒ–é–‹å§‹');

        try {
            // ãƒšãƒ¼ã‚¸åˆæœŸåŒ–å‡¦ç†

            // Lucideã‚¢ã‚¤ã‚³ãƒ³åˆæœŸåŒ–
            if (typeof window.initializeLucideIcons === 'function') {
                window.initializeLucideIcons({ immediate: true });
            }

            console.log('âœ… æ–°ãƒšãƒ¼ã‚¸åˆæœŸåŒ–å®Œäº†');
        } catch (error) {
            console.error('âŒ æ–°ãƒšãƒ¼ã‚¸åˆæœŸåŒ–ã‚¨ãƒ©ãƒ¼:', error);
            throw error;
        }
    }

    // ã‚°ãƒ­ãƒ¼ãƒãƒ«é–¢æ•°ã¨ã—ã¦å…¬é–‹ï¼ˆè¨­å®šã¨ä¸€è‡´ã•ã›ã‚‹ï¼‰
    window.initNewPage = initializeNewPage;

})();
```

**ã‚¹ãƒ†ãƒƒãƒ—3: HTMLãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆä½œæˆ**

```html
<!-- pages/new-page.html -->
<header class="page-header">
    <h1>æ–°ãƒšãƒ¼ã‚¸</h1>
</header>

<main class="narrow-main">
    <!-- ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ -->
</main>

<!-- âŒ onloadå±æ€§ã¯ä¸è¦ -->
<!-- âŒ <script>ã‚¿ã‚°ã¯ä¸è¦ï¼ˆindex.htmlã§äº‹å‰èª­ã¿è¾¼ã¿ï¼‰ -->
```

#### ãƒŠãƒ“ã‚²ãƒ¼ã‚·ãƒ§ãƒ³è¿½åŠ æ™‚

**å¿…é ˆ**: NavigationManager.navigate() ã‚’ä½¿ç”¨

```javascript
// âœ… æ­£ã—ã„å®Ÿè£…
if (window.NavigationManager) {
    NavigationManager.navigate('target-page', {
        mode: 'random',
        direction: 'ascending'
    });
} else {
    // ãƒ•ã‚©ãƒ¼ãƒ«ãƒãƒƒã‚¯
    window.location.hash = 'target-page?mode=random&direction=ascending';
}
```

**ç¦æ­¢**: ç›´æ¥ window.location.hash æ“ä½œ

```javascript
// âŒ é–“é•ã£ãŸå®Ÿè£…
window.location.hash = 'target-page?mode=random';
// NavigationManagerã‚’ãƒã‚¤ãƒ‘ã‚¹ã—ã¦ã—ã¾ã†
```

#### AudioDetectorä½¿ç”¨æ™‚

**å¿…é ˆ**: NavigationManagerã«ç™»éŒ²

```javascript
// AudioDetectorä½œæˆå¾Œ
const audioDetector = new AudioDetectionComponent(config);
await audioDetector.initialize();

// âœ… NavigationManagerã«ç™»éŒ²
if (window.NavigationManager) {
    NavigationManager.registerAudioDetector(audioDetector);
}
```

**ç¦æ­¢**: ç›´æ¥ç ´æ£„

```javascript
// âŒ é–“é•ã£ãŸå®Ÿè£…
audioDetector.destroy();
// NavigationManagerãŒç®¡ç†ä¸­ã®å ´åˆã€å•é¡Œç™ºç”Ÿ
```

#### sessionStorageä½¿ç”¨æ™‚

**å¿…é ˆ**: ãƒšãƒ¼ã‚¸å›ºæœ‰ã®ãƒ‡ãƒ¼ã‚¿ã®ã¿

```javascript
// âœ… æ­£ã—ã„å®Ÿè£…
sessionStorage.setItem('pageSpecificData', JSON.stringify(data));
```

**ç¦æ­¢**: NavigationManagerç®¡ç†ãƒ•ãƒ©ã‚°ã®æ“ä½œ

```javascript
// âŒ é–“é•ã£ãŸå®Ÿè£…
sessionStorage.clear();  // preparationPageActiveç­‰ã‚‚å‰Šé™¤ã•ã‚Œã‚‹
sessionStorage.removeItem('normalTransitionToTraining');  // ç®¡ç†ãƒ•ãƒ©ã‚°ã‚’æ‰‹å‹•å‰Šé™¤
```

### ãƒˆãƒ©ãƒ–ãƒ«ã‚·ãƒ¥ãƒ¼ãƒ†ã‚£ãƒ³ã‚°ã‚¬ã‚¤ãƒ‰

#### å•é¡Œ: ãƒšãƒ¼ã‚¸ãŒåˆæœŸåŒ–ã•ã‚Œãªã„

**ç¢ºèªäº‹é …**:
1. pageConfigsã«è¨­å®šãŒã‚ã‚‹ã‹ï¼Ÿ
2. ã‚°ãƒ­ãƒ¼ãƒãƒ«é–¢æ•°ï¼ˆwindow.initXXXï¼‰ãŒå…¬é–‹ã•ã‚Œã¦ã„ã‚‹ã‹ï¼Ÿ
3. index.htmlã§ã‚³ãƒ³ãƒˆãƒ­ãƒ¼ãƒ©ãƒ¼ãŒäº‹å‰èª­ã¿è¾¼ã¿ã•ã‚Œã¦ã„ã‚‹ã‹ï¼Ÿ
4. ä¾å­˜ãƒ©ã‚¤ãƒ–ãƒ©ãƒªãŒèª­ã¿è¾¼ã¾ã‚Œã¦ã„ã‚‹ã‹ï¼Ÿ

**è§£æ±ºæ‰‹é †**:
```javascript
// ã‚³ãƒ³ã‚½ãƒ¼ãƒ«ã§ç¢ºèª
console.log(router.pageConfigs['target-page']);  // è¨­å®šç¢ºèª
console.log(typeof window.initTargetPage);       // é–¢æ•°ç¢ºèª
console.log(typeof Chart);                       // ä¾å­˜é–¢ä¿‚ç¢ºèª
```

#### å•é¡Œ: ãƒªãƒ­ãƒ¼ãƒ‰ãƒ€ã‚¤ã‚¢ãƒ­ã‚°ãŒèª¤è¡¨ç¤ºã•ã‚Œã‚‹

**ç¢ºèªäº‹é …**:
1. NavigationManager.setNormalTransitionToXXX() ã‚’é·ç§»å‰ã«å‘¼ã³å‡ºã—ã¦ã„ã‚‹ã‹ï¼Ÿ
2. é·ç§»è¨¼æ˜ãƒ•ãƒ©ã‚°ã¨ãƒšãƒ¼ã‚¸çŠ¶æ…‹ãƒ•ãƒ©ã‚°ã‚’æ··åŒã—ã¦ã„ãªã„ã‹ï¼Ÿ

**è§£æ±ºæ‰‹é †**:
```javascript
// æ­£ã—ã„ãƒ•ãƒ­ãƒ¼
NavigationManager.setNormalTransitionToPreparation();  // é·ç§»å‰
window.location.hash = 'preparation';                  // é·ç§»å®Ÿè¡Œ
// â†’ checkPageAccess()ã§é·ç§»è¨¼æ˜ãƒ•ãƒ©ã‚°ç¢ºèª â†’ æ­£å¸¸åˆ¤å®š
```

#### å•é¡Œ: AudioDetectorãŒäºŒé‡ç ´æ£„ã•ã‚Œã‚‹

**ç¢ºèªäº‹é …**:
1. Router cleanupã§NavigationManagerç®¡ç†ä¸­ã‹ãƒã‚§ãƒƒã‚¯ã—ã¦ã„ã‚‹ã‹ï¼Ÿ
2. NavigationManager.isTrainingFlow()ã«ãƒ‘ã‚¿ãƒ¼ãƒ³ãŒç™»éŒ²ã•ã‚Œã¦ã„ã‚‹ã‹ï¼Ÿ

**è§£æ±ºæ‰‹é †**:
```javascript
// Router cleanup
if (window.NavigationManager?.currentAudioDetector) {
    console.log('NavigationManagerç®¡ç†ä¸­ - cleanup ã‚¹ã‚­ãƒƒãƒ—');
    return;  // ç ´æ£„ã—ãªã„
}
```

---

## å‚è€ƒè³‡æ–™ãƒ»é–¢é€£ä»•æ§˜æ›¸

### æ ¸å¿ƒçš„ãªä»•æ§˜æ›¸ï¼ˆå„ªå…ˆåº¦é †ï¼‰

#### 1. ãƒŠãƒ“ã‚²ãƒ¼ã‚·ãƒ§ãƒ³ãƒ»ãƒã‚¤ã‚¯ç®¡ç†

| ä»•æ§˜æ›¸ | ãƒãƒ¼ã‚¸ãƒ§ãƒ³ | å†…å®¹ | å„ªå…ˆåº¦ |
|--------|----------|------|--------|
| **NAVIGATION_HANDLING_SPECIFICATION.md** | v5.0.0 | ãƒŠãƒ“ã‚²ãƒ¼ã‚·ãƒ§ãƒ³ãƒ»ãƒªã‚½ãƒ¼ã‚¹ç®¡ç†ã®å®Œå…¨ä»•æ§˜ | ğŸ”´ æœ€é«˜ |
| **NAVIGATION_RELOAD_DETECTION_SPECIFICATION.md** | - | ãƒªãƒ­ãƒ¼ãƒ‰æ¤œå‡ºã®è©³ç´°ä»•æ§˜ | ğŸ”´ æœ€é«˜ |
| **MICROPHONE_BACKGROUND_RESILIENCE.md** | - | ãƒã‚¤ã‚¯ã®ãƒãƒƒã‚¯ã‚°ãƒ©ã‚¦ãƒ³ãƒ‰å¾©å¸°å¯¾å¿œ | ğŸŸ¡ ä¸­ |

#### 2. ãƒšãƒ¼ã‚¸åˆæœŸåŒ–ã‚·ã‚¹ãƒ†ãƒ 

| ä»•æ§˜æ›¸ | ãƒãƒ¼ã‚¸ãƒ§ãƒ³ | å†…å®¹ | å„ªå…ˆåº¦ |
|--------|----------|------|--------|
| **ROUTER_PAGE_INITIALIZATION_GUIDE.md** | - | çµ±ä¸€åˆæœŸåŒ–ã‚·ã‚¹ãƒ†ãƒ ã®å®Ÿè£…ã‚¬ã‚¤ãƒ‰ | ğŸ”´ æœ€é«˜ |
| **UNIFIED_INITIALIZATION_COMPLETION_SUMMARY.md** | v2.0.0 | çµ±ä¸€åˆæœŸåŒ–ã‚·ã‚¹ãƒ†ãƒ å®Œäº†å ±å‘Šæ›¸ | ğŸ”´ æœ€é«˜ |
| **SPA_INITIALIZATION_ANALYSIS_REPORT.md** | - | åˆæœŸåŒ–å•é¡Œã®åˆ†æãƒ¬ãƒãƒ¼ãƒˆ | ğŸŸ¡ ä¸­ |
| **SPA_INITIALIZATION_COMPREHENSIVE_SOLUTION.md** | - | åˆæœŸåŒ–å•é¡Œã®åŒ…æ‹¬çš„è§£æ±ºç­– | ğŸŸ¡ ä¸­ |
| **SPA_INITIALIZATION_HISTORY_ANALYSIS.md** | - | åˆæœŸåŒ–ã‚·ã‚¹ãƒ†ãƒ ã®æ­´å²çš„èƒŒæ™¯ | ğŸŸ¢ ä½ |

#### 3. SPAã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£

| ä»•æ§˜æ›¸ | ãƒãƒ¼ã‚¸ãƒ§ãƒ³ | å†…å®¹ | å„ªå…ˆåº¦ |
|--------|----------|------|--------|
| **SPA_ARCHITECTURE_SPECIFICATION.md** | - | SPAå…¨ä½“ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£ä»•æ§˜ | ğŸ”´ æœ€é«˜ |
| **MODULE_ARCHITECTURE.md** | - | ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«æ§‹æˆå›³ | ğŸŸ¡ ä¸­ |

### Serenaãƒ¡ãƒ¢ãƒª

| ãƒ¡ãƒ¢ãƒªå | ä½œæˆæ—¥ | å†…å®¹ |
|---------|--------|------|
| **PERM-reload-navigation-refactoring-design-20251118** | 2025-11-18 | ç¬¬1å›ãƒªãƒ•ã‚¡ã‚¯ã‚¿ãƒªãƒ³ã‚°å®Œå…¨è¨˜éŒ² |
| **PERM-unified-page-initialization-design-20251117-1540** | 2025-11-17 | ç¬¬2å›ãƒªãƒ•ã‚¡ã‚¯ã‚¿ãƒªãƒ³ã‚°è¨­è¨ˆ |
| **PERM-microphone-permission-skip-analysis-20251119** | 2025-11-19 | ç¬¬3å›æœ€é©åŒ–èª¿æŸ» |
| **PERM-router-phase2-implementation-complete-20251117-1800** | 2025-11-17 | Router Phase 2å®Ÿè£…å®Œäº† |

### ã‚³ãƒ¼ãƒ‰å‚ç…§

#### ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³æœ¬ä½“

| ãƒ•ã‚¡ã‚¤ãƒ« | ãƒãƒ¼ã‚¸ãƒ§ãƒ³ | èª¬æ˜ |
|---------|----------|------|
| **/js/router.js** | v2.2.0 | Routeræœ¬ä½“ãƒ»çµ±ä¸€åˆæœŸåŒ–ã‚·ã‚¹ãƒ†ãƒ  |
| **/js/navigation-manager.js** | v4.3.2 | NavigationManageræœ¬ä½“ãƒ»2ãƒ•ãƒ©ã‚°ã‚·ã‚¹ãƒ†ãƒ  |
| **/js/controllers/** | å„ç¨® | å„ãƒšãƒ¼ã‚¸ã‚³ãƒ³ãƒˆãƒ­ãƒ¼ãƒ©ãƒ¼ |
| **/pages/** | - | HTMLãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆ |

#### å°‚ç”¨é–‹ç™ºãƒ©ã‚¤ãƒ–ãƒ©ãƒª

| ãƒªãƒã‚¸ãƒˆãƒª | ãƒãƒ¼ã‚¸ãƒ§ãƒ³ | èª¬æ˜ |
|----------|----------|------|
| **[PitchPro Audio Processing](https://github.com/kiyopi/pitchpro-audio-processing)** | v1.3.5 | ã“ã®ã‚¢ãƒ—ãƒªã®ãŸã‚ã«é–‹ç™ºã•ã‚ŒãŸéŸ³å£°å‡¦ç†ãƒ©ã‚¤ãƒ–ãƒ©ãƒª |

---

## ã¾ã¨ã‚

### 3å›ã®ãƒªãƒ•ã‚¡ã‚¯ã‚¿ãƒªãƒ³ã‚°ã§é”æˆã—ãŸã“ã¨

#### ç¬¬1å›ï¼ˆ2025-11-18ï¼‰: ãƒªãƒ­ãƒ¼ãƒ‰æ¤œå‡ºã‚·ã‚¹ãƒ†ãƒ çµ±ä¸€

- âœ… **1ãƒ•ãƒ©ã‚°ã‚·ã‚¹ãƒ†ãƒ  â†’ 2ãƒ•ãƒ©ã‚°ã‚·ã‚¹ãƒ†ãƒ **: ã‚¿ã‚¤ãƒŸãƒ³ã‚°å•é¡Œã®æ ¹æœ¬è§£æ±º
- âœ… **preparationãƒšãƒ¼ã‚¸çµ±ä¸€**: trainingãƒšãƒ¼ã‚¸ã¨åŒã˜ãƒ‘ã‚¿ãƒ¼ãƒ³ã«
- âœ… **ãƒªãƒ­ãƒ¼ãƒ‰ãƒ»ãƒ€ã‚¤ãƒ¬ã‚¯ãƒˆã‚¢ã‚¯ã‚»ã‚¹æ¤œå‡º**: 100%æ­£ç¢ºãªåˆ¤å®šã‚’å®Ÿç¾

#### ç¬¬2å›ï¼ˆ2025-01-17ï¼‰: ãƒšãƒ¼ã‚¸åˆæœŸåŒ–ã‚·ã‚¹ãƒ†ãƒ çµ±ä¸€

- âœ… **4ç¨®é¡ã®ãƒ‘ã‚¿ãƒ¼ãƒ³ â†’ 1ç¨®é¡ã®çµ±ä¸€ã‚·ã‚¹ãƒ†ãƒ **: ä¿å®ˆæ€§å¤§å¹…å‘ä¸Š
- âœ… **ä¾å­˜é–¢ä¿‚ç®¡ç†ã®è‡ªå‹•åŒ–**: ã‚¿ã‚¤ãƒŸãƒ³ã‚°å•é¡Œã®å®Œå…¨è§£æ±º
- âœ… **äºŒé‡åˆæœŸåŒ–é˜²æ­¢**: Chart.jsã‚¨ãƒ©ãƒ¼ç­‰ã‚’100%é˜²æ­¢
- âœ… **é–‹ç™ºåŠ¹ç‡50%å‘ä¸Š**: æ–°è¦ãƒšãƒ¼ã‚¸è¿½åŠ ãŒåŠ‡çš„ã«ç°¡å˜ã«

#### ç¬¬3å›ï¼ˆ2025-11-19ï¼‰: NavigationManagerçµ±åˆå¾¹åº•åŒ–

- âœ… **AudioDetectoräºŒé‡ç®¡ç†å•é¡Œè§£æ±º**: è¨­è¨ˆãƒ¬ãƒ™ãƒ«ã®è¡çªã‚’æ ¹æœ¬è§£æ±º
- âœ… **å…¨14ç®‡æ‰€ã®çµ±ä¸€åŒ–**: NavigationManagerçµ±ä¸€APIã§ä¸€è²«æ€§ç¢ºä¿
- âœ… **ãƒã‚¤ã‚¯ç®¡ç†ã®å®Œå…¨çµ±åˆ**: ãƒˆãƒ¬ãƒ¼ãƒ‹ãƒ³ã‚°ãƒ•ãƒ­ãƒ¼å…¨ä½“ã§AudioDetectorä¿æŒ
- âœ… **è²¬ä»»ç¯„å›²ã®æ˜ç¢ºåŒ–**: NavigationManager vs Router ã®å½¹å‰²åˆ†æ‹…ç¢ºç«‹

### ç¾åœ¨ã®SPAã‚·ã‚¹ãƒ†ãƒ ã®å¼·ã¿

1. **é«˜ã„å®‰å®šæ€§**: ãƒªãƒ­ãƒ¼ãƒ‰ãƒ»ãƒ–ãƒ©ã‚¦ã‚¶ãƒãƒƒã‚¯ãƒ»ãƒ€ã‚¤ãƒ¬ã‚¯ãƒˆã‚¢ã‚¯ã‚»ã‚¹ã™ã¹ã¦ã«å¯¾å¿œ
2. **å„ªã‚ŒãŸä¿å®ˆæ€§**: çµ±ä¸€ã•ã‚ŒãŸã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£ã§ã‚³ãƒ¼ãƒ‰é‡è¤‡75%å‰Šæ¸›
3. **é–‹ç™ºåŠ¹ç‡å‘ä¸Š**: æ–°è¦ãƒšãƒ¼ã‚¸è¿½åŠ æ™‚é–“50%å‰Šæ¸›ã€ãƒˆãƒ©ãƒ–ãƒ«ã‚·ãƒ¥ãƒ¼ãƒ†ã‚£ãƒ³ã‚°70%å‰Šæ¸›
4. **ãƒ¦ãƒ¼ã‚¶ãƒ¼ä½“é¨“å‘ä¸Š**: ãƒã‚¤ã‚¯å†åˆæœŸåŒ–ä¸è¦ã€ãƒšãƒ¼ã‚¸é·ç§»é«˜é€ŸåŒ–
5. **æ‹¡å¼µæ€§ç¢ºä¿**: æ–°æ©Ÿèƒ½è¿½åŠ ãŒå®¹æ˜“ã€æŠ€è¡“çš„è² å‚µã®è§£æ¶ˆ

### ä»Šå¾Œã®èª²é¡Œã¨å±•æœ›

#### çŸ­æœŸï¼ˆ1-2ãƒ¶æœˆï¼‰

- [ ] ä¸‹è¡Œãƒ¢ãƒ¼ãƒ‰ã®å®Ÿè£…ï¼ˆPhase 4è¨ˆç”»ï¼‰
- [ ] è©³ç´°åˆ†ææ©Ÿèƒ½ã®çµ±åˆï¼ˆPhase 3è¨ˆç”»ï¼‰
- [ ] ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ãƒ¢ãƒ‹ã‚¿ãƒªãƒ³ã‚°å°å…¥

#### ä¸­æœŸï¼ˆ3-6ãƒ¶æœˆï¼‰

- [ ] TypeScriptç§»è¡Œæ¤œè¨
- [ ] ãƒ¦ãƒ‹ãƒƒãƒˆãƒ†ã‚¹ãƒˆè¿½åŠ 
- [ ] ã‚¨ãƒ©ãƒ¼ãƒˆãƒ©ãƒƒã‚­ãƒ³ã‚°å°å…¥ï¼ˆSentryç­‰ï¼‰

#### é•·æœŸï¼ˆ6ãƒ¶æœˆã€œï¼‰

- [ ] PWAæ©Ÿèƒ½å¼·åŒ–ï¼ˆã‚ªãƒ•ãƒ©ã‚¤ãƒ³å¯¾å¿œç­‰ï¼‰
- [ ] ãƒã‚¤ã‚¯ãƒ­ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰åŒ–æ¤œè¨
- [ ] ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ãƒãƒ³ãƒ‰ãƒ©ãƒ¼å°å…¥ï¼ˆViteç­‰ï¼‰

### æœ€å¾Œã«

3å›ã®å¤§ããªãƒªãƒ•ã‚¡ã‚¯ã‚¿ãƒªãƒ³ã‚°ã‚’çµŒã¦ã€**8vaç›¸å¯¾éŸ³æ„Ÿãƒˆãƒ¬ãƒ¼ãƒ‹ãƒ³ã‚°ã‚¢ãƒ—ãƒª**ã®SPAã‚·ã‚¹ãƒ†ãƒ ã¯ã€å®‰å®šã—ãŸæˆç†Ÿã—ãŸã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£ã«åˆ°é”ã—ã¾ã—ãŸã€‚ã“ã®çµŒé¨“ã§å¾—ã‚‰ã‚ŒãŸè¨­è¨ˆåŸå‰‡ã¨å¯¾å¿œãƒ‘ã‚¿ãƒ¼ãƒ³ã¯ã€ä»Šå¾Œã®é–‹ç™ºã«ãŠã‘ã‚‹è²´é‡ãªè³‡ç”£ã¨ãªã‚Šã¾ã™ã€‚

**ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰**:
- 2ãƒ•ãƒ©ã‚°ã‚·ã‚¹ãƒ†ãƒ 
- Routerçµ±ä¸€åˆæœŸåŒ–
- NavigationManagerçµ±ä¸€API
- AudioDetectorãƒ©ã‚¤ãƒ•ã‚µã‚¤ã‚¯ãƒ«ç®¡ç†
- è¨­å®šé§†å‹•é–‹ç™º
- äºŒé‡é˜²å¾¡ã®åŸå‰‡

---

**ä½œæˆè€…**: Claude Code
**æœ€çµ‚æ›´æ–°**: 2025-11-19
**ãƒãƒ¼ã‚¸ãƒ§ãƒ³**: 1.0.0

**END OF DOCUMENT**
