<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>相対音感アプリ UIカタログ - デモページ</title>
  
  <!-- Mantine CSS -->
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@mantine/core@7.6.0/styles.css">
  
  <!-- カスタムUIカタログCSS -->
  <link rel="stylesheet" href="src/styles/ui-catalog.css">
  
  <style>
    body {
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      min-height: 100vh;
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      margin: 0;
      padding: 20px;
    }
    
    .container {
      max-width: 1200px;
      margin: 0 auto;
      background: rgba(255, 255, 255, 0.95);
      border-radius: 20px;
      padding: 40px;
      box-shadow: 0 20px 60px rgba(0, 0, 0, 0.2);
    }
    
    .catalog-section {
      margin: 40px 0;
      padding: 30px;
      background: var(--mantine-color-gray-0);
      border-radius: 16px;
      border: 1px solid var(--mantine-color-gray-2);
    }
    
    .catalog-title {
      font-size: 28px;
      font-weight: 700;
      color: var(--mantine-color-dark-8);
      margin-bottom: 20px;
      display: flex;
      align-items: center;
      gap: 12px;
    }
    
    .catalog-title::before {
      content: '🎨';
      font-size: 32px;
    }
    
    .demo-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
      gap: 20px;
      margin: 20px 0;
    }
    
    .code-block {
      background: var(--mantine-color-dark-9);
      color: var(--mantine-color-gray-0);
      padding: 16px;
      border-radius: 8px;
      overflow-x: auto;
      font-family: 'Monaco', 'Consolas', monospace;
      font-size: 12px;
      margin-top: 12px;
    }
    
    .component-demo {
      background: white;
      padding: 20px;
      border-radius: 12px;
      border: 1px solid var(--mantine-color-gray-3);
      margin: 12px 0;
    }
    
    .header {
      text-align: center;
      margin-bottom: 40px;
    }
    
    .header h1 {
      font-size: 42px;
      font-weight: 900;
      background: var(--gradient-primary);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      background-clip: text;
      margin-bottom: 12px;
    }
    
    .header p {
      font-size: 18px;
      color: var(--mantine-color-gray-6);
    }
  </style>
</head>
<body>
  <div class="container">
    <!-- ヘッダー -->
    <div class="header">
      <h1>🎵 相対音感アプリ UIカタログ</h1>
      <p>Vanilla TypeScript用のUIコンポーネント集</p>
    </div>

    <!-- 1. 評価カード -->
    <div class="catalog-section">
      <h2 class="catalog-title">評価カード</h2>
      <div class="component-demo">
        <div class="evaluation-grid">
          <div class="evaluation-card">
            <div class="evaluation-value" style="font-size: 32px;">🎉</div>
            <div class="evaluation-label">総合評価 (Good)</div>
          </div>
          <div class="evaluation-card">
            <div class="evaluation-value">±20セント</div>
            <div class="evaluation-label">平均精度</div>
          </div>
          <div class="evaluation-card">
            <div class="evaluation-value">6/8音</div>
            <div class="evaluation-label">合格音数</div>
          </div>
        </div>
      </div>
      <details>
        <summary>コード例</summary>
        <div class="code-block">
// TypeScript
evaluationCard('🎉', '総合評価 (Good)', true)
evaluationCard('±20セント', '平均精度')
evaluationCard('6/8音', '合格音数')
        </div>
      </details>
    </div>

    <!-- 2. セッション履歴 -->
    <div class="catalog-section">
      <h2 class="catalog-title">セッション履歴（展開式）</h2>
      <div class="component-demo">
        <div class="session-history">
          <h3>📋 セッション履歴</h3>
          
          <div class="session-item" onclick="toggleSessionDetail(1)">
            <span>セッション 1</span>
            <div style="display: flex; gap: 8px; align-items: center;">
              <span class="session-score">±22セント</span>
              <span style="font-size: 20px;">🎉</span>
              <span class="expand-icon">▼</span>
            </div>
          </div>
          <div class="session-detail" id="session-1-detail" style="display: none;">
            <div style="padding: 12px; background: var(--mantine-color-gray-0); border-radius: 4px;">
              <p><strong>評価:</strong> 🎉 Good</p>
              <p><strong>平均精度:</strong> ±22セント</p>
              <p style="color: var(--mantine-color-gray-6); font-size: 12px;">
                ※相対音感トレーニングのため基音情報は非表示
              </p>
            </div>
          </div>
          
          <div class="session-item" onclick="toggleSessionDetail(2)">
            <span>セッション 2</span>
            <div style="display: flex; gap: 8px; align-items: center;">
              <span class="session-score">±35セント</span>
              <span style="font-size: 20px;">👍</span>
              <span class="expand-icon">▼</span>
            </div>
          </div>
          <div class="session-detail" id="session-2-detail" style="display: none;">
            <div style="padding: 12px; background: var(--mantine-color-gray-0); border-radius: 4px;">
              <p><strong>評価:</strong> 👍 Pass</p>
              <p><strong>平均精度:</strong> ±35セント</p>
              <p style="color: var(--mantine-color-gray-6); font-size: 12px;">
                ※相対音感トレーニングのため基音情報は非表示
              </p>
            </div>
          </div>
        </div>
      </div>
      <details>
        <summary>コード例</summary>
        <div class="code-block">
// TypeScript
sessionHistoryItem({
  num: 1,
  cents: 22,
  baseNote: 'G3' // 表示されない
})
        </div>
      </details>
    </div>

    <!-- 3. 音階別評価 -->
    <div class="catalog-section">
      <h2 class="catalog-title">音階別評価</h2>
      <div class="component-demo">
        <div class="note-evaluation-grid">
          <div class="session-item" style="flex-direction: column; text-align: center;">
            <div style="font-weight: 600; color: var(--note-do);">ド</div>
            <div style="font-size: 24px;">🏆</div>
            <div style="font-size: 12px; color: var(--mantine-color-gray-6);">-2¢</div>
          </div>
          <div class="session-item" style="flex-direction: column; text-align: center;">
            <div style="font-weight: 600; color: var(--note-re);">レ</div>
            <div style="font-size: 24px;">👍</div>
            <div style="font-size: 12px; color: var(--mantine-color-gray-6);">-15¢</div>
          </div>
          <div class="session-item" style="flex-direction: column; text-align: center;">
            <div style="font-weight: 600; color: var(--note-mi);">ミ</div>
            <div style="font-size: 24px;">😭</div>
            <div style="font-size: 12px; color: var(--mantine-color-gray-6);">-42¢</div>
          </div>
          <div class="session-item" style="flex-direction: column; text-align: center;">
            <div style="font-weight: 600; color: var(--note-fa);">ファ</div>
            <div style="font-size: 24px;">🎉</div>
            <div style="font-size: 12px; color: var(--mantine-color-gray-6);">+1¢</div>
          </div>
        </div>
      </div>
      <details>
        <summary>コード例</summary>
        <div class="code-block">
// TypeScript
noteEvaluationItem({
  name: 'ド',
  cents: -2,
  colorVar: '--note-do'
})
        </div>
      </details>
    </div>

    <!-- 4. 統合進行バー -->
    <div class="catalog-section">
      <h2 class="catalog-title">統合進行バー</h2>
      <div class="component-demo">
        <div class="integrated-progress">
          <div class="progress-sections">
            <div class="section base-tone">基音再生(2.0秒)</div>
            <div class="section rest">休憩</div>
            <div class="section start-marker">🎯開始</div>
          </div>
          <div class="progress-bar">
            <div class="progress-fill" style="width: 75%;"></div>
          </div>
          <div class="time-indicator">
            <span>0.0秒</span>
            <span>2.5秒</span>
          </div>
        </div>
      </div>
      <details>
        <summary>コード例</summary>
        <div class="code-block">
// TypeScript
integratedProgressBar(75) // 75%進行
        </div>
      </details>
    </div>

    <!-- 5. ドレミガイド円 -->
    <div class="catalog-section">
      <h2 class="catalog-title">ドレミガイド円</h2>
      <div class="component-demo">
        <div class="note-circles-container">
          <div class="note-circle completed">ド</div>
          <div class="note-circle completed">レ</div>
          <div class="note-circle active">ミ</div>
          <div class="note-circle">ファ</div>
          <div class="note-circle">ソ</div>
          <div class="note-circle">ラ</div>
          <div class="note-circle">シ</div>
          <div class="note-circle">ド</div>
        </div>
      </div>
      <details>
        <summary>コード例</summary>
        <div class="code-block">
// TypeScript
noteCircles(2) // 3番目の音階（ミ）がアクティブ
        </div>
      </details>
    </div>

    <!-- 6. S-E級評価 -->
    <div class="catalog-section">
      <h2 class="catalog-title">S-E級総合評価</h2>
      <div class="component-demo">
        <div style="text-align: center; padding: var(--session-spacing) 0;">
          <div style="font-size: 72px; font-weight: 900; color: var(--mantine-color-green-6); margin-bottom: 8px;">B級</div>
          <div style="font-size: 18px; color: var(--mantine-color-gray-7);">素晴らしい相対音感です！</div>
        </div>
      </div>
      <details>
        <summary>コード例</summary>
        <div class="code-block">
// TypeScript
gradeDisplay('B', '素晴らしい相対音感です！')
        </div>
      </details>
    </div>

    <!-- 7. モード選択カード -->
    <div class="catalog-section">
      <h2 class="catalog-title">モード選択カード</h2>
      <div class="component-demo">
        <div class="demo-grid">
          <div class="mode-card">
            <div class="mode-header">
              <span class="mode-emoji">🎲</span>
              <span class="mode-title">ランダム基音モード</span>
            </div>
            <div class="mode-badge">初級</div>
            <div class="mode-difficulty">難易度: ★☆☆</div>
            <div class="mode-description">基音がランダムに変わる基本練習<br>初級者におすすめ</div>
            <button class="btn btn-primary btn-large">このモードで始める</button>
          </div>
          <div class="mode-card">
            <div class="mode-header">
              <span class="mode-emoji">🎯</span>
              <span class="mode-title">連続チャレンジモード</span>
            </div>
            <div class="mode-badge">中級</div>
            <div class="mode-difficulty">難易度: ★★☆</div>
            <div class="mode-description">8セッション連続トレーニング<br>中級者向け集中練習</div>
            <button class="btn btn-primary btn-large">このモードで始める</button>
          </div>
        </div>
      </div>
      <details>
        <summary>コード例</summary>
        <div class="code-block">
// TypeScript
modeCard('🎲', 'ランダム基音モード', '★☆☆', 
         '基音がランダムに変わる基本練習', '初級')
        </div>
      </details>
    </div>

    <!-- 8. ボタン -->
    <div class="catalog-section">
      <h2 class="catalog-title">ボタン</h2>
      <div class="component-demo">
        <div style="display: flex; gap: 12px; margin: 12px 0; flex-wrap: wrap;">
          <button class="btn btn-primary">プライマリ</button>
          <button class="btn btn-secondary">セカンダリ</button>
          <button class="btn btn-success">成功</button>
          <button class="btn btn-danger">エラー</button>
        </div>
        <div style="display: flex; gap: 12px; margin: 12px 0; flex-wrap: wrap;">
          <button class="btn btn-primary btn-small">小さい</button>
          <button class="btn btn-primary">標準</button>
          <button class="btn btn-primary btn-large">大きい</button>
        </div>
      </div>
      <details>
        <summary>コード例</summary>
        <div class="code-block">
// TypeScript
button('プライマリ', 'primary', '🎵', 'large')
        </div>
      </details>
    </div>

    <!-- 9. アラート -->
    <div class="catalog-section">
      <h2 class="catalog-title">アラート/通知</h2>
      <div class="component-demo">
        <div style="background: var(--mantine-color-blue-0); border-radius: 8px; padding: var(--training-spacing); margin: var(--session-spacing) 0; border-left: 4px solid var(--mantine-color-blue-6);">
          <h4 style="color: var(--mantine-color-blue-8); margin-bottom: 8px;">💡 ヒント</h4>
          <p style="color: var(--mantine-color-blue-7); font-size: 14px; margin: 0;">基音を「ド」として、相対的な音程を意識しましょう</p>
        </div>
        <div style="background: var(--mantine-color-green-0); border-radius: 8px; padding: var(--training-spacing); margin: var(--session-spacing) 0; border-left: 4px solid var(--mantine-color-green-6);">
          <h4 style="color: var(--mantine-color-green-8); margin-bottom: 8px;">✅ 成功</h4>
          <p style="color: var(--mantine-color-green-7); font-size: 14px; margin: 0;">トレーニングが完了しました！</p>
        </div>
      </div>
      <details>
        <summary>コード例</summary>
        <div class="code-block">
// TypeScript
alert('ヒント', '基音を「ド」として...', 'info')
alert('成功', 'トレーニングが完了しました！', 'success')
        </div>
      </details>
    </div>

    <!-- 10. 音量メーター -->
    <div class="catalog-section">
      <h2 class="catalog-title">音量メーター</h2>
      <div class="component-demo">
        <div class="volume-meter">
          <div class="volume-label">音量確認</div>
          <div class="volume-bar">
            <div class="volume-fill" style="width: 65%;"></div>
          </div>
          <div class="volume-status">適切な音量です</div>
        </div>
      </div>
      <details>
        <summary>コード例</summary>
        <div class="code-block">
// TypeScript
volumeMeter(65) // 65%の音量レベル
        </div>
      </details>
    </div>

    <!-- フッター -->
    <div style="text-align: center; margin-top: 60px; padding-top: 40px; border-top: 1px solid var(--mantine-color-gray-3);">
      <p style="color: var(--mantine-color-gray-6);">
        🎵 相対音感トレーニングアプリ UIカタログ<br>
        Vanilla TypeScript + Mantine v7.6.0
      </p>
    </div>
  </div>

  <script>
    // セッション詳細の展開/折りたたみ機能
    function toggleSessionDetail(sessionNum) {
      const detailElement = document.getElementById(`session-${sessionNum}-detail`);
      const sessionItem = event.currentTarget;
      const expandIcon = sessionItem.querySelector('.expand-icon');
      
      if (detailElement) {
        const isHidden = detailElement.style.display === 'none' || !detailElement.style.display;
        detailElement.style.display = isHidden ? 'block' : 'none';
        
        if (sessionItem) {
          if (isHidden) {
            sessionItem.classList.add('expanded');
          } else {
            sessionItem.classList.remove('expanded');
          }
        }
        
        if (expandIcon) {
          expandIcon.style.transform = isHidden ? 'rotate(180deg)' : 'rotate(0deg)';
        }
      }
    }

    // プログレスバーアニメーションデモ
    function animateProgressBar() {
      const progressFill = document.querySelector('.progress-fill');
      let width = 0;
      const interval = setInterval(() => {
        width += 2;
        if (progressFill) {
          progressFill.style.width = width + '%';
        }
        if (width >= 100) {
          clearInterval(interval);
          setTimeout(() => {
            if (progressFill) {
              progressFill.style.width = '0%';
              animateProgressBar();
            }
          }, 1000);
        }
      }, 100);
    }

    // ドレミガイドアニメーションデモ
    function animateNoteCircles() {
      const circles = document.querySelectorAll('.note-circle');
      let currentIndex = -1;
      
      const interval = setInterval(() => {
        // 前のアクティブを完了状態に
        if (currentIndex >= 0 && circles[currentIndex]) {
          circles[currentIndex].classList.remove('active');
          circles[currentIndex].classList.add('completed');
        }
        
        currentIndex++;
        
        // 新しいアクティブを設定
        if (currentIndex < circles.length && circles[currentIndex]) {
          circles[currentIndex].classList.add('active');
        }
        
        // アニメーション完了時にリセット
        if (currentIndex >= circles.length) {
          setTimeout(() => {
            circles.forEach(circle => {
              circle.classList.remove('active', 'completed');
            });
            currentIndex = -1;
            animateNoteCircles();
          }, 2000);
          clearInterval(interval);
        }
      }, 600);
    }

    // ページ読み込み時にアニメーション開始
    document.addEventListener('DOMContentLoaded', () => {
      console.log('🎵 相対音感アプリ UIカタログ デモページ読み込み完了');
      
      // 少し遅延してアニメーション開始
      setTimeout(() => {
        animateProgressBar();
        animateNoteCircles();
      }, 1000);
    });
  </script>
</body>
</html>